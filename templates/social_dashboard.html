<!doctype html>
<html lang="en" class="light">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Social Studio</title>
<meta name="description" content="Describe your idea, and we'll craft the caption, hashtags, and visuals"/>
<link rel="icon" href="/static/favicon.ico" sizes="any" />
<link rel="apple-touch-icon" href="/static/apple-touch-icon.png" />
<meta name="theme-color" content="#ffffff" />
<script src="/static/tailwind.js"></script>
<link href="https://fonts.googleapis.com" rel="preconnect" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link rel="stylesheet" href="/static/PostAi.css" />
<link rel="stylesheet" href="/static/NewUi.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>

<script>
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          brand: {
            DEFAULT: "#EA4335",
            hover: "#D33828",
            light: "#FCE8E6",
          },
          dark: {
            bg: "#09090b", // Zinc 950
            surface: "#18181b", // Zinc 900
            border: "#27272a", // Zinc 800
          },
        },
        fontFamily: {
          sans: ["Inter", "sans-serif"],
        },
        boxShadow: {
          subtle: "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
          card: "0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)",
        },
      },
    },
  };
</script>
<style>
body,
html {
  font-family: "Plus Jakarta Sans", "system-ui", "sans-serif";
  font-feature-settings: "cv11", "ss01";
  font-weight: 400;
}
.scrollbar-transparent::-webkit-scrollbar-thumb {
  background-color: transparent;
}

.loader-tnl {
    border: 2px solid rgba(128, 128, 128, 0.2);
    border-left-color: currentColor;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 0.8s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* Custom Dropdown Transition */
.dropdown-content-tnl {
    transform-origin: top;
    opacity: 0;
    transform: scaleY(0.95);
    pointer-events: none;
}
.dropdown-content-tnl.active {
    opacity: 1;
    transform: scaleY(1);
    pointer-events: auto;
}
.fade-in-scale {
  animation: fadeInScale 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}
@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.98) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.inset-view {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #ffffff;
  border-radius: 0;
  overflow-y: auto;
  z-index: 1000;
}

.canvas-wrapper {
  position: relative;
  width: 100%;
  padding-bottom: 125%; /* 1080x1350 */
  background: #f9fafb;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e5e7eb;
  transition: all 0.2s ease;
}

.canvas-inner {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.selected-card .canvas-wrapper {
  box-shadow: 0 0 0 2px #111827; 
  border: 2px solid #111827;
}

.skeleton {
  background: linear-gradient(
    90deg,
    #f3f4f6 25%,
    #e5e7eb 50%,
    #f3f4f6 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.dark .selected-card .canvas-wrapper {
  box-shadow: 0 0 0 2px #e5e7eb;
  border: 2px solid #e5e7eb;
}

.dark .skeleton {
  background: linear-gradient(
    90deg,
    #374151 25%,
    #4b5563 50%,
    #374151 75%
  );
  background-size: 200% 100%;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

.inset-view::-webkit-scrollbar {
  width: 8px;
}
.inset-view::-webkit-scrollbar-track {
  background: transparent;
  margin: 10px;
}
.inset-view::-webkit-scrollbar-thumb {
  background-color: #f5f5f5e5;
  border-radius: 4px;
  border: 2px solid #fff;
}

.shimmer-text-rfx {
  background: linear-gradient(
    to right,
    #1f2937 0%,
    #9ca3af 50%,
    #1f2937 100%
  );
  background-size: 200% auto;
  color: #000;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmerTRfx 3s linear infinite;
  font-weight: 500;
}

@keyframes shimmerTRfx {
  0% {
    background-position: 0% center;
  }
  100% {
    background-position: 200% center;
  }
}

.markdown-body p::-webkit-scrollbar {
  display: none;
}

.loading-spinner-Vds {
  border: 2px solid rgba(0, 0, 0, 0.1);
  border-radius: 50%;
  border-top: 2px solid #000000;
  width: 18px;
  height: 18px;
  animation: spinVds 0.8s linear infinite;
}
@keyframes spinVds {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

input[type="color"] {
  -webkit-appearance: none;
  appearance: initial;
  border: 1px solid #e5e7eb;
  padding: 2px;
  border-radius: 0.375rem;
  background: white;
}
input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 0;
}
input[type="color"]::-webkit-color-swatch {
  border: none;
  border-radius: 0.25rem;
}

.product-images-gallery {
  display: flex;
  gap: 10px;
  overflow: hidden;
  max-width: 100%;
  position: relative;
  -ms-overflow-style: none;
  scrollbar-width: none;
  margin-bottom: 30px;
}

.product-images-gallery::-webkit-scrollbar {
  display: none;
}

.product-image-wrapper {
  flex: 0 0 auto;
}

.product-image-wrapper img {
  width: 150px;
  height: 150px;
  object-fit: fill;
  border-radius: 15px;
  background: #ececec;
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
}

.product-images-gallery .gallery-inner {
  display: flex;
  gap: 30px;
  animation: autoScroll 20s linear infinite;
  will-change: transform;
}

@keyframes autoScroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(calc(-100% - 10px));
  }
}

.product-images-gallery:hover .gallery-inner {
  animation-play-state: paused;
}
.product-image-wrapper {
  flex: 0 0 auto;
}

.product-image-wrappe img::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.4) 50%,
    transparent 100%
  );
  background-size: 50% 100%;
  animation: shimmerRfx 1.5s linear infinite;
  transform: translateX(-100%);
}

@keyframes shimmerRfx {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

.icon-input-wrapper {
  position: relative;
}
.icon-input-wrapper svg {
  position: absolute;
  left: 13px;
  top: 23px;
  transform: translateY(-50%);
  color: #6b7280;
  pointer-events: none;
}
.icon-input-wrapper input,
.icon-input-wrapper textarea,
.icon-input-wrapper select {
  padding-left: 40px; /* Space for icon */
}

/* Transition for collapsible content */
.collapse-content {
  transition: all 0.3s ease-in-out;
  overflow: hidden;
}
.chevron-icon {
  transition: transform 0.3s ease;
}
.rotate-180 {
  transform: rotate(180deg);
}
.ease-elastic {
  transition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);
}
.ease-smooth {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

.markdown-body h1 {
  font-size: 1.5em;
  font-weight: 700;
  margin-top: 1em;
  margin-bottom: 0.5em;
  color: #111827;
}
.markdown-body h2 {
  font-size: 1.25em;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
  color: #374151;
}
.markdown-body h3 {
  font-size: 1.1em;
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
}
.markdown-body p {
  margin-bottom: 1em;
  line-height: 1.7;
  color: #4b5563;
}
.markdown-body ul {
  list-style-type: disc;
  padding-left: 1.5em;
  margin-bottom: 1em;
}
.markdown-body ol {
  list-style-type: decimal;
  padding-left: 1.5em;
  margin-bottom: 1em;
}
.markdown-body li {
  margin-bottom: 0.25em;
}
.markdown-body strong {
  font-weight: 600;
  color: #111827;
}
.markdown-body em {
  font-style: italic;
  color: #4b5563;
}
.markdown-body blockquote {
  border-left: 4px solid #e5e7eb;
  padding-left: 1em;
  color: #6b7280;
  font-style: italic;
}


.dark .markdown-body h1 {
  color: #f9fafb;
}

.dark .markdown-body h2 {
  color: #e5e7eb;
}

.dark .markdown-body h3 {
  color: #d1d5db;
}

.dark .markdown-body p {
  color: #9ca3af;
}

.dark .markdown-body ul,
.dark .markdown-body ol {
  color: #9ca3af;
}

.dark .markdown-body li {
  color: #9ca3af;
}

.dark .markdown-body strong {
  color: #f3f4f6;
}

.dark .markdown-body em {
  color: #9ca3af;
}

.dark .markdown-body blockquote {
  border-left-color: #374151;
  color: #9ca3af;
}


.fade-in {
  animation: fadeIn 0.5s ease-in;
}
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.sidebar-collapsed {
  width: 72px !important;
}

  .sidebar-text,
  .sidebar-logo-text,
  .create-btn-text,
  .sidebar-section-title {
      white-space: nowrap;
  }

  .sidebar-collapsed .sidebar-text,
  .sidebar-collapsed .sidebar-section-title,
  .sidebar-collapsed .sidebar-logo-text,
  .sidebar-collapsed .workspace-item-add-logo,
  .sidebar-collapsed .create-btn-text {
    
      display: none; 
  }
.sidebar-collapsed .nav-item{
  justify-content: center;
  padding-left: 0;
  padding-right: 0;
}
.sidebar-collapsed .nav-item svg,
.sidebar-collapsed .nav-item i {
  margin: 0;
}
.sidebar-collapsed .sidebar-header {
  justify-content: center;
  padding-left: 0;
  padding-right: 0;
}
.sidebar-collapsed .sidebar-logo-container {
  margin: 0 auto;
}
.sidebar-collapsed .create-new-btn {
  padding: 10px;
  justify-content: center;
}
.sidebar-collapsed .create-new-btn i {
  margin: 0;
}
.sidebar-collapsed .sidebar-footer {
  padding: 12px 8px;
}
.sidebar-collapsed .sidebar-footer a {
  justify-content: center;
  padding: 8px;
}
.sidebar-collapsed .workspace-header {
  justify-content: center;
  padding: 12px 0;
}
.sidebar-collapsed .workspace-header span,
.sidebar-collapsed .workspace-header i {
  display: none;
}
.sidebar-collapsed .workspace-header::before {
  content: "";
  display: block;
  width: 24px;
  height: 1px;
  background: #e5e7eb;
}

/* Sidebar Toggle Button */
.sidebar-toggle-btn {
  position: absolute;
  top: 50%;
  right: -12px;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: white;
  border: 1px solid #e5e7eb;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 30;
}
.sidebar-toggle-btn:hover {
  background: #f3f4f6;
  transform: translateY(-50%) scale(1.1);
}
.sidebar-toggle-btn svg {
  width: 14px;
  height: 14px;
  color: #6b7280;
  transition: transform 0.3s ease;
}
.sidebar-collapsed .sidebar-toggle-btn svg {
  transform: rotate(180deg);
}

/* Tooltip for collapsed sidebar */
.sidebar-collapsed .nav-item,
.sidebar-collapsed .create-new-btn {
  position: relative;
}
.sidebar-collapsed .nav-item::after{
  content: attr(data-tooltip);
  position: absolute;
  left: calc(100% + 12px);
  top: 50%;
  transform: translateY(-50%);
  background: #1f2937;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  z-index: 100;
}
.sidebar-collapsed .nav-item:hover::after {
  opacity: 1;
}
aside {
  transition: width 0.15s ease-out;
  overflow: visible; 
}
.sidebar-text,
.sidebar-section-title,
.sidebar-logo-text,
.create-btn-text,
.nav-item,
.create-new-btn {
  transition: none;
}
</style>
  </head>
  <body
    class="bg-gray-50 dark:bg-dark-bg text-gray-900 dark:text-gray-100 h-screen flex overflow-hidden w-full overflow-x-hidden"
  >
    <aside id="main-sidebar" class="w-64 bg-white dark:bg-dark-surface border-r border-gray-200 dark:border-dark-border flex flex-col flex-shrink-0 z-20 relative">
        <!-- Sidebar Toggle Button -->
        <button id="sidebar-toggle" class="sidebar-toggle-btn dark:bg-dark-surface dark:border-gray-700" title="Toggle sidebar">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m15 18-6-6 6-6"/>
            </svg>
        </button>

        <div class="sidebar-header h-16 flex items-center px-6 border-b border-gray-100 dark:border-dark-border">
            <a href="/">
            <div class="flex items-center gap-2 font-bold text-xl tracking-tight text-gray-900 dark:text-white">
                <div class="sidebar-logo-container p-[2px] bg-gray-800 dark:bg-white text-white rounded-lg">
                  <svg class="w-6 h-6 dark:text-black text-white" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="0, 0, 400,400">
                  <g id="svgg">
                  <path id="path0" d="M203.290 55.547 C 199.688 60.722,198.235 63.013,198.340 63.354 C 198.394 63.529,198.240 63.672,197.999 63.672 C 197.696 63.672,197.711 63.853,198.047 64.258 C 198.452 64.746,198.400 64.844,197.737 64.844 C 196.777 64.844,193.942 68.504,194.369 69.193 C 194.535 69.463,194.484 69.548,194.244 69.400 C 193.717 69.074,192.459 70.976,192.818 71.556 C 192.973 71.808,192.915 71.888,192.681 71.743 C 192.182 71.435,190.888 73.305,191.224 73.849 C 191.356 74.063,191.302 74.190,191.103 74.131 C 190.412 73.926,178.020 91.719,178.215 92.635 C 178.273 92.907,178.102 93.137,177.836 93.146 C 177.288 93.166,174.554 97.044,174.825 97.416 C 174.921 97.548,174.884 97.569,174.742 97.463 C 174.327 97.153,173.365 98.785,173.671 99.280 C 173.832 99.541,173.778 99.625,173.542 99.479 C 172.986 99.135,172.040 100.321,172.502 100.783 C 172.720 101.001,174.236 100.766,176.372 100.182 C 188.661 96.822,195.085 95.607,195.409 96.580 C 195.691 97.423,193.056 102.657,190.847 105.644 C 189.680 107.224,188.844 108.649,188.991 108.813 C 189.138 108.976,189.062 108.998,188.822 108.861 C 188.283 108.553,186.996 109.901,187.401 110.348 C 187.563 110.526,187.499 110.560,187.259 110.423 C 186.731 110.122,185.423 111.465,185.839 111.881 C 186.001 112.042,185.884 112.116,185.579 112.044 C 185.274 111.973,184.813 112.321,184.554 112.818 C 184.295 113.315,183.929 113.754,183.741 113.794 C 183.552 113.834,183.442 113.999,183.496 114.160 C 183.550 114.321,183.374 114.409,183.105 114.355 C 182.837 114.302,182.661 114.478,182.715 114.746 C 182.769 115.015,182.653 115.190,182.458 115.137 C 181.827 114.963,178.086 117.981,178.368 118.437 C 178.534 118.705,178.458 118.760,178.168 118.581 C 177.584 118.220,176.481 119.084,176.822 119.636 C 176.965 119.866,176.886 119.926,176.641 119.775 C 176.261 119.540,172.266 122.047,172.266 122.521 C 172.266 122.621,172.469 122.577,172.717 122.424 C 172.998 122.250,173.061 122.317,172.885 122.602 C 172.729 122.854,172.453 122.967,172.269 122.854 C 171.802 122.565,166.971 125.979,167.090 126.514 C 167.144 126.756,166.863 126.953,166.467 126.953 C 165.602 126.953,164.330 128.250,164.745 128.708 C 164.907 128.886,164.815 128.903,164.542 128.745 C 163.948 128.403,160.042 131.531,160.380 132.078 C 160.504 132.278,160.429 132.393,160.213 132.334 C 159.997 132.275,159.532 132.578,159.178 133.008 C 158.825 133.438,158.664 133.525,158.821 133.203 C 158.977 132.881,158.557 133.127,157.887 133.751 C 157.217 134.375,156.763 135.038,156.879 135.226 C 156.995 135.413,156.857 135.518,156.572 135.459 C 156.287 135.400,156.099 135.571,156.152 135.840 C 156.206 136.108,156.030 136.284,155.762 136.230 C 155.476 136.173,155.293 136.500,155.321 137.018 C 155.355 137.658,155.240 137.797,154.905 137.518 C 154.437 137.130,151.250 140.458,151.465 141.110 C 151.519 141.273,151.343 141.362,151.074 141.309 C 150.806 141.255,150.578 141.563,150.568 141.992 C 150.558 142.422,150.354 142.735,150.115 142.688 C 148.831 142.434,142.544 153.656,140.479 159.886 C 137.847 167.825,137.221 178.959,139.025 185.728 C 140.084 189.700,143.943 197.825,144.582 197.429 C 144.867 197.254,144.939 197.313,144.771 197.585 C 144.277 198.384,147.407 202.619,148.341 202.415 C 148.679 202.341,148.797 202.469,148.634 202.733 C 148.290 203.288,149.574 204.755,150.113 204.423 C 150.332 204.287,150.398 204.359,150.260 204.583 C 150.011 204.986,151.077 206.145,151.525 205.957 C 151.653 205.903,151.758 206.049,151.758 206.281 C 151.758 206.851,153.154 207.841,153.583 207.576 C 153.771 207.459,153.877 207.575,153.818 207.834 C 153.689 208.399,159.078 212.136,160.137 212.215 C 160.548 212.246,160.852 212.424,160.813 212.611 C 160.673 213.282,177.102 221.290,177.770 220.877 C 177.965 220.756,178.125 220.823,178.125 221.026 C 178.125 221.229,178.784 221.701,179.590 222.076 C 180.396 222.450,181.332 222.997,181.670 223.291 C 182.008 223.585,182.736 223.863,183.287 223.908 C 184.565 224.014,184.284 224.915,182.867 225.253 C 182.300 225.388,181.660 225.627,181.445 225.785 C 178.326 228.072,155.052 228.797,147.922 226.828 C 145.812 226.246,143.895 225.887,143.662 226.031 C 143.420 226.181,143.350 226.112,143.500 225.870 C 143.647 225.632,143.375 225.330,142.877 225.179 C 141.018 224.616,134.853 221.323,132.422 219.595 C 131.025 218.602,129.854 217.874,129.818 217.977 C 129.782 218.080,129.606 218.004,129.427 217.808 C 129.235 217.598,129.341 217.578,129.688 217.760 C 130.010 217.929,129.575 217.473,128.722 216.748 C 127.869 216.023,127.021 215.478,126.837 215.537 C 126.654 215.596,126.598 215.493,126.712 215.309 C 126.826 215.124,126.126 214.197,125.155 213.248 C 124.185 212.300,122.679 210.603,121.808 209.477 C 120.937 208.351,120.080 207.519,119.905 207.628 C 119.729 207.736,119.458 207.619,119.303 207.368 C 119.113 207.061,119.190 207.016,119.537 207.230 C 119.918 207.465,119.985 207.370,119.793 206.868 C 119.649 206.493,119.531 206.102,119.531 206.000 C 119.531 205.897,119.351 205.925,119.131 206.061 C 118.911 206.197,118.778 206.163,118.836 205.986 C 119.024 205.415,115.590 199.194,115.215 199.426 C 115.016 199.549,114.960 199.371,115.091 199.029 C 115.222 198.687,115.060 197.668,114.730 196.763 C 110.057 183.929,113.475 164.069,122.956 148.967 C 124.054 147.218,124.876 145.680,124.781 145.549 C 124.687 145.419,124.723 145.397,124.863 145.501 C 125.420 145.915,128.998 140.230,128.533 139.669 C 128.219 139.291,128.211 139.055,128.506 138.873 C 128.737 138.730,128.900 138.759,128.870 138.936 C 128.720 139.798,128.975 139.903,129.678 139.266 C 130.103 138.882,130.364 138.427,130.258 138.256 C 130.152 138.085,130.271 137.817,130.523 137.662 C 130.808 137.485,130.875 137.549,130.701 137.830 C 130.077 138.841,130.872 138.182,132.008 136.748 C 132.676 135.904,133.052 135.109,132.844 134.980 C 132.378 134.692,126.859 139.376,127.137 139.825 C 127.246 140.001,127.034 140.122,126.665 140.093 C 126.297 140.063,125.991 140.259,125.986 140.527 C 125.981 140.796,125.836 141.005,125.664 140.993 C 125.193 140.958,122.446 143.467,122.559 143.827 C 122.612 144.000,122.437 144.097,122.168 144.043 C 121.899 143.989,121.728 144.178,121.787 144.463 C 121.846 144.747,121.740 144.884,121.551 144.768 C 121.362 144.651,120.786 145.032,120.272 145.615 C 119.572 146.406,119.541 146.502,120.148 145.993 C 120.595 145.619,121.102 145.313,121.275 145.313 C 121.448 145.313,121.133 145.672,120.574 146.111 C 120.016 146.551,119.448 146.885,119.313 146.854 C 118.829 146.745,116.830 148.956,117.066 149.339 C 117.199 149.554,117.129 149.619,116.909 149.484 C 116.543 149.257,114.914 150.666,115.137 151.018 C 115.190 151.102,115.103 151.184,114.941 151.200 C 114.332 151.258,113.310 152.465,113.546 152.847 C 113.682 153.066,113.610 153.133,113.386 152.994 C 112.939 152.718,112.000 153.628,112.308 154.040 C 112.414 154.181,112.384 154.211,112.243 154.105 C 111.732 153.723,111.023 154.735,111.235 155.544 C 111.386 156.125,111.311 156.286,110.982 156.082 C 110.324 155.675,109.372 156.569,109.661 157.323 C 109.838 157.784,109.734 157.884,109.263 157.703 C 108.555 157.432,103.379 162.745,103.757 163.355 C 103.871 163.540,103.732 163.643,103.447 163.584 C 103.162 163.525,102.974 163.696,103.027 163.965 C 103.081 164.233,102.977 164.409,102.797 164.355 C 102.477 164.260,98.448 168.718,98.441 169.175 C 98.439 169.301,97.724 170.154,96.853 171.070 C 95.326 172.675,87.798 182.600,85.202 186.429 C 84.488 187.483,84.063 188.498,84.221 188.773 C 84.375 189.040,84.361 189.132,84.190 188.978 C 83.240 188.120,70.738 210.537,70.566 213.409 C 70.534 213.947,70.435 214.315,70.346 214.226 C 70.048 213.929,67.967 219.271,66.224 224.805 C 60.296 243.627,59.360 260.446,63.861 267.249 C 66.523 271.270,70.171 271.876,80.273 269.973 C 83.711 269.326,91.797 267.818,98.242 266.622 C 104.688 265.426,112.686 263.928,116.016 263.293 C 119.346 262.658,123.652 261.862,125.586 261.524 C 127.520 261.187,129.893 260.751,130.859 260.557 C 131.826 260.362,134.199 259.919,136.133 259.571 C 138.066 259.224,142.725 258.340,146.484 257.607 C 152.671 256.401,167.766 253.541,181.641 250.946 C 197.934 247.899,201.331 247.050,205.265 245.048 C 210.425 242.420,219.475 235.967,219.229 235.090 C 219.170 234.880,219.270 234.800,219.453 234.912 C 219.949 235.219,223.875 231.642,223.575 231.157 C 223.419 230.904,223.502 230.853,223.785 231.028 C 224.317 231.357,225.486 230.549,225.185 230.061 C 225.076 229.885,225.193 229.614,225.445 229.459 C 225.757 229.266,225.797 229.350,225.571 229.725 C 225.290 230.192,225.339 230.194,225.902 229.737 C 227.100 228.765,224.615 226.297,221.824 225.688 C 221.566 225.632,221.066 225.313,220.714 224.979 C 219.532 223.857,214.842 221.440,214.389 221.719 C 214.126 221.882,214.048 221.824,214.199 221.579 C 214.344 221.345,213.731 220.748,212.795 220.214 C 211.881 219.692,207.441 217.152,202.930 214.570 C 193.033 208.905,191.418 208.047,190.511 207.974 C 190.126 207.943,189.599 207.643,189.339 207.307 C 188.577 206.321,178.172 200.706,177.675 201.013 C 177.411 201.177,177.328 201.122,177.476 200.883 C 177.766 200.414,176.678 199.882,176.127 200.223 C 175.926 200.347,175.810 200.267,175.869 200.045 C 175.978 199.636,170.145 196.094,169.363 196.094 C 169.129 196.094,168.714 195.736,168.441 195.298 C 168.168 194.861,167.646 194.553,167.282 194.615 C 166.917 194.676,166.614 194.551,166.607 194.336 C 166.601 194.121,165.669 193.081,164.536 192.026 C 155.945 184.016,154.183 172.720,159.770 161.477 C 160.871 159.262,161.730 157.399,161.678 157.338 C 161.626 157.277,162.097 156.688,162.725 156.029 C 164.428 154.243,166.223 151.802,166.102 151.436 C 166.044 151.259,166.157 151.213,166.354 151.335 C 166.738 151.572,168.206 149.627,168.046 149.092 C 167.993 148.915,168.101 148.864,168.286 148.978 C 168.759 149.271,171.567 146.313,171.199 145.909 C 171.034 145.727,171.105 145.696,171.357 145.841 C 171.902 146.153,175.645 143.021,175.456 142.411 C 175.384 142.181,175.451 142.118,175.605 142.271 C 176.000 142.667,177.415 141.838,177.130 141.377 C 177.001 141.168,177.040 141.042,177.217 141.098 C 177.923 141.320,187.517 134.250,187.745 133.339 C 187.872 132.835,188.142 132.422,188.347 132.422 C 188.551 132.422,188.609 132.598,188.477 132.813 C 187.355 134.628,194.180 129.944,197.900 126.346 C 200.321 124.004,200.711 123.448,200.502 122.635 C 200.284 121.790,200.328 121.740,200.889 122.199 C 202.582 123.588,214.660 102.045,213.412 99.862 C 213.271 99.615,213.302 99.546,213.480 99.708 C 213.658 99.869,214.134 99.703,214.538 99.338 C 215.380 98.575,214.352 98.257,224.805 102.516 C 228.242 103.917,231.284 104.981,231.563 104.880 C 231.843 104.779,231.980 104.845,231.868 105.025 C 231.646 105.386,233.290 106.250,234.198 106.250 C 235.181 106.250,234.830 105.085,232.585 100.899 C 230.642 97.278,230.333 96.889,229.753 97.342 C 229.176 97.793,229.160 97.777,229.613 97.198 C 230.225 96.416,230.430 96.854,223.429 83.984 C 209.290 57.995,206.837 53.590,206.587 53.744 C 206.450 53.829,206.362 53.611,206.392 53.260 C 206.523 51.704,205.377 52.549,203.290 55.547 M325.781 128.790 C 325.029 128.877,322.041 129.385,319.141 129.921 C 316.240 130.456,310.615 131.495,306.641 132.228 C 302.666 132.962,297.041 134.019,294.141 134.577 C 291.240 135.134,287.858 135.775,286.624 136.001 C 285.390 136.226,284.461 136.543,284.561 136.704 C 284.661 136.865,284.346 136.921,283.861 136.828 C 283.377 136.736,280.174 137.194,276.744 137.848 C 273.314 138.501,264.004 140.279,256.055 141.798 C 248.105 143.318,239.316 144.979,236.523 145.490 C 207.843 150.735,196.040 153.542,196.382 155.035 C 196.433 155.258,196.257 155.359,195.991 155.259 C 195.396 155.034,192.969 156.471,192.969 157.049 C 192.969 157.279,192.819 157.375,192.635 157.262 C 192.167 156.972,188.844 159.144,188.539 159.939 C 188.400 160.301,188.106 160.485,187.886 160.349 C 187.367 160.028,183.518 162.843,183.816 163.325 C 183.941 163.527,183.810 163.643,183.525 163.584 C 183.241 163.525,183.045 163.676,183.090 163.919 C 183.135 164.162,182.872 164.338,182.504 164.310 C 182.098 164.278,181.887 164.488,181.966 164.844 C 182.038 165.166,181.969 165.302,181.812 165.146 C 181.474 164.807,178.663 167.190,178.818 167.685 C 178.877 167.873,178.773 167.933,178.587 167.818 C 178.401 167.703,177.658 168.219,176.935 168.964 C 175.423 170.524,175.527 170.747,178.516 172.330 C 179.482 172.842,180.749 173.579,181.330 173.969 C 181.912 174.358,182.598 174.547,182.856 174.387 C 183.136 174.214,183.222 174.263,183.069 174.511 C 182.919 174.754,184.948 176.130,187.989 177.848 C 190.835 179.456,195.889 182.346,199.219 184.270 C 212.079 191.701,229.864 200.959,230.510 200.560 C 230.713 200.435,230.830 200.504,230.771 200.713 C 230.662 201.100,236.593 205.225,237.305 205.256 C 237.520 205.266,237.703 205.537,237.713 205.859 C 237.723 206.182,237.987 206.387,238.299 206.315 C 238.612 206.243,238.737 206.315,238.578 206.474 C 237.988 207.064,239.099 207.820,239.914 207.384 C 240.610 207.012,240.642 207.050,240.250 207.783 C 239.813 208.600,239.838 208.651,240.717 208.740 C 240.983 208.767,241.266 209.141,241.345 209.570 C 241.545 210.644,242.193 211.371,242.683 211.068 C 242.906 210.930,242.975 211.002,242.836 211.228 C 242.696 211.454,243.103 212.755,243.739 214.120 C 247.880 222.994,246.241 233.396,239.133 243.359 C 238.136 244.756,237.351 245.986,237.387 246.094 C 237.470 246.340,235.882 248.047,235.569 248.047 C 235.083 248.047,230.279 252.795,230.381 253.175 C 230.440 253.394,230.320 253.470,230.115 253.343 C 229.909 253.216,229.509 253.443,229.226 253.847 C 228.943 254.252,228.535 254.650,228.320 254.733 C 228.105 254.815,227.988 255.059,228.060 255.273 C 228.132 255.488,228.064 255.538,227.911 255.385 C 227.546 255.020,225.977 256.124,225.977 256.745 C 225.977 257.009,225.713 257.226,225.391 257.226 C 225.068 257.226,223.750 258.034,222.461 259.020 C 221.172 260.007,219.373 261.303,218.463 261.900 C 217.554 262.497,216.922 263.167,217.059 263.389 C 217.196 263.611,217.135 263.685,216.922 263.554 C 216.507 263.297,213.672 265.059,213.672 265.574 C 213.672 265.745,213.439 265.885,213.153 265.885 C 212.368 265.885,209.056 268.278,208.350 269.355 C 208.007 269.878,207.563 270.204,207.362 270.080 C 206.883 269.784,205.804 270.688,206.088 271.148 C 206.209 271.344,206.075 271.455,205.791 271.396 C 205.506 271.337,205.322 271.522,205.381 271.806 C 205.440 272.091,205.339 272.232,205.158 272.119 C 204.396 271.649,197.449 279.427,197.933 280.210 C 198.062 280.419,197.984 280.476,197.759 280.337 C 197.341 280.078,196.094 281.655,196.094 282.443 C 196.094 282.685,195.750 283.174,195.330 283.531 C 194.099 284.576,191.576 289.702,190.011 294.336 C 188.266 299.504,187.617 300.363,185.938 299.729 C 185.054 299.395,184.763 299.398,184.754 299.741 C 184.747 299.991,184.576 299.911,184.373 299.564 C 184.170 299.217,183.077 298.539,181.943 298.057 C 180.810 297.575,177.114 295.970,173.729 294.489 C 170.345 293.008,167.401 291.797,167.186 291.797 C 166.203 291.797,167.248 294.160,172.457 303.711 C 172.926 304.570,174.157 306.855,175.192 308.789 C 176.227 310.723,178.166 314.326,179.500 316.797 C 183.975 325.085,187.616 331.946,192.768 341.797 C 195.638 347.286,195.798 347.336,198.400 343.572 C 199.521 341.951,200.349 340.625,200.241 340.625 C 200.133 340.625,200.564 340.056,201.200 339.360 C 201.835 338.664,202.267 337.863,202.159 337.582 C 202.051 337.300,202.114 337.163,202.301 337.278 C 202.675 337.509,204.818 334.477,204.818 333.716 C 204.818 333.453,204.955 333.323,205.124 333.427 C 205.450 333.628,206.472 332.035,206.333 331.543 C 206.287 331.382,206.414 331.250,206.614 331.250 C 207.237 331.250,211.397 325.036,211.097 324.552 C 210.934 324.287,210.986 324.203,211.223 324.349 C 211.747 324.673,219.247 313.769,218.893 313.197 C 218.740 312.950,218.809 312.881,219.056 313.034 C 219.456 313.281,221.696 310.469,221.955 309.393 C 222.018 309.130,222.562 308.376,223.163 307.717 C 223.764 307.058,224.166 306.285,224.056 305.998 C 223.946 305.712,224.051 305.520,224.289 305.571 C 224.938 305.711,230.227 298.040,229.786 297.599 C 229.558 297.370,227.961 297.618,225.550 298.256 C 219.154 299.947,216.171 300.740,212.988 301.592 C 211.323 302.038,209.366 302.479,208.639 302.573 L 207.318 302.743 207.534 301.130 C 207.813 299.052,209.741 295.149,211.900 292.293 C 212.835 291.056,213.500 289.867,213.378 289.651 C 213.256 289.435,213.305 289.394,213.488 289.560 C 213.919 289.952,217.228 286.710,216.915 286.203 C 216.784 285.991,216.848 285.923,217.059 286.053 C 217.531 286.345,222.359 282.499,222.083 282.051 C 221.973 281.874,222.189 281.753,222.563 281.782 C 222.939 281.812,223.194 281.605,223.135 281.319 C 223.076 281.034,223.183 280.897,223.373 281.015 C 223.563 281.132,225.106 280.215,226.801 278.976 C 228.496 277.738,230.893 276.055,232.129 275.238 C 233.383 274.408,234.262 273.570,234.119 273.339 C 233.976 273.109,234.048 273.040,234.281 273.184 C 234.937 273.589,241.521 268.470,241.139 267.852 C 241.005 267.635,241.082 267.573,241.312 267.715 C 241.856 268.052,248.122 262.156,247.790 261.619 C 247.650 261.393,247.711 261.316,247.925 261.448 C 248.139 261.581,249.216 260.597,250.318 259.262 C 253.259 255.700,254.954 253.311,254.292 253.664 C 253.973 253.835,254.081 253.651,254.533 253.257 C 257.089 251.026,260.917 243.016,262.689 236.192 C 265.465 225.505,264.882 214.234,261.147 206.350 C 259.238 202.321,256.336 197.947,255.794 198.283 C 255.528 198.447,255.455 198.385,255.612 198.131 C 255.956 197.575,253.564 194.846,253.025 195.179 C 252.799 195.319,252.726 195.252,252.863 195.030 C 253.205 194.477,249.327 190.903,248.763 191.251 C 248.506 191.410,248.423 191.355,248.568 191.120 C 248.893 190.595,247.820 189.696,247.273 190.034 C 247.043 190.176,246.904 190.088,246.963 189.839 C 247.101 189.258,240.244 185.069,239.575 185.326 C 239.298 185.432,239.114 185.329,239.165 185.098 C 239.287 184.545,220.323 175.750,219.434 175.947 C 219.058 176.031,218.750 175.939,218.750 175.745 C 218.750 175.550,218.970 175.388,219.238 175.385 C 219.507 175.382,219.307 175.162,218.794 174.897 C 217.601 174.280,217.666 173.668,218.940 173.509 C 219.487 173.440,219.861 173.264,219.771 173.118 C 219.680 172.971,219.985 172.824,220.448 172.789 C 220.910 172.755,223.311 172.345,225.781 171.878 C 242.711 168.678,257.937 171.053,269.285 178.662 C 270.759 179.651,272.147 180.347,272.371 180.208 C 272.606 180.063,272.660 180.147,272.498 180.408 C 272.331 180.678,272.473 180.859,272.852 180.859 C 273.199 180.859,273.387 181.015,273.270 181.206 C 272.983 181.670,274.009 182.493,274.415 182.126 C 274.591 181.966,274.614 182.047,274.466 182.305 C 274.158 182.841,275.513 183.716,275.988 183.287 C 276.158 183.133,276.189 183.197,276.057 183.429 C 275.761 183.951,278.001 186.738,278.618 186.614 C 278.864 186.564,279.096 186.743,279.133 187.012 C 279.169 187.280,279.221 187.676,279.248 187.891 C 279.275 188.105,279.590 188.281,279.948 188.281 C 280.306 188.281,280.490 188.390,280.356 188.524 C 280.223 188.658,280.778 189.756,281.589 190.965 C 295.397 211.535,291.157 240.658,271.359 261.229 C 268.861 263.824,270.001 264.172,272.879 261.694 C 279.332 256.137,280.655 254.913,280.557 254.590 C 280.498 254.397,280.598 254.330,280.779 254.442 C 281.173 254.686,288.524 247.620,288.369 247.146 C 288.310 246.965,288.416 246.912,288.605 247.029 C 289.067 247.314,290.712 245.530,290.336 245.153 C 290.173 244.990,290.215 244.910,290.430 244.975 C 290.847 245.101,296.161 239.739,296.159 239.192 C 296.159 239.013,296.260 238.779,296.384 238.672 C 296.508 238.564,296.468 238.740,296.294 239.063 C 295.852 239.885,296.247 239.473,300.160 235.039 C 302.018 232.934,303.432 231.040,303.302 230.830 C 303.173 230.621,303.221 230.498,303.409 230.557 C 303.884 230.706,306.294 227.904,306.418 227.059 C 306.474 226.678,306.701 226.367,306.922 226.367 C 307.493 226.367,311.742 220.667,311.484 220.249 C 311.366 220.058,311.442 219.951,311.652 220.010 C 312.617 220.281,324.981 201.308,324.425 200.408 C 324.286 200.184,324.353 200.000,324.573 200.000 C 324.793 200.000,325.172 199.627,325.416 199.172 C 325.727 198.589,325.732 198.422,325.430 198.609 C 324.731 199.040,324.934 198.622,325.962 197.514 C 330.197 192.944,337.565 171.067,339.332 157.814 C 340.796 146.830,339.357 132.965,336.806 133.491 C 336.559 133.543,336.454 133.329,336.574 133.018 C 337.402 130.860,330.681 128.227,325.781 128.790 " stroke="none" fill="currentColor" fill-rule="evenodd">
                  </path>
                  <path id="path1" d="M197.070 64.453 C 196.938 64.668,197.201 64.844,197.656 64.844 C 198.111 64.844,198.375 64.668,198.242 64.453 C 198.109 64.238,197.846 64.063,197.656 64.063 C 197.467 64.063,197.203 64.238,197.070 64.453 M187.772 133.225 C 187.646 133.707,187.731 133.972,187.985 133.888 C 188.479 133.723,188.751 132.422,188.292 132.422 C 188.121 132.422,187.887 132.783,187.772 133.225 M119.964 146.117 C 119.450 146.544,119.099 146.963,119.183 147.047 C 119.267 147.131,119.829 146.775,120.432 146.256 C 121.035 145.737,121.386 145.318,121.213 145.325 C 121.040 145.333,120.478 145.689,119.964 146.117 M110.762 155.211 C 110.116 155.683,110.108 155.757,110.687 155.980 C 111.109 156.141,111.328 156.021,111.328 155.629 C 111.328 155.277,111.513 155.147,111.779 155.311 C 112.059 155.483,112.124 155.418,111.951 155.138 C 111.605 154.579,111.628 154.577,110.762 155.211 M236.065 247.077 C 234.954 248.345,235.527 248.339,236.719 247.070 C 237.223 246.533,237.474 246.097,237.275 246.101 C 237.077 246.105,236.532 246.544,236.065 247.077 " stroke="none" fill="currentColor" fill-rule="evenodd">
                  </path>
                  <path id="path2" d="M218.359 173.841 C 217.839 174.177,217.839 174.261,218.359 174.597 C 218.737 174.841,218.992 174.841,219.076 174.597 C 219.334 173.847,218.960 173.453,218.359 173.841 M182.422 224.573 C 182.422 225.125,182.624 225.265,183.203 225.113 C 184.141 224.868,184.215 224.391,183.366 224.065 C 182.474 223.723,182.422 223.751,182.422 224.573 " stroke="none" fill="currentColor" fill-rule="evenodd">
                  </path>
                  <path id="path3" d="" stroke="none" fill="currentColor" fill-rule="evenodd">
                  </path>
                  <path id="path4" d="" stroke="none" fill="currentColor" fill-rule="evenodd">
                  </path>
                  </g>
                  </svg>  
                </div>
                <span class="sidebar-logo-text">Social Studio</span>
            </div>
            </a>
        </div>

        <div class="p-4">
            <button id="Fcrtnew" class="create-new-btn w-full group bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 hover:border-brand dark:hover:border-brand text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-xl flex items-center justify-center gap-2 font-medium  shadow-sm hover:shadow-md">
                <i data-lucide="plus" class="w-4 h-4 text-brand group-hover:scale-110 transition-transform"></i>
                <span class="create-btn-text">Create New</span>
            </button>
        </div>

        <nav class="flex-1 overflow-y-auto px-3 space-y-0.5" id="sidebar-nav">
            
            <a href="#" onclick="switchView('home', this)" data-tooltip="Connect" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 group-hover:text-brand  flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-workflow-icon lucide-workflow"><rect width="8" height="8" x="3" y="3" rx="2"/><path d="M7 11v4a2 2 0 0 0 2 2h4"/><rect width="8" height="8" x="13" y="13" rx="2"/></svg>
                <span class="sidebar-text font-medium text-sm">Connect</span>
            </a>

            <a href="#" onclick="switchView('calendar', this)" data-tooltip="Scheduled" class="nav-item active flex items-center gap-3 px-3 py-2 bg-brand-light/50 dark:bg-brand/10 text-brand dark:text-brand rounded-lg ">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 group-hover:text-brand  flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-clock-icon lucide-calendar-clock"><path d="M16 14v2.2l1.6 1"/><path d="M16 2v4"/><path d="M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"/><path d="M3 10h5"/><path d="M8 2v4"/><circle cx="16" cy="16" r="6"/></svg>
                <span class="sidebar-text font-medium text-sm">Scheduled</span>
            </a>

            <a href="#" onclick="switchView('poster', this)" data-tooltip="Poster" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg class="w-5 h-5 group-hover:text-brand  flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame-icon lucide-flame"><path d="M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"/></svg>
                <span class="sidebar-text font-medium text-sm">Poster</span>
            </a>

            <a href="#" onclick="switchView('content', this)" data-tooltip="Media Snag" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg class="w-5 h-5 group-hover:text-brand  flex-shrink-0" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-image-down-icon lucide-image-down"><path d="M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21"/><path d="m14 19 3 3v-5.5"/><path d="m17 22 3-3"/><circle cx="9" cy="9" r="2"/></svg>
                <span class="sidebar-text font-medium text-sm">Media Snag</span>
            </a>
            <a href="#" onclick="switchView('research', this)" data-tooltip="Research" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg class="w-5 h-5 group-hover:text-brand  flex-shrink-0" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-microscope-icon lucide-microscope"><path d="M6 18h8"/><path d="M3 22h18"/><path d="M14 22a7 7 0 1 0 0-14h-1"/><path d="M9 14h2"/><path d="M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z"/><path d="M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3"/></svg>
                <span class="sidebar-text font-medium text-sm">Research</span>
            </a>
            <a href="#" onclick="switchView('remix', this)" data-tooltip="Remix" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg class="w-5 h-5 group-hover:text-brand  flex-shrink-0" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-blend-icon lucide-blend"><circle cx="9" cy="9" r="7"/><circle cx="15" cy="15" r="7"/></svg>
                <span class="sidebar-text font-medium text-sm">Remix</span>
            </a>
            <a href="#" onclick="switchView('clickframe', this)" data-tooltip="clickframe" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg class="w-5 h-5 group-hover:text-brand  flex-shrink-0" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gallery-vertical-icon lucide-gallery-vertical"><path d="M3 2h18"/><rect width="18" height="12" x="3" y="6" rx="2"/><path d="M3 22h18"/></svg>
                <span class="sidebar-text font-medium text-sm">Click Frame</span>
            </a>
            
            <a href="#" onclick="switchView('integrations', this)" data-tooltip="Integrations" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg  group">
                <svg class="w-5 h-5 group-hover:text-brand  flex-shrink-0" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-waypoints-icon lucide-waypoints"><circle cx="12" cy="4.5" r="2.5"/><path d="m10.2 6.3-3.9 3.9"/><circle cx="4.5" cy="12" r="2.5"/><path d="M7 12h10"/><circle cx="19.5" cy="12" r="2.5"/><path d="m13.8 17.7 3.9-3.9"/><circle cx="12" cy="19.5" r="2.5"/></svg>
                <span class="sidebar-text font-medium text-sm">Integrations</span>
            </a>
            <div class="workspace-header pt-6 pb-2 px-3 flex items-center justify-between">
                <span class="sidebar-section-title text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider">Workspace</span>
                <i data-lucide="plus" class="workspace-item-add-logo w-3.5 h-3.5 text-gray-400 cursor-pointer hover:text-brand"></i>
            </div>

            <a href="#"  data-tooltip="Q1 Marketing" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg ">
                <i data-lucide="folder" class="w-4 h-4 flex-shrink-0"></i>
                <span class="sidebar-text text-sm">Q1 Marketing</span>
            </a>
            <a href="#" onclick="switchView('brand', this)" data-tooltip="Brand" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg ">
                <i data-lucide="folder-open" class="w-4 h-4 flex-shrink-0"></i>
                <span class="sidebar-text text-sm">Brand Assets</span>
            </a>
        </nav>

        <div class="sidebar-footer p-3 border-t border-gray-200 dark:border-dark-border space-y-1">
            <a href="#" data-tooltip="Invite Team" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-500 hover:text-gray-900 dark:hover:text-white rounded-lg  text-sm">
                <i data-lucide="users" class="w-4 h-4 flex-shrink-0"></i>
                <span class="sidebar-text">Invite Team</span>
            </a>
            <a href="#" data-tooltip="Help & Support" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-500 hover:text-gray-900 dark:hover:text-white rounded-lg  text-sm">
                <i data-lucide="life-buoy" class="w-4 h-4 flex-shrink-0"></i>
                <span class="sidebar-text">Help & Support</span>
            </a>
        </div>
    </aside>

    <main
      class="flex-1 flex flex-col min-w-0 bg-white dark:bg-dark-bg relative"
    >
      <header
        class="h-[70px] flex items-center justify-between px-6 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border z-10 sticky top-0"
      >
        <div class="relative w-96 hidden md:block group">
          <span
            class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
          >
            <i
              data-lucide="search"
              class="w-4 h-4 text-gray-400 group-focus-within:text-brand "
            ></i>
          </span>
          <input
            class="block w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-zinc-700 rounded-full leading-5 dark:bg-zinc-800/50 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:bg-white dark:focus:bg-zinc-900 focus:ring-1 focus:ring-brand focus:border-brand sm:text-sm "
            placeholder="Search tasks, events, or files..."
            type="text"
          />
          <div
            class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none"
          >
            <span
              class="text-gray-400 text-xs border border-gray-200 dark:border-zinc-700 rounded px-1.5 py-0.5"
              >âŒ˜K</span
            >
          </div>
        </div>

        <div class="flex items-center gap-3">
          <button
          id="themeToggle"
          class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg
                text-gray-600 hover:text-slate-600
                dark:text-slate-400 dark:hover:text-slate-400
                duration-300 ease-in-out">

          <i data-lucide="sun" class="w-5 h-5 hidden" data-theme-icon="light"></i>
          <i data-lucide="moon" class="w-5 h-5 hidden" data-theme-icon="dark"></i>
          <i data-lucide="airplay" class="w-5 h-5 hidden" data-theme-icon="system"></i>

          <span
            class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium
                  duration-300 ease-in-out group-hover:max-w-[140px]"
            id="themeLabel">
            Mode (System)
          </span>
        </button>

          <a href="/canvas" title="Design Studio">
            <button
              class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg text-gray-600 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-400  duration-300 ease-in-out"
            >
              <span
                class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium  duration-300 ease-in-out group-hover:max-w-[120px]"
              >
                DesignStudio
              </span>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-drafting-compass-icon lucide-drafting-compass"><path d="m12.99 6.74 1.93 3.44"/><path d="M19.136 12a10 10 0 0 1-14.271 0"/><path d="m21 21-2.16-3.84"/><path d="m3 21 8.02-14.26"/><circle cx="12" cy="5" r="2"/></svg>
            </button>
          </a>
          <a href="/setting" title="Settings">
            <button
              class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg text-gray-600 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-400  duration-300 ease-in-out"
            >
              <span
                class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium  duration-300 ease-in-out group-hover:max-w-[80px]"
              >
                Settings
              </span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                ></path>
              </svg>
            </button>
          </a>
          <form action="/logout" method="POST" class="m-0">
            <button
              class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg text-gray-600 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400  duration-300 ease-in-out"
            >
              <span
                class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium  duration-300 ease-in-out group-hover:max-w-[80px]"
              >
                Logout
              </span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
            </button>
          </form>
        </div>
      </header>

      <section id="calendar" class="view-section active overflow-hidden">
        <div
          class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
        >
          <div class="flex items-center gap-4">
            <h1
              class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
            >
              Scheduled Posts
            </h1>
          </div>

          <div>
            <div
              class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0"
            >
              <div class="flex flex-wrap items-center gap-3 w-full sm:w-auto">
                <div id="date-navBlz" class="flex items-center bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-xl p-1 shadow-sm mr-2">
                    <button id="prev-dateBlz" class="p-1.5 hover:bg-slate-50 dark:hover:bg-zinc-700 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-white ">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                    </button>
                    <button id="today-dateBlz" class="px-3 py-1 text-xs font-semibold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 rounded-md ">
                        Today
                    </button>
                    <button id="next-dateBlz" class="p-1.5 hover:bg-slate-50 dark:hover:bg-zinc-700 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-white ">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                    </button>
                </div>

                <!-- View Switcher Dropdown -->
                <div class="relative group">
                  <button
                    id="view-btnBlz"
                    class="flex items-center space-x-2 px-4 py-2 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 shadow-sm "
                  >
                    <span id="current-view-labelBlz">Week View</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-3 h-3 text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-300"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="m6 9 6 6 6-6" />
                    </svg>
                  </button>
                  <!-- View Dropdown -->
                  <div
                    class="hidden group-hover:block absolute right-0 top-full pt-2 w-40 z-30"
                  >
                    <div class="bg-white dark:bg-zinc-800 border border-slate-100 dark:border-zinc-700 rounded-xl shadow-xl p-2">
                        <button onclick="switchViewBlz('list')" class="w-full text-left px-3 py-2 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 hover:text-slate-900 dark:hover:text-white rounded-lg  flex items-center justify-between group/item">
                            <span>List View</span>
                            <i data-lucide="check" class="w-3.5 h-3.5 text-brand opacity-0 group-[.active]/item:opacity-100 check-icon-view" data-view="list"></i>
                        </button>
                        <button onclick="switchViewBlz('week')" class="w-full text-left px-3 py-2 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 hover:text-slate-900 dark:hover:text-white rounded-lg  flex items-center justify-between group/item">
                            <span>Week View</span>
                            <i data-lucide="check" class="w-3.5 h-3.5 text-brand opacity-1 group-[.active]/item:opacity-100 check-icon-view" data-view="week"></i>
                        </button>
                        <button onclick="switchViewBlz('5day')" class="w-full text-left px-3 py-2 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 hover:text-slate-900 dark:hover:text-white rounded-lg  flex items-center justify-between group/item">
                            <span>5 Day View</span>
                            <i data-lucide="check" class="w-3.5 h-3.5 text-brand opacity-0 group-[.active]/item:opacity-100 check-icon-view" data-view="5day"></i>
                        </button>
                    </div>
                  </div>
                </div>


                <div class="relative group">
                  <button
                    id="filter-btnBlz"
                    class="flex items-center space-x-2 px-4 py-2 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-xl text-sm font-medium shadow-sm"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-4 h-4 text-gray-600 dark:text-slate-200"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-list-filter-plus-icon lucide-list-filter-plus"
                    >
                      <path d="M12 5H2" />
                      <path d="M6 12h12" />
                      <path d="M9 19h6" />
                      <path d="M16 5h6" />
                      <path d="M19 8V2" />
                    </svg>
                    <span>Filters</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-3 h-3 text-gray-600 dark:text-slate-200"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="lucide lucide-chevron-down-icon lucide-chevron-down"
                    >
                      <path d="m6 9 6 6 6-6" />
                    </svg>
                  </button>

                  <!-- Dropdown Content -->
                  <div
                    id="filter-dropdownBlz"
                    class="hidden absolute left-0 mt-2 w-80 bg-white dark:bg-zinc-800 border border-slate-100 dark:border-zinc-700 rounded-xl shadow-xl p-5 z-30"
                  >
                    <div class="space-y-5">
                      <div>
                        <label
                          class="text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 block"
                          >Platform</label
                        >
                        <div
                          class="grid grid-cols-1 gap-2"
                          id="platform-checksBlz"
                        >
                          <!-- Will be populated by JS for cleaner code -->
                        </div>
                      </div>
                      <div
                        class="pt-3 border-t border-slate-100 dark:border-zinc-700 flex justify-between items-center"
                      >
                        <button
                          onclick="resetFiltersBlz()"
                          class="text-xs text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white font-medium"
                        >
                          Reset All
                        </button>
                        <button
                          onclick="applyFiltersBlz()"
                          class="bg-gray-700 dark:bg-zinc-600 text-white px-4 py-2 rounded-lg text-xs font-medium hover:bg-gray-800 dark:hover:bg-zinc-500"
                        >
                          Apply Filters
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="border-l border-slate-300 dark:border-zinc-600 h-6 mx-2 hidden sm:block"
                ></div>

                <!-- Quick Status Tabs -->
                <div
                  class="flex space-x-1 bg-white dark:bg-zinc-800 p-1.5 border border-gray-200 dark:border-zinc-700 rounded-lg"
                  id="quick-tabsBlz"
                >
                  <button
                    onclick="quickFilterBlz('all')"
                    id="tab-allBlz"
                    class="px-3 py-1.5 text-xs font-medium rounded-md bg-brand/10 text-brand shadow-sm "
                  >
                    All
                  </button>
                  <button
                    onclick="quickFilterBlz('scheduled')"
                    id="tab-scheduledBlz"
                    class="px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-zinc-700 "
                  >
                    Scheduled
                  </button>
                  <button
                    onclick="quickFilterBlz('draft_approved')"
                    id="tab-draft_approvedBlz"
                    class="px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-zinc-700 "
                  >
                    Approved
                  </button>
                  <button
                    onclick="quickFilterBlz('posted')"
                    id="tab-postedBlz"
                    class="px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-zinc-700 "
                  >
                    Published
                  </button>
                </div>
              </div>
            </div>
          </div>
          <button id="scroll-left-btnBlz" class="hidden absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white/90 dark:bg-zinc-800/90 backdrop-blur shadow-lg border border-slate-200 dark:border-zinc-700 rounded-full p-3 hover:bg-white dark:hover:bg-zinc-700 text-slate-500 dark:text-slate-400 hover:text-brand  hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
          </button>
          <button id="scroll-right-btnBlz" class="hidden absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-white/90 dark:bg-zinc-800/90 backdrop-blur shadow-lg border border-slate-200 dark:border-zinc-700 rounded-full p-3 hover:bg-white dark:hover:bg-zinc-700 text-slate-500 dark:text-slate-400 hover:text-brand  hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </button>
        </div>
        <main class="flex-1 flex flex-col relative" id="calendar-mainBlz">
          
          <div id="posts-containerBlz" class="flex-1 p-6 overflow-y-auto"></div>

          <footer
            id="pagination-footerBlz"
            class="hidden bg-white dark:bg-dark-surface border-t border-slate-200 dark:border-zinc-700 p-4 flex justify-between items-center sticky bottom-0"
          >
            <span id="page-infoBlz" class="text-sm text-slate-500 dark:text-slate-400 font-medium"
              >Page 1 of 1</span
            >
            <div class="flex space-x-2">
              <button
                id="prev-pageBlz"
                class="px-3 py-2 border border-slate-200 dark:border-zinc-700 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed  flex items-center"
              >
                <i data-lucide="chevron-left" class="w-4 h-4 mr-1"></i> Prev
              </button>
              <button
                id="next-pageBlz"
                class="px-3 py-2 border border-slate-200 dark:border-zinc-700 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-zinc-700 disabled:opacity-50 disabled:cursor-not-allowed  flex items-center"
              >
                Next <i data-lucide="chevron-right" class="w-4 h-4 ml-1"></i>
              </button>
            </div>
          </footer>
        </main>
      </section>

      <section
        id="home"
        class="view-section items-center justify-center h-full"
      >
        <div class="w-full h-full">
          <div
            class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
          >
            <div class="flex items-center gap-4">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Connect
              </h1>
              <div
                class="flex items-center bg-gray-100 dark:bg-zinc-800 rounded-lg p-1"
              ></div>
            </div>
            <div class="flex items-center gap-6">
              <div class="flex items-center gap-2">
                <span class="text-[13px] font-medium text-slate-400 dark:text-white"
                  >Scheduled:</span
                >
                <span
                  class="text-[13px] font-semibold text-slate-900 dark:text-white"
                  id="statScheduled"
                  >0</span
                >
              </div>
              <div class="w-px h-3 bg-slate-200 dark:bg-zinc-700"></div>
              <div class="flex items-center gap-2">
                <span class="text-[13px] font-medium text-slate-400 dark:text-white"
                  >Total Posted:</span
                >
                <span
                  class="text-[13px] font-semibold text-slate-900 dark:text-white"
                  id="statPosted"
                  >0</span
                >
              </div>
            </div>
          </div>

          <div class="relative group p-4">
            <div
              class="flex items-center justify-center gap-3 flex-wrap p-1 pb-4 mb-2"
            >
              {% for item in nav_items %} {% if item.is_connected %}
              <button
                id="pill-{{ item.id }}"
                onclick="loadPlatform('{{ item.db_id }}', this)"
                data-svg="{{ item.svg }}"
                class="nav-pill snap-start flex items-center gap-3 pl-3 pr-5 py-2.5 rounded-full border border-slate-200 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-sm font-medium text-slate-700 dark:text-slate-300 whitespace-nowrap cursor-pointer select-none hover:bg-slate-50 dark:hover:bg-zinc-700 hover:border-slate-300 dark:hover:border-zinc-600 "
              >
                <div class="relative">
                  {% if item.profile_url %}
                  <img
                    src="{{ item.profile_url }}"
                    alt="{{ item.name }}"
                    class="w-8 h-8 rounded-full object-cover ring-2 ring-white dark:ring-zinc-700 shadow-sm"
                    onerror="this.onerror=null; this.src='https://www.gravatar.com/avatar/0?d=mp';"
                  />
                  {% else %}
                  <div
                    class="w-8 h-8 rounded-full bg-brand/10 flex items-center justify-center overflow-hidden ring-2 ring-brand/20 shadow-sm"
                  >
                    <svg
                      class="w-4 h-4 fill-current text-brand/50"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="{{ item.svg }}" />
                    </svg>
                  </div>
                  {% endif %}
                </div>

                <div class="flex flex-col items-start leading-none">
                  <span class="block text-xs opacity-60 font-normal mb-0.5"
                    >{{ item.name }}</span
                  >
                  <span>Connected</span>
                </div>
              </button>
              {% else %}
              <a
                href="{{ item.action_url }}"
                class="nav-pill snap-start flex items-center gap-3 px-4 py-2 rounded-full border border-dashed border-slate-300 dark:border-zinc-600 bg-slate-50/50 dark:bg-zinc-800/50 text-slate-400 dark:text-slate-500 text-sm font-medium whitespace-nowrap hover:text-slate-600 dark:hover:text-slate-300 hover:border-slate-400 dark:hover:border-zinc-500 hover:bg-white dark:hover:bg-zinc-800 "
              >
                <div
                  class="w-8 h-8 rounded-full bg-slate-100 dark:bg-zinc-700 flex items-center justify-center overflow-hidden"
                >
                  <svg
                    class="w-4 h-4 fill-current opacity-70"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="{{ item.svg }}" />
                  </svg>
                </div>
                <span>Connect {{ item.name }}</span>
              </a>
              {% endif %} {% endfor %}
            </div>
          </div>
          <div id="mainContent" class="min-h-[400px] p-6">
            <div
              id="loadingState"
              class="hidden h-96 flex flex-col items-center justify-center text-slate-400 dark:text-white"
            >
              <div class="relative">
                <div
                  class="w-12 h-12 border-4 border-slate-100 dark:border-zinc-700 border-t-slate-900 dark:border-t-white rounded-full animate-spin"
                ></div>
              </div>
              <p class="text-sm font-medium mt-4 animate-pulse">
                Syncing platform data...
              </p>
            </div>
            <div
              id="zeroState"
              class="hidden flex flex-col items-center justify-center py-24 bg-white dark:bg-zinc-800 rounded-2xl border border-slate-200 dark:border-zinc-700 border-dashed shadow-sm text-center px-4"
            >
              <div
                class="w-16 h-16 bg-brand/10 rounded-2xl text-brand flex items-center justify-center mb-6"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-rocket-icon lucide-rocket"
                >
                  <path
                    d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"
                  />
                  <path
                    d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"
                  />
                  <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0" />
                  <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5" />
                </svg>
              </div>
              <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-2">
                Start Your Social Journey
              </h2>
              <p class="text-slate-500 dark:text-white max-w-sm mb-8 leading-relaxed">
                Select an account above or connect a new platform to start
                scheduling posts and tracking analytics.
              </p>

              <div class="flex gap-6 mt-2">
                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6 text-black dark:text-white opacity-40 hover:opacity-100 hover:scale-110  duration-300 cursor-pointer"
                  fill="currentColor"
                  aria-label="Instagram"
                  title="Instagram"
                >
                  <path
                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6 text-black dark:text-white opacity-40 hover:opacity-100 hover:scale-110  duration-300 cursor-pointer"
                  fill="currentColor"
                  aria-label="Facebook"
                  title="Facebook"
                >
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6 text-black dark:text-white opacity-40 hover:opacity-100 hover:scale-110  duration-300 cursor-pointer"
                  fill="currentColor"
                  aria-label="LinkedIn"
                  title="LinkedIn"
                >
                  <path
                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.202 24 24 23.227 24 22.271V1.729C24 .774 23.202 0 22.222 0h.003z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6 text-black dark:text-white opacity-40 hover:opacity-100 hover:scale-110  duration-300 cursor-pointer"
                  fill="currentColor"
                  aria-label="Twitter (X)"
                  title="Twitter (X)"
                >
                  <path
                    d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6 text-black dark:text-white opacity-40 hover:opacity-100 hover:scale-110  duration-300 cursor-pointer"
                  fill="currentColor"
                  aria-label="Threads"
                  title="Threads"
                >
                  <path
                    d="M12.066 0C6.723 0 1.5 3.051 1.5 11.991c0 8.989 5.391 12.009 11.181 12.009 6.045 0 9.384-3.538 9.384-7.612 0-1.916-.915-3.588-2.578-4.706-.62-.415-1.358-.726-1.358-.726-.115-1.703-.621-3.035-1.508-3.966-.887-.932-2.128-1.422-3.591-1.422-2.069 0-3.564.632-4.698 2.253 0 0 1.344.933 1.749 1.203.602-.695 1.076-1.302 2.951-1.302 2.04 0 2.85 1.637 2.85 2.592-.553-.111-1.615-.171-2.495-.171-2.348 0-5.325 1.135-5.325 4.27 0 2.196 2.093 3.873 4.52 3.873 4.164 0 5.112-3.114 5.466-4.965.093 0 1.905 1.034 1.905 3.191 0 3.169-3.105 5.334-7.271 5.334-5.064 0-8.445-3.3-8.445-9.515 0-6.929 3.026-10.185 8.373-10.185 3.235 0 6.765.816 8.425 2.659l2.04-.53C20.325.365 14.535 0 12.066 0z m1.008 16.161c-.836 0-2.4-.435-2.4-1.752 0-.819.396-2.124 3.456-2.124 1.214 0 1.933.098 2.292.242-.247 3.211-1.818 3.634-3.348 3.634z"
                  ></path>
                </svg>
              </div>
            </div>
            <div id="dataState" class="hidden fade-in">
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-2">
                  <h3 class="text-lg font-bold text-slate-900 dark:text-white">Recent Tasks</h3>
                </div>
                <div class="flex items-center gap-3">
                  <div class="relative group">
                    <select
                      id="filterSelect"
                      class="appearance-none bg-white dark:bg-zinc-800 border border-slate-200 dark:border-zinc-700 px-5 pr-8 py-2.5 rounded-2xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:border-slate-300 dark:hover:border-zinc-600 hover:text-slate-900 dark:hover:text-white focus:outline-none focus:ring-4 focus:ring-slate-100 dark:focus:ring-zinc-700 focus:border-slate-400 dark:focus:border-zinc-500  cursor-pointer"
                    >
                      <option value="all">All Tasks</option>
                      <option value="scheduled">Scheduled</option>
                      <option value="posted">Posted</option>
                      <option value="failed">Failed</option>
                    </select>
                    <div
                      class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-300 "
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-4 w-4"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2.5"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M19 9l-7 7-7-7"
                        />
                      </svg>
                    </div>
                  </div>
                  <a
                    id="NewTskCont"
                    class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300 font-medium hover:text-slate-900 dark:hover:text-white bg-white dark:bg-zinc-800 border border-slate-200 dark:border-zinc-700 px-4 py-2.5 rounded-2xl hover:border-slate-300 dark:hover:border-zinc-600 "
                  >
                    <i data-lucide="plus" class="w-3 h-3"></i>
                    New Task
                  </a>
                </div>
              </div>
              <div id="taskList" class="grid gap-4"></div>
            </div>
          </div>
        </div>
        <div
          class="absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-md rounded-full shadow-card p-1.5 flex items-center gap-1 z-30 worm-border-animate"
        >
          <button
            id="CrtNwInBtm"
            class="flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-200 text-sm font-medium "
          >
            <i data-lucide="sparkles" class="w-4 h-4 text-brand"></i>
            Create New
          </button>

          <div class="w-px h-5 bg-gray-200 dark:bg-zinc-600 mx-1"></div>

          <button
            onclick="switchView('poster', null)"
            class="flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-200 text-sm font-medium "
          >
            <i data-lucide="wand-2" class="w-4 h-4 text-purple-500"></i>
            Generate Post
          </button>
        </div>
      </section>

      <section
        id="poster"
        class="view-section items-center justify-center h-full"
      >
        <div class="w-full h-full">
          <div
            class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
          >
            <div class="flex items-center gap-4">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Generate a post
              </h1>
              <div
                class="flex items-center bg-gray-100 dark:bg-zinc-800 rounded-lg p-1"
              ></div>
            </div>
          </div>
          <section
            class="max-w-[65rem] mx-auto px-4 sm:p-6 lg:p-8"
            id="Section1"
          >
            <div
              id="OutergenerateForm"
              class="bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-700 rounded-3xl p-1 hover:shadow-sm  duration-300"
            >
              <div class="px-8 pt-6 mb-2">
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Content Creator
                </h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                  Describe your idea and let AI craft the perfect post
                </p>
              </div>

              <form id="generateForm" class="p-6 sm:p-8 space-y-6">
                <div class="relative group">
                  <div
                    class="absolute top-4 left-4 flex items-center pointer-events-none text-gray-400 dark:text-gray-500 group-focus-within:text-gray-900 dark:group-focus-within:text-white "
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M12 2v8"></path>
                      <path d="m4.93 4.93 2.83 2.83"></path>
                      <path d="M2 12h8"></path>
                      <path d="m4.93 19.07 2.83-2.83"></path>
                      <path d="M12 22v-8"></path>
                      <path d="m19.07 19.07-2.83-2.83"></path>
                      <path d="M22 12h-8"></path>
                      <path d="m19.07 4.93-2.83 2.83"></path>
                    </svg>
                  </div>
                  <textarea
                    name="prompt"
                    rows="3"
                    required
                    id="animatedPlaceholder"
                    class="block w-full pl-12 pr-4 py-4 rounded-2xl border-gray-200 dark:border-zinc-700 bg-gray-50 dark:bg-zinc-800/50 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:bg-white dark:focus:bg-zinc-800 focus:ring-4 focus:ring-gray-900/5 dark:focus:ring-white/10 focus:border-gray-900 dark:focus:border-zinc-500  text-base outline-none border resize-none"
                    placeholder="What's on your mind?"
                  ></textarea>
                </div>

                <div
                  class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6"
                >
                  <div class="flex flex-wrap items-center gap-3">
                    <label
                      for="imgToggle"
                      title="Generate image prompt"
                      class="flex items-center gap-3 px-4 py-2 bg-gray-50 dark:bg-zinc-800/50 border border-gray-200 dark:border-zinc-700 rounded-full cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-700  select-none"
                    >
                      <span
                        class="text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"
                        >Image</span
                      >
                      <div class="relative">
                        <input
                          type="checkbox"
                          id="imgToggle"
                          name="generate_image"
                          value="yes"
                          class="sr-only peer"
                          checked
                        />
                        <div
                          class="w-10 h-5 bg-gray-300 dark:bg-gray-500 rounded-full transition peer-checked:bg-dark-surface dark:peer-checked:bg-gray-100"
                        ></div>
                        <div
                          class="absolute top-0.5 left-0.5 w-4 h-4 dark:bg-zinc-900 bg-white rounded-full transition peer-checked:translate-x-5 shadow-sm"
                        ></div>
                      </div>
                    </label>

                    <div
                      id="imageStyleContainer"
                      class="peer-checked:flex items-center"
                    >
                      <select
                        name="image_style"
                        id="imageStyle"
                        class="bg-white dark:bg-zinc-800/50 border border-gray-200 dark:border-zinc-700 rounded-full py-2 px-4 text-xs font-semibold text-gray-700 dark:text-gray-200 outline-none focus:ring-2 focus:ring-gray-900/5 dark:focus:ring-white/10 focus:border-gray-900 dark:focus:border-zinc-500  appearance-none cursor-pointer"
                      >
                        <option value="realistic">Realistic</option>
                        <option value="cinematic">Cinematic</option>
                        <option value="cartoon">Cartoon</option>
                        <option value="illustration">Illustration</option>
                        <option value="digital_art">Digital Art</option>
                        <option value="anime">Anime</option>
                        <option value="minimalist">Minimalist</option>
                        <option value="vintage">Vintage</option>
                      </select>
                    </div>

                    <div
                      id="numDraftsCount"
                      class="flex items-center bg-gray-50 dark:bg-zinc-800/50 border border-gray-200 dark:border-zinc-700 rounded-full px-2 py-1"
                    >
                      <button
                        type="button"
                        id="prevDraftCountBtn"
                        class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white p-1.5 transition disabled:opacity-30"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="m15 18-6-6 6-6" />
                        </svg>
                      </button>
                      <span
                        id="currentDraftText"
                        class="text-xs font-bold text-gray-900 dark:text-white px-3 w-8 text-center"
                        >1</span
                      >
                      <button
                        type="button"
                        id="nextDraftCountBtn"
                        class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white p-1.5 transition disabled:opacity-30"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="m9 18 6-6-6-6" />
                        </svg>
                      </button>
                      <input
                        type="hidden"
                        name="num_drafts"
                        id="hiddennumDraftsCount"
                        value="1"
                      />
                    </div>

                    <div
                      id="useCaseCarouselDrf"
                      class="flex items-center bg-gray-900 dark:bg-zinc-700 text-white border border-gray-900 dark:border-zinc-600 rounded-full px-2 py-1 shadow-md shadow-gray-900/10"
                    >
                      <button
                        type="button"
                        id="prevCaseBtnDrf"
                        class="text-gray-400 hover:text-white p-1.5 transition disabled:opacity-30"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="m15 18-6-6 6-6" />
                        </svg>
                      </button>
                      <span
                        id="currentCaseTextDrf"
                        class="text-xs font-semibold uppercase tracking-tight px-3 min-w-[100px] text-center"
                        >Custom Idea</span
                      >
                      <button
                        type="button"
                        id="nextCaseBtnDrf"
                        class="text-gray-400 hover:text-white p-1.5 transition disabled:opacity-30"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="14"
                          height="14"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="m9 18 6-6-6-6" />
                        </svg>
                      </button>
                    </div>
                  </div>

                  <button
                    type="submit"
                    id="genBtnBtn"
                    class="w-full sm:w-auto flex justify-center items-center py-3 px-10 border border-transparent rounded-xl shadow-sm shadow-gray-900/10 text-sm font-semibold text-white bg-gray-900 dark:bg-white dark:text-gray-900 hover:bg-black dark:hover:bg-gray-100 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 dark:focus:ring-white  active:scale-[0.96] disabled:opacity-70 disabled:cursor-not-allowed"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="mr-2"
                    >
                      <path d="M12 3v1"></path>
                      <path d="M12 20v1"></path>
                      <path d="M3 12h1"></path>
                      <path d="M20 12h1"></path>
                      <path d="m18.364 5.636-.707.707"></path>
                      <path d="m6.343 17.657-.707.707"></path>
                      <path d="m5.636 5.636.707.707"></path>
                      <path d="m17.657 17.657.707.707"></path>
                    </svg>
                    <span id="genBtnSpan">Generate Draft</span>
                  </button>
                </div>
              </form>
            </div>

            <script>
              (function () {
                const draftOptions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
                let currentDraftIndex = 0;

                const currentDraftText =
                  document.getElementById("currentDraftText");
                const hiddennumDraftsCount = document.getElementById(
                  "hiddennumDraftsCount",
                );
                const prevDraftCountBtn =
                  document.getElementById("prevDraftCountBtn");
                const nextDraftCountBtn =
                  document.getElementById("nextDraftCountBtn");

                function updateDraftDisplay() {
                  currentDraftText.textContent =
                    draftOptions[currentDraftIndex];
                  hiddennumDraftsCount.value = draftOptions[currentDraftIndex];

                  prevDraftCountBtn.disabled = currentDraftIndex === 0;
                  nextDraftCountBtn.disabled =
                    currentDraftIndex === draftOptions.length - 1;
                }

                prevDraftCountBtn.addEventListener("click", (e) => {
                  if (currentDraftIndex > 0) {
                    currentDraftIndex--;
                    updateDraftDisplay();
                  }
                });

                nextDraftCountBtn.addEventListener("click", (e) => {
                  if (currentDraftIndex < draftOptions.length - 1) {
                    currentDraftIndex++;
                    updateDraftDisplay();
                  }
                });

                updateDraftDisplay(); // Initialize
              })();
            </script>

            <div class="flex justify-center mt-6">
              <button
                type="button"
                id="createBtnMnl"
                title="Draft a post from scratch without AI generation"
                class="text-sm font-medium text-slate-700 dark:text-slate-300 hover:text-gray-900 dark:hover:text-white transition duration-200 px-4 py-2 rounded-xl border border-transparent hover:border-slate-200 dark:hover:border-slate-700"
              >
                Prefer to draft a post manually?
              </button>
            </div>

            <div id="loading" class="hidden mt-8 text-center animate-pulse">
              <div
                class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-gray-600 dark:text-gray-300 transition ease-in-out duration-150 cursor-not-allowed"
              >
                <svg
                  class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600 dark:text-gray-400"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Crafting your post...
              </div>
            </div>

            <div
              id="preview"
              class="hidden mt-8 w-full bg-white dark:bg-zinc-900 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden"
            ></div>
          </section>

          <section class="min-h-[20rem] p-6 sm:p-8">
            <div
              class="flex flex-row items-center justify-between mb-8 gap-4 px-2"
            >
              <div class="flex items-center gap-4">
                <h2
                  class="text-2xl sm:text-2xl font-semibold tracking-tight text-gray-900 dark:text-white"
                >
                  Recent Drafts
                </h2>
              </div>
              <div class="flex items-center gap-4">
                <div
                  class="flex items-center gap-2 relative p-3 rounded-2xl bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 hover:border-gray-900 dark:hover:border-zinc-500 hover:shadow-xl hover:shadow-gray-900/5 dark:hover:shadow-black/20  duration-500 active:scale-90"
                >
                  <span
                    id="draftCount"
                    class="text-center text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest"
                    >0 Drafts</span
                  >
                </div>
                <button
                  onclick="loadDrafts()"
                  class="group relative p-3 rounded-2xl bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 hover:border-gray-900 dark:hover:border-zinc-500 hover:shadow-xl hover:shadow-gray-900/5 dark:hover:shadow-black/20  duration-500 active:scale-90"
                  title="Refresh Drafts"
                >
                  <svg
                    class="w-5 h-5 text-gray-500 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white transition-transform duration-700 ease-in-out group-hover:rotate-180"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"
                    ></path>
                    <path d="M21 3v5h-5"></path>
                  </svg>

                  <span
                    class="absolute -top-10 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-[10px] rounded flex opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap font-bold"
                  >
                    REFRESH
                  </span>
                </button>
              </div>
            </div>

            <div
              id="draftsGrid"
              class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
            >
              <div
                class="group relative flex flex-col bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 animate-pulse"
              >
                <div
                  class="relative h-56 sm:h-64 w-full bg-gray-200 dark:bg-slate-700 skeleton"
                ></div>
                <div class="flex flex-1 flex-col justify-between p-5 sm:p-6">
                  <div>
                    <div
                      class="h-5 bg-gray-200 dark:bg-slate-700 rounded-md w-11/12 mb-3 skeleton"
                    ></div>
                    <div
                      class="h-5 bg-gray-200 dark:bg-slate-700 rounded-md w-4/6 skeleton"
                    ></div>
                  </div>
                  <div
                    class="flex items-center justify-between mt-4 pt-4 border-t border-slate-100 dark:border-slate-700"
                  >
                    <div
                      class="h-4 bg-gray-200 dark:bg-slate-700 rounded w-20 skeleton"
                    ></div>
                    <div class="flex items-center gap-1.5">
                      <div
                        class="h-9 w-20 bg-gray-200 dark:bg-slate-700 rounded-xl skeleton"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="group relative flex flex-col bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 animate-pulse"
              >
                <div
                  class="relative h-56 sm:h-64 w-full bg-gray-200 dark:bg-slate-700 skeleton"
                ></div>
                <div class="flex flex-1 flex-col justify-between p-5 sm:p-6">
                  <div>
                    <div
                      class="h-5 bg-gray-200 dark:bg-slate-700 rounded-md w-11/12 mb-3 skeleton"
                    ></div>
                    <div
                      class="h-5 bg-gray-200 dark:bg-slate-700 rounded-md w-4/6 skeleton"
                    ></div>
                  </div>
                  <div
                    class="flex items-center justify-between mt-4 pt-4 border-t border-slate-100 dark:border-slate-700"
                  >
                    <div
                      class="h-4 bg-gray-200 dark:bg-slate-700 rounded w-20 skeleton"
                    ></div>
                    <div class="flex items-center gap-1.5">
                      <div
                        class="h-9 w-20 bg-gray-200 dark:bg-slate-700 rounded-xl skeleton"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="group relative flex flex-col bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 animate-pulse"
              >
                <div
                  class="relative h-56 sm:h-64 w-full bg-gray-200 dark:bg-slate-700 skeleton"
                ></div>
                <div class="flex flex-1 flex-col justify-between p-5 sm:p-6">
                  <div>
                    <div
                      class="h-5 bg-gray-200 dark:bg-slate-700 rounded-md w-11/12 mb-3 skeleton"
                    ></div>
                    <div
                      class="h-5 bg-gray-200 dark:bg-slate-700 rounded-md w-4/6 skeleton"
                    ></div>
                  </div>
                  <div
                    class="flex items-center justify-between mt-4 pt-4 border-t border-slate-100 dark:border-slate-700"
                  >
                    <div
                      class="h-4 bg-gray-200 dark:bg-slate-700 rounded w-20 skeleton"
                    ></div>
                    <div class="flex items-center gap-1.5">
                      <div
                        class="h-9 w-20 bg-gray-200 dark:bg-slate-700 rounded-xl skeleton"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              id="noDrafts"
              class="hidden flex flex-col items-center justify-center py-24 bg-white dark:bg-zinc-900 rounded-2xl border border-slate-200 dark:border-slate-700 border-dashed shadow-sm text-center px-4"
            >
              <div
                class="w-16 h-16 bg-brand/10 text-brand rounded-2xl flex items-center justify-center mb-6 -rotate-3"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-library-big-icon lucide-library-big"
                >
                  <rect width="8" height="18" x="3" y="3" rx="1" />
                  <path d="M7 3v18" />
                  <path
                    d="M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z"
                  />
                </svg>
              </div>

              <!-- Text -->
              <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-2">
                No Drafts Yet
              </h2>
              <p
                class="text-slate-500 dark:text-slate-400 max-w-sm mb-8 leading-relaxed"
              >
                Drafts you create will appear here. Start by generating a post
                above and fine-tune it before scheduling.
              </p>

              <div class="flex gap-6 mt-2 opacity-40 text-gray-900 dark:text-gray-100" >
                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Instagram"
                  title="Instagram"
                  
                >
                  <path
                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Facebook"
                  title="Facebook"
                  
                >
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="LinkedIn"
                  title="LinkedIn"
                  
                >
                  <path
                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.202 24 24 23.227 24 22.271V1.729C24 .774 23.202 0 22.222 0h.003z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Twitter (X)"
                  title="Twitter (X)"
                  
                >
                  <path
                    d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Threads"
                  title="Threads"
                  
                >
                  <path
                    d="M12.066 0C6.723 0 1.5 3.051 1.5 11.991c0 8.989 5.391 12.009 11.181 12.009 6.045 0 9.384-3.538 9.384-7.612 0-1.916-.915-3.588-2.578-4.706-.62-.415-1.358-.726-1.358-.726-.115-1.703-.621-3.035-1.508-3.966-.887-.932-2.128-1.422-3.591-1.422-2.069 0-3.564.632-4.698 2.253 0 0 1.344.933 1.749 1.203.602-.695 1.076-1.302 2.951-1.302 2.04 0 2.85 1.637 2.85 2.592-.553-.111-1.615-.171-2.495-.171-2.348 0-5.325 1.135-5.325 4.27 0 2.196 2.093 3.873 4.52 3.873 4.164 0 5.112-3.114 5.466-4.965.093 0 1.905 1.034 1.905 3.191 0 3.169-3.105 5.334-7.271 5.334-5.064 0-8.445-3.3-8.445-9.515 0-6.929 3.026-10.185 8.373-10.185 3.235 0 6.765.816 8.425 2.659l2.04-.53C20.325.365 14.535 0 12.066 0z m1.008 16.161c-.836 0-2.4-.435-2.4-1.752 0-.819.396-2.124 3.456-2.124 1.214 0 1.933.098 2.292.242-.247 3.211-1.818 3.634-3.348 3.634z"
                  ></path>
                </svg>
              </div>
            </div>

            <div
              id="PaginBtns"
              class="flex flex-row sm:flex-row justify-center items-center mt-10 gap-4 hidden"
            >
              <button
                id="prevDrafts"
                class="w-full sm:w-auto flex items-center justify-center px-6 py-3 text-sm font-semibold text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-xl shadow-md hover:bg-gray-50 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200"
                disabled
              >
                <svg
                  class="w-5 h-5 mr-2"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M11.7071 4.29289C12.0976 4.68342 12.0976 5.31658 11.7071 5.70711L6.41421 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H6.41421L11.7071 18.2929C12.0976 18.6834 12.0976 19.3166 11.7071 19.7071C11.3166 20.0976 10.6834 20.0976 10.2929 19.7071L3.29289 12.7071C3.10536 12.5196 3 12.2652 3 12C3 11.7348 3.10536 11.4804 3.29289 11.2929L10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289Z"
                    fill="currentColor"
                  />
                </svg>
                Newer Drafts
              </button>

              <button
                id="nextDrafts"
                class="w-full sm:w-auto flex items-center justify-center px-6 py-3 text-sm font-semibold text-white bg-gray-800 dark:bg-slate-600 rounded-xl shadow-md hover:bg-gray-900 dark:hover:bg-slate-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200"
              >
                Older Drafts
                <svg
                  class="w-5 h-5 ml-2"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M12.2929 4.29289C12.6834 3.90237 13.3166 3.90237 13.7071 4.29289L20.7071 11.2929C21.0976 11.6834 21.0976 12.3166 20.7071 12.7071L13.7071 19.7071C13.3166 20.0976 12.6834 20.0976 12.2929 19.7071C11.9024 19.3166 11.9024 18.6834 12.2929 18.2929L17.5858 13H4C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11H17.5858L12.2929 5.70711C11.9024 5.31658 11.9024 4.68342 12.2929 4.29289Z"
                    fill="currentColor"
                  />
                </svg>
              </button>
            </div>
          </section>
        </div>
      </section>

      <section
        id="content"
        class="view-section items-center justify-center h-full"
      >
        <div class="w-full h-full">
          <div
            class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
          >
            <div class="flex items-center gap-4">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Media Snag
              </h1>
              <div
                class="flex items-center bg-gray-100 dark:bg-zinc-800 rounded-full p-1"
              >
                <button 
                  onclick="switchContentTab('download')" 
                  id="tab-download"
                  class="content-tab-btn px-4 py-1.5 text-sm font-medium rounded-full  bg-white dark:bg-zinc-700 text-gray-900 dark:text-white shadow-sm"
                >
                  Download
                </button>
                <button 
                  onclick="switchContentTab('library')" 
                  id="tab-library"
                  class="content-tab-btn px-4 py-1.5 text-sm font-medium rounded-full  text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"
                >
                  My Downloads
                </button>
              </div>
            </div>
            <button 
              onclick="refreshDownloadsList()" 
              id="refresh-downloads-btn"
              class="hidden items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 rounded-lg "
            >
              <i data-lucide="refresh-cw" class="w-4 h-4"></i>
              <span>Refresh</span>
            </button>
          </div>

          <!-- Download Tab Content -->
          <div id="content-tab-download" class="content-tab-panel">
            <section class="max-w-4xl mx-auto pt-10">
              <div class="text-center mb-8">
                <h1
                  class="text-3xl md:text-4xl font-semibold tracking-tight text-slate-900 dark:text-white mb-3"
                >
                  What video would you like to download?
                </h1>
                <p class="text-gray-600 dark:text-slate-400 text-lg">
                  Paste a link from YouTube, Instagram, or TikTok, and we'll
                  handle the rest.
                </p>
              </div>

              <div class="w-full max-w-4xl">
                <form id="downloadFormYtb" class="relative group">
                  <div
                    class="bg-white dark:bg-dark-surface dark:border-dark-border border-2 border-brand/40 rounded-3xl shadow-card p-2 transition-shadow duration-300 hover:shadow-lg hover:border-brand/50"
                  >
                    <div class="p-4  rounded-2xl mb-2">
                      <textarea
                        id="urlYtb"
                        required
                        placeholder="Paste your video link here..."
                        class="w-full h-24 dark:bg-zinc-800 dark:text-gray-200 bg-brand/5 rounded-2xl border-none focus:ring-0 text-lg text-slate-600 placeholder-slate-400 resize-none p-2"
                      ></textarea>
                    </div>

                    <!-- Bottom Controls Bar -->
                    <div
                      class="flex flex-col md:flex-row items-center justify-between px-4 pb-2 gap-4"
                    >
                      <div class="flex items-center gap-3">
                        <label
                          for="audioOnlyYtb"
                          title="Click to generate image prompt"
                          class="flex items-center space-x-2 p-[7px] text-sm font-medium transition duration-150 cursor-pointer select-none"
                        >
                          <span
                            class="text-sm font-medium text-slate-700 dark:text-slate-300"
                          >
                            Audio Only
                          </span>
                          <div class="relative ml-3">
                            <input
                              type="checkbox"
                              id="audioOnlyYtb"
                              name="audioOnly"
                              value="no"
                              class="sr-only peer"
                            />
                            <div
                              class="w-11 h-6 bg-brand/10 rounded-full transition peer-checked:bg-brand/40 dark:bg-slate-700"
                            ></div>
                            <div
                              class="absolute top-0.5 left-0.5 w-5 h-5 bg-brand/80 rounded-full transition peer-checked:translate-x-5 shadow"
                            ></div>
                          </div>
                        </label>

                        <div class="hidden md:block w-px h-6 bg-slate-200"></div>

                        <div class="relative w-full md:w-auto">
                          <select
                            id="qualityYtb"
                            class="appearance-none bg-white border-2 border-brand/10 text-slate-700 text-sm font-medium py-2 pl-4 pr-10 rounded-full cursor-pointer hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-200  w-full md:w-auto"
                          >
                            <option value="best">Best Quality</option>
                            <option value="1080p">1080p HD</option>
                            <option value="720p">720p</option>
                            <option value="4k">4K Ultra</option>
                          </select>
                          <div
                            class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-slate-500"
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 256 256"
                              fill="currentColor"
                              class="w-4 h-4"
                            >
                              <path
                                d="m212.24 100.24-80 80a6 6 0 0 1-8.48 0l-80-80a6 6 0 0 1 8.48-8.48L128 167.51l75.76-75.75a6 6 0 0 1 8.48 8.48Z"
                              />
                            </svg>
                          </div>
                        </div>
                      </div>

                      <button
                        type="submit"
                        id="submitBtnYtb"
                        class="w-full md:w-auto text-sm bg-brand/10 hover:bg-brand/20 text-brand px-7 py-2.5 rounded-2xl font-semibold flex items-center justify-center gap-2 transition-transform active:scale-95 shadow-xs shadow-brand"
                      >
                        <i data-lucide="arrow-down-to-line" class="w-5 h-5"></i>
                        <span>Download</span>
                      </button>
                    </div>
                  </div>
                </form>

                <div class="mt-8 space-y-4">
                  <div
                    id="statusYtb"
                    class="hidden p-4 rounded-xl text-center text-sm font-medium animate-fade-in"
                  ></div>
                  <div id="downloadLinkYtb" class="flex justify-center"></div>
                </div>

                <div class="mt-12 text-center">
                  <div class="inline-flex gap-6 text-slate-400">
                    <i
                      class="ph ph-youtube-logo text-2xl hover:text-red-500 transition"
                    ></i>
                    <i
                      class="ph ph-instagram-logo text-2xl hover:text-pink-500 transition"
                    ></i>
                    <i
                      class="ph ph-tiktok-logo text-2xl hover:text-black transition"
                    ></i>
                    <i
                      class="ph ph-twitter-logo text-2xl hover:text-blue-400 transition"
                    ></i>
                  </div>
                </div>
              </div>
            </section>
          </div>

          <!-- Library Tab Content - Downloaded Files -->
          <div id="content-tab-library" class="content-tab-panel hidden">
            <section class="max-w-6xl mx-auto px-6 py-8">
              <!-- Header Stats -->
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-4">
                  <div class="flex items-center gap-2 text-sm text-gray-500">
                    <i data-lucide="folder" class="w-4 h-4"></i>
                    <span id="downloads-count">0 files</span>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <button 
                    onclick="toggleDownloadsView('grid')"
                    id="view-grid-btn"
                    class="p-2 rounded-lg bg-gray-100 text-gray-700 "
                  >
                    <i data-lucide="grid-3x3" class="w-4 h-4"></i>
                  </button>
                  <button 
                    onclick="toggleDownloadsView('list')"
                    id="view-list-btn"
                    class="p-2 rounded-lg text-gray-400 hover:bg-gray-100 "
                  >
                    <i data-lucide="list" class="w-4 h-4"></i>
                  </button>
                </div>
              </div>

              <!-- Empty State -->
              <div id="downloads-empty" class="hidden text-center py-20">
                <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-brand/10 flex items-center justify-center">
                  <i data-lucide="folder-open" class="w-8 h-8 text-brand"></i>
                </div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2">No downloads yet</h3>
                <p class="text-gray-500 mb-6 max-w-sm mx-auto">Start downloading videos and they'll appear here for easy access.</p>
                <button 
                  onclick="switchContentTab('download')"
                  class="inline-flex items-center gap-2 px-5 py-2.5 bg-gray-900 text-white rounded-full font-medium hover:bg-gray-800 "
                >
                  
                  Download Your First Video
                </button>
              </div>

              <!-- Loading State -->
              <div id="downloads-loading" class="hidden">
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">

                <div class="bg-white dark:bg-dark-surface rounded-2xl border border-gray-200 dark:border-gray-800 overflow-hidden">
                  <div class="aspect-video skeleton dark:bg-gray-800"></div>
                  <div class="p-4 space-y-3">
                    <div class="h-4 skeleton rounded w-3/4 dark:bg-gray-700"></div>
                    <div class="h-3 skeleton rounded w-1/2 dark:bg-gray-700"></div>
                  </div>
                </div>

                <div class="bg-white dark:bg-dark-surface rounded-2xl border border-gray-200 dark:border-gray-800 overflow-hidden">
                  <div class="aspect-video skeleton dark:bg-gray-800"></div>
                  <div class="p-4 space-y-3">
                    <div class="h-4 skeleton rounded w-3/4 dark:bg-gray-700"></div>
                    <div class="h-3 skeleton rounded w-1/2 dark:bg-gray-700"></div>
                  </div>
                </div>

                <div class="bg-white dark:bg-dark-surface rounded-2xl border border-gray-200 dark:border-gray-800 overflow-hidden">
                  <div class="aspect-video skeleton dark:bg-gray-800"></div>
                  <div class="p-4 space-y-3">
                    <div class="h-4 skeleton rounded w-3/4 dark:bg-gray-700"></div>
                    <div class="h-3 skeleton rounded w-1/2 dark:bg-gray-700"></div>
                  </div>
                </div>

                <div class="bg-white dark:bg-dark-surface rounded-2xl border border-gray-200 dark:border-gray-800 overflow-hidden">
                  <div class="aspect-video skeleton dark:bg-gray-800"></div>
                  <div class="p-4 space-y-3">
                    <div class="h-4 skeleton rounded w-3/4 dark:bg-gray-700"></div>
                    <div class="h-3 skeleton rounded w-1/2 dark:bg-gray-700"></div>
                  </div>
                </div>

              </div>
              </div>

              <!-- Grid View -->
              <div id="downloads-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                <!-- Files will be rendered here -->
              </div>

              <!-- List View -->
              <div id="downloads-list" class="hidden space-y-2">
                <!-- Files will be rendered here -->
              </div>
            </section>
          </div>

        </div>
      </section>

      <section
        id="research"
        class="view-section items-center justify-center h-full"
      >
        <div class="w-full h-full">
          <div
            class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
          >
            <div class="flex items-center gap-4">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Research
              </h1>
              <div
                class="flex items-center bg-gray-100 dark:bg-dark-surface rounded-lg p-1"
              ></div>
            </div>
          </div>
          <section class="max-w-4xl mx-auto w-full pt-10">
            <div class="text-center mb-8">
              <h1
                class="text-2xl sm:text-3xl md:text-4xl font-semibold tracking-tight text-slate-900 dark:text-white mb-3"
              >
                Product Intelligence
              </h1>
              <p
                class="text-gray-600 dark:text-slate-400 text-base sm:text-lg px-4 sm:px-0"
              >
                Enter a product and company to stream real-time sentiment
                analysis and review summaries.
              </p>
            </div>

            <div
              class="bg-white dark:bg-dark-surface rounded-3xl border-2 border-brand/40 dark:border-slate-700 p-4 sm:p-5 transition-shadow duration-300 hover:shadow-[0_8px_30px_rgb(0,0,0,0.08)] dark:hover:shadow-[0_8px_30px_rgb(255,255,255,0.05)]"
            >
              <form id="reviewFormRes" class="relative">
                <div class="relative group">
                  <div
                    class="absolute inset-y-0 left-4 flex items-center pointer-events-none"
                  >
                    <svg
                      class="w-5 h-5 text-slate-300 dark:text-slate-500 group-focus-within:text-gray-500 dark:group-focus-within:text-slate-300 "
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                      ></path>
                    </svg>
                  </div>
                  <input
                    type="text"
                    id="productCompanyInputRes"
                    placeholder="e.g., Whatai developed by AI Firelab"
                    class="w-full pl-12 pr-4 py-5 sm:py-6 bg-transparent text-lg sm:text-xl text-slate-800 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 outline-none border border-brand/30 dark:border-slate-600 rounded-2xl focus:border-brand/60 dark:focus:border-slate-500"
                    autocomplete="off"
                    required
                  />
                </div>

                <div id="customFilterContainer" class="hidden p-4">
                  <input
                    type="text"
                    id="customFilterInput"
                    placeholder="Filter criteria (e.g., 'Focus on battery life', 'Ignore shipping complaints')"
                    class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-600 text-slate-700 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500"
                  />
                </div>

                <div
                  class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 px-4 pb-4 pt-2 border-t border-slate-100 dark:border-slate-700 mt-4"
                >
                  <div
                    class="flex flex-col sm:flex-row items-start sm:items-center gap-4 w-full sm:w-auto"
                  >
                    <!-- Deep Search Toggle -->
                    <label class="flex items-center cursor-pointer group">
                      <div class="relative">
                        <input
                          type="checkbox"
                          id="deepSearchToggle"
                          class="sr-only peer"
                        />
                        <div
                          class="w-9 h-5 bg-slate-200 dark:bg-slate-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 dark:after:border-slate-500 after:border after:rounded-full after:h-4 after:w-4 peer-checked:bg-slate-900 dark:peer-checked:bg-slate-400"
                        ></div>
                      </div>
                      <span
                        class="ml-2 text-sm font-medium text-slate-500 dark:text-slate-400 group-hover:text-slate-700 dark:group-hover:text-slate-200 "
                        >Deep Search</span
                      >
                    </label>

                    <div
                      class="hidden sm:block h-4 w-px bg-slate-200 dark:bg-slate-600"
                    ></div>

                    <!-- Dropdown -->
                    <div class="relative group w-full sm:w-auto">
                      <button
                        type="button"
                        id="dropdown-trigger"
                        class="w-full sm:w-[240px] flex items-center rounded-2xl justify-between bg-white dark:bg-zinc-900 border border-slate-200 dark:border-slate-600 px-3 py-2.5 text-left duration-200 focus:outline-none focus:ring-2 focus:ring-slate-300 dark:focus:ring-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"
                      >
                        <div class="flex items-center gap-3">
                          <div
                            id="selected-icon-container"
                            class="text-slate-500 dark:text-slate-400"
                          ></div>
                          <span
                            id="selected-labelFr"
                            class="text-sm sm:text-md text-slate-500 dark:text-slate-300"
                            >Product Overview</span
                          >
                        </div>
                        <div
                          id="chevronFr"
                          class="text-gray-400 dark:text-slate-400 ml-2 transition-transform duration-300"
                        >
                          <i data-lucide="chevron-down" class="w-5 h-5"></i>
                        </div>
                      </button>
                      <div
                        id="dropdown-menu"
                        class="absolute left-0 right-0 sm:right-auto mt-2 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-slate-600 rounded-2xl shadow-xl overflow-hidden z-20 hidden opacity-0 transform scale-95  duration-200 origin-top w-full sm:w-[240px]"
                      >
                        <ul id="menu-listFr" class="p-1.5 space-y-1"></ul>
                      </div>
                    </div>

                    <div
                      class="hidden sm:block h-4 w-px bg-slate-200 dark:bg-slate-600"
                    ></div>

                    <!-- Custom Filters Button -->
                    <button
                      type="button"
                      id="customFilterToggle"
                      class="flex items-center text-sm font-medium text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 "
                    >
                      <svg
                        class="w-4 h-4 mr-1.5 dark:text-slate-400"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                        ></path>
                      </svg>
                      Custom Filters
                    </button>
                  </div>

                  <!-- Submit Button -->
                  <button
                    type="submit"
                    id="submitButtonRes"
                    class="w-full sm:w-auto flex items-center justify-center px-6 py-3 bg-brand/10 dark:bg-white text-brand dark:text-gray-900 text-sm font-medium rounded-xl hover:bg-brand/20 dark:hover:bg-slate-600 focus:ring-4 focus:ring-slate-300 dark:focus:ring-slate-600  transform active:scale-95 shadow-xs shadow-slate-900/10 dark:shadow-slate-700/20"
                  >
                    <svg
                      class="w-4 h-4 mr-2"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z"
                      ></path>
                    </svg>
                    Generate Report
                  </button>
                </div>
              </form>
            </div>

            <div
              id="loadingIndicatorRes"
              class="hidden mt-8 text-center fade-in"
            >
              <div class="flex items-center justify-center space-x-2">
                <div
                  class="w-2 h-2 bg-gray-800 dark:bg-gray-400 rounded-full animate-bounce"
                  style="animation-delay: 0s"
                ></div>
                <div
                  class="w-2 h-2 bg-gray-800 dark:bg-gray-400 rounded-full animate-bounce"
                  style="animation-delay: 0.2s"
                ></div>
                <div
                  class="w-2 h-2 bg-gray-800 dark:bg-gray-400 rounded-full animate-bounce"
                  style="animation-delay: 0.4s"
                ></div>
              </div>
              <p
                class="mt-3 text-sm text-slate-400 dark:text-slate-500 font-medium tracking-wide uppercase"
              >
                Analysing Sentiment
              </p>
            </div>

            <div
              id="errorMessageRes"
              class="hidden mt-6 mx-auto max-w-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-xl text-sm text-center fade-in"
            ></div>

            <div
              id="clarificationContainer"
              class="hidden mt-6 mx-auto max-w-lg bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-slate-700 text-gray-800 dark:text-slate-200 px-4 py-4 rounded-2xl fade-in"
            >
              <p
                id="clarificationQuestion"
                class="mb-3 text-sm font-medium text-gray-800 dark:text-slate-200"
              ></p>
              <input
                type="text"
                id="clarificationInput"
                placeholder="e.g., 'Whtai is a Whatsapp group automation tool'"
                class="w-full px-4 py-3 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-slate-500 mb-3 text-gray-700 dark:text-slate-200 placeholder-gray-400 dark:placeholder-slate-500"
              />
              <button
                id="clarificationSubmit"
                class="w-full px-4 py-3 bg-gray-800 dark:bg-slate-700 text-white text-sm font-medium rounded-full hover:bg-gray-700 dark:hover:bg-slate-600 focus:ring-2 focus:ring-gray-300 dark:focus:ring-slate-500 "
              >
                Provide Context & Continue
              </button>
            </div>
          </section>

          <div
            id="resultsContainer"
            class="hidden mt-10 w-full max-w-4xl mx-auto"
          >
            <div
              class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 px-2 gap-3"
            >
              <h2
                class="text-sm font-semibold text-slate-400 uppercase tracking-wider"
              >
                Analysis Results
              </h2>
              <button
                onclick="copyToClipboard()"
                class="text-sm text-slate-400 hover:text-slate-600 dark:hover:text-slate-300  flex items-center"
              >
                <svg
                  class="w-5 h-5 mr-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"
                  ></path>
                </svg>
                Copy Report
              </button>
            </div>

            <div
              class="bg-white dark:bg-zinc-800 rounded-2xl p-6 sm:p-8 shadow-sm border border-slate-100 dark:border-slate-700 fade-in relative overflow-hidden"
            >
              <div
                id="reviewsDisplayRes"
                class="markdown-body text-base text-slate-700 dark:text-slate-200 leading-relaxed overflow-y-auto custom-scrollbar pr-2"
              ></div>

              <div
                id="Rescursor"
                class="hidden w-2 h-5 bg-slate-900 dark:bg-slate-300 inline-block align-middle ml-1 animate-pulse"
              ></div>
            </div>
          </div>
        </div>
      </section>

      <section
        id="remix"
        class="view-section items-center justify-center h-full"
      >
        <div class="w-full h-full">
          <div
            class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
          >
            <div class="flex items-center gap-4">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Social Post Rephraser
              </h1>
              <div
                class="flex items-center bg-gray-100 dark:bg-zinc-800 rounded-lg p-1"
              ></div>
            </div>
            <div>
              <button
                id="howToToggle"
                class="p-1.5 text-gray-400 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white border border-gray-200 dark:border-gray-600 rounded-full hover:border-gray-900 dark:hover:border-gray-300"
                title="How to use"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                  <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
              </button>
            </div>
          </div>

          <main class="flex flex-col items-center py-12 px-4">
            <div class="w-full max-w-3xl space-y-6">
              <div
                class="bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-3xl px-8 py-4 hover:shadow-[0_8px_30px_rgb(0,0,0,0.08)] dark:hover:shadow-[0_8px_30px_rgb(255,255,255,0.05)]"
              >
                <div class="mb-4">
                  <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Remixer</h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                    Transform any viral post into your own brand's style
                  </p>
                </div>

                <form id="fetchFormRfx" class="space-y-5">
                  <div class="relative group">
                    <label for="urlRfx" class="sr-only">Post URL</label>

                    <div
                      class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400 dark:text-gray-500 group-focus-within:text-gray-900 dark:group-focus-within:text-white "
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <path
                          d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                        ></path>
                        <path
                          d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                        ></path>
                      </svg>
                    </div>

                    <input
                      type="url"
                      id="urlRfx"
                      class="block w-full pl-11 pr-4 py-4 rounded-2xl border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-zinc-800 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:bg-white dark:focus:bg-zinc-700 focus:ring-4 focus:ring-gray-900/5 dark:focus:ring-gray-100/10 focus:border-gray-900 dark:focus:border-gray-400 sm:text-sm outline-none border"
                      placeholder="https://www.instagram.com/p/..."
                      required
                    />
                  </div>

                  <div class="flex items-center justify-between gap-4">
                    <span
                      class="text-xs items-center justify-center gap-2 text-gray-400 dark:text-gray-500 hidden sm:inline-flex"
                      ><div>Supports</div>
                      <div class="flex items-center">
                        <div
                          class="w-6 h-6 p-1 bg-gray-50 dark:bg-zinc-700 rounded-full border border-gray-100 dark:border-gray-600 flex items-center justify-center mr-1"
                          title="Instagram"
                        >
                          <svg
                            class="w-full h-full"
                            fill="#E4405F"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                            ></path>
                          </svg>
                        </div>
                        <div
                          class="w-6 h-6 p-1 bg-gray-50 dark:bg-zinc-700 rounded-full border border-gray-100 dark:border-gray-600 flex items-center justify-center mr-1"
                          title="Twitter (X)"
                        >
                          <svg
                            class="w-full h-full dark:fill-white"
                            fill="#000000"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
                            ></path>
                          </svg>
                        </div></div
                    ></span>

                    <button
                      type="submit"
                      id="fetchBtnRfx"
                      class="w-full sm:w-auto flex justify-center items-center py-2.5 px-8 border border-transparent rounded-xl shadow-lg shadow-gray-900/10 dark:shadow-gray-900/30 text-sm font-semibold text-white bg-gray-900 dark:bg-white dark:text-gray-900 hover:bg-black dark:hover:bg-gray-100 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 dark:focus:ring-gray-100 active:scale-[0.96] disabled:opacity-70 disabled:cursor-not-allowed"
                    >
                      <span id="fetchBtnTextRfx" class="flex items-center">
                        <svg
                          class="w-4 h-4 mr-2"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                          ></path>
                        </svg>
                        Fetch Details
                      </span>

                      <svg
                        id="fetchBtnSpinnerRfx"
                        class="hidden animate-spin h-5 w-5 text-white"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                      >
                        <circle
                          class="opacity-25"
                          cx="12"
                          cy="12"
                          r="10"
                          stroke="currentColor"
                          stroke-width="4"
                        ></circle>
                        <path
                          class="opacity-75"
                          fill="currentColor"
                          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </form>
              </div>
              <div
                id="howToUseContainer"
                class="w-full max-w-3xl mt-3 space-y-4 animate-fade-in"
              >
                <div
                  class="relative p-8 bg-white dark:bg-dark-surface rounded-[2.5rem] overflow-hidden"
                >
                  <div class="absolute top-0 right-0 p-4 opacity-5 dark:opacity-10 dark:text-white">
                    <svg
                      width="120"
                      height="120"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                    >
                      <path
                        d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
                      ></path>
                    </svg>
                  </div>

                  <h3
                    class="text-lg font-bold text-gray-900 dark:text-white mb-8 flex items-center"
                  >
                    <span
                      class="w-8 h-8 rounded-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 flex items-center justify-center text-xs mr-3"
                      >?</span
                    >
                    Quick Guide
                  </h3>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="space-y-4">
                      <div
                        class="h-32 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-600 flex items-center justify-center relative overflow-hidden bg-gray-50 dark:bg-zinc-800"
                      >
                        <div
                          class="absolute inset-0 flex items-center justify-center"
                        >
                          <div
                            class="w-20 h-8 bg-white dark:bg-zinc-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm flex items-center px-2 animate-pulse"
                          >
                            <div class="w-12 h-1 bg-gray-200 dark:bg-gray-500 rounded"></div>
                          </div>
                          <div class="absolute bottom-4 animate-bounce">
                            <svg
                              class="w-5 h-5 text-gray-400 dark:text-gray-500"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <div>
                        <h4 class="font-semibold text-gray-900 dark:text-white text-sm">
                          1. Paste Link
                        </h4>
                        <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                          Insert an Instagram or Twitter URL into the fetcher
                          above.
                        </p>
                      </div>
                    </div>

                    <div class="space-y-4">
                      <div
                        class="h-32 rounded-2xl border-2 border-gray-100 dark:border-gray-600 flex items-center justify-center relative overflow-hidden bg-gray-50 dark:bg-zinc-800"
                      >
                        <div class="flex space-x-1">
                          <div
                            class="w-2 h-8 bg-gray-200 dark:bg-gray-600 rounded-full animate-guide-flow-1"
                          ></div>
                          <div
                            class="w-2 h-12 bg-gray-400 dark:bg-gray-400 rounded-full animate-guide-flow-2"
                          ></div>
                          <div
                            class="w-2 h-6 bg-gray-300 dark:bg-gray-500 rounded-full animate-guide-flow-3"
                          ></div>
                        </div>
                      </div>
                      <div>
                        <h4 class="font-semibold text-gray-900 dark:text-white text-sm">
                          2. AI Analysis
                        </h4>
                        <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                          Our AI extracts the media and analyzes the original
                          context.
                        </p>
                      </div>
                    </div>

                    <div class="space-y-4">
                      <div
                        class="h-32 rounded-2xl border-2 border-gray-900/10 dark:border-gray-600 flex items-center justify-center relative overflow-hidden bg-gray-50 dark:bg-zinc-800"
                      >
                        <div class="relative">
                          <div
                            class="w-24 h-16 bg-white dark:bg-zinc-700 border border-gray-200 dark:border-gray-600 rounded shadow-sm p-2"
                          >
                            <div
                              class="w-full h-1 bg-gray-100 dark:bg-gray-500 rounded mb-1"
                            ></div>
                            <div
                              class="w-4/5 h-1 bg-gray-100 dark:bg-gray-500 rounded mb-1"
                            ></div>
                          </div>
                          <div
                            class="absolute -top-2 -right-2 animate-spin-slow"
                          >
                            <svg
                              class="w-6 h-6 text-gray-800 dark:text-gray-200"
                              fill="currentColor"
                              viewBox="0 0 20 20"
                            >
                              <path
                                d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <div>
                        <h4 class="font-semibold text-gray-900 dark:text-white text-sm">
                          3. Rephrase
                        </h4>
                        <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">
                          Give a prompt to generate a fresh caption and styled
                          image.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div id="statusContainerRfx" class="min-h-[20px] text-center">
                <div id="statusRfx" class="text-left"></div>

                <div
                  id="processAnimationRfx"
                  class="hidden flex flex-row gap-2 items-center justify-center space-y-4 px-10 py-4 border border-gray-200 dark:border-dark-border rounded-2xl dark:bg-dark-surface"
                >
                  <svg
                    class="relative w-6 h-6 text-gray-800 dark:text-gray-200 animate-pulse"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"
                    ></path>
                  </svg>
                  <span
                    style="margin: 0"
                    id="shimmerTextRfx"
                    class="text-lg shimmer-text-rfx"
                    >Initializing...</span
                  >
                </div>
              </div>

              <!-- Skeleton Loader -->
              <div
                id="skeletonLoaderRfx"
                class="hidden bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-2xl p-6 shadow-sm space-y-4"
              >
                <div class="flex items-center space-x-2 mb-4">
                  <div
                    class="h-4 bg-gray-200 dark:bg-zinc-700 rounded w-1/4 animate-pulse"
                  ></div>
                </div>
                <div
                  class="w-full h-64 bg-gray-100 dark:bg-zinc-800 rounded-2xl animate-pulse flex items-center justify-center"
                >
                  <svg
                    class="w-10 h-10 text-gray-300 dark:text-gray-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                    ></path>
                  </svg>
                </div>
                <div class="space-y-3 pt-4">
                  <div
                    class="h-3 bg-gray-200 dark:bg-zinc-700 rounded w-full animate-pulse"
                  ></div>
                  <div
                    class="h-3 bg-gray-200 dark:bg-zinc-700 rounded w-5/6 animate-pulse"
                  ></div>
                  <div
                    class="h-3 bg-gray-200 dark:bg-zinc-700 rounded w-4/6 animate-pulse"
                  ></div>
                </div>
              </div>

              <!-- Actual Fetched Content -->
              <div
                id="fetchedDetailsRfx"
                class="hidden bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-2xl shadow-sm overflow-hidden"
              >
                <!-- Collapsible Header -->
                <div
                  id="fetchedHeaderBtn"
                  class="p-6 bg-white dark:bg-dark-surface flex justify-between items-center cursor-pointer border-b border-gray-100 dark:border-dark-border hover:bg-gray-50 dark:hover:bg-zinc-800  select-none"
                >
                  <div class="flex items-center space-x-2">
                    <svg
                      class="w-5 h-5 text-slate-300 dark:text-slate-500 group-focus-within:text-gray-500 dark:group-focus-within:text-slate-300 "
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                      ></path>
                    </svg>
                    <h2 class="text-lg font-semibold text-gray-800 dark:text-white">
                      Fetched Content
                    </h2>
                    <span
                      class="ml-2 px-2.5 py-0.5 bg-gray-100 dark:bg-zinc-700 text-xs font-medium text-gray-600 dark:text-gray-300 rounded-full"
                      >Ready to Edit</span
                    >
                  </div>
                  <!-- Chevron Icon -->
                  <svg
                    id="fetchedChevron"
                    class="w-5 h-5 text-gray-400 dark:text-gray-500 chevron-icon"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    ></path>
                  </svg>
                </div>

                <div id="fetchedContentBody" class="collapse-content">
                  <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                      <div class="space-y-2 flex flex-col">
                        <label
                          class="block text-xs font-semibold text-gray-400 uppercase tracking-wider"
                          >Fetched Image</label
                        >
                        <div
                          id="mediaRfx"
                          class="rounded-3xl overflow-hidden border border-gray-100 dark:border-gray-600 bg-gray-50 dark:bg-zinc-800 flex items-center justify-center max-h-[350px]"
                        ></div>
                      </div>

                      <div class="space-y-2 flex flex-col">
                        <label
                          class="block text-xs font-semibold text-gray-400 uppercase tracking-wider"
                          >Original Caption</label
                        >
                        <div
                          id="captionRfx"
                          class="text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-zinc-800 p-4 rounded-2xl border border-gray-100 dark:border-gray-600 h-full overflow-y-auto custom-scrollbar max-h-[350px]"
                        ></div>
                      </div>
                    </div>

                    <!-- Create Form -->
                    <form
                      id="createFormRfx"
                      class="space-y-5 border-t border-gray-100 dark:border-dark-border pt-6"
                    >
                      <!-- Hidden fields -->
                      <input type="hidden" id="fetched_captionRfx" />
                      <input type="hidden" id="fetched_imgpathRfx" />

                      <div>
                        <label
                          for="rephrase_promptRfx"
                          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                          >Rephrase Prompt</label
                        >
                        <div class="icon-input-wrapper">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path
                              d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                            ></path>
                          </svg>
                          <textarea
                            id="rephrase_promptRfx"
                            rows="3"
                            class="block w-full rounded-2xl border-gray-300 dark:border-gray-600 dark:bg-zinc-800 dark:text-white dark:placeholder-gray-500 shadow-sm focus:border-gray-800 dark:focus:border-gray-400 focus:ring-gray-800 dark:focus:ring-gray-400 sm:text-sm py-3 border"
                            placeholder="e.g., Make it engaging for shoe lovers, add emojis"
                            required
                          ></textarea>
                        </div>
                      </div>

                      <div>
                        <label
                          for="image_suggestionRfx"
                          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                          >Image Edit Suggestion</label
                        >
                        <div class="icon-input-wrapper">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                            <path
                              d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"
                            ></path>
                            <path d="M2 2l7.586 7.586"></path>
                            <circle cx="11" cy="11" r="2"></circle>
                          </svg>
                          <textarea
                            id="image_suggestionRfx"
                            rows="2"
                            class="block w-full rounded-2xl border-gray-300 dark:border-gray-600 dark:bg-zinc-800 dark:text-white dark:placeholder-gray-500 shadow-sm focus:border-gray-800 dark:focus:border-gray-400 focus:ring-gray-800 dark:focus:ring-gray-400 sm:text-sm py-3 border"
                            placeholder="e.g., Add stylish sneakers in the background"
                            required
                          ></textarea>
                        </div>
                      </div>

                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                          <label
                            for="theme_idRfx"
                            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                            >Select Theme</label
                          >
                          <div class="icon-input-wrapper">
                            <svg
                              fill="currentColor"
                              width="18"
                              height="18"
                              viewBox="0 0 32 32"
                              id="icon"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <defs>
                                <style>
                                  .cls-1 {
                                    fill: none;
                                  }
                                </style>
                              </defs>
                              <title>api</title>
                              <path
                                d="M26,22a3.86,3.86,0,0,0-2,.57l-3.09-3.1a6,6,0,0,0,0-6.94L24,9.43A3.86,3.86,0,0,0,26,10a4,4,0,1,0-4-4,3.86,3.86,0,0,0,.57,2l-3.1,3.09a6,6,0,0,0-6.94,0L9.43,8A3.86,3.86,0,0,0,10,6a4,4,0,1,0-4,4,3.86,3.86,0,0,0,2-.57l3.09,3.1a6,6,0,0,0,0,6.94L8,22.57A3.86,3.86,0,0,0,6,22a4,4,0,1,0,4,4,3.86,3.86,0,0,0-.57-2l3.1-3.09a6,6,0,0,0,6.94,0L22.57,24A3.86,3.86,0,0,0,22,26a4,4,0,1,0,4-4ZM26,4a2,2,0,1,1-2,2A2,2,0,0,1,26,4ZM4,6A2,2,0,1,1,6,8,2,2,0,0,1,4,6ZM6,28a2,2,0,1,1,2-2A2,2,0,0,1,6,28Zm10-8a4,4,0,1,1,4-4A4,4,0,0,1,16,20Zm10,8a2,2,0,1,1,2-2A2,2,0,0,1,26,28Z"
                                transform="translate(0 0)"
                              />
                              <rect class="cls-1" width="32" height="32" />
                            </svg>
                            <select
                              id="theme_idRfx"
                              class="block w-full rounded-2xl border-gray-300 dark:border-gray-600 shadow-sm focus:border-gray-800 dark:focus:border-gray-400 focus:ring-gray-800 dark:focus:ring-gray-400 sm:text-sm py-3 border bg-white dark:bg-zinc-800 dark:text-white"
                            >
                              <option value="">Loading themes...</option>
                            </select>
                          </div>
                        </div>

                        <div>
                          <label
                            for="modelRfx"
                            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                            >Gemini Model</label
                          >
                          <div class="icon-input-wrapper">
                            <svg
                              fill="currentColor"
                              width="18"
                              height="18"
                              viewBox="0 0 32 32"
                              id="icon"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <defs>
                                <style>
                                  .cls-1 {
                                    fill: none;
                                  }
                                </style>
                              </defs>
                              <path
                                d="M28.4473,16.1055,23,13.3818V7a1,1,0,0,0-.5527-.8945l-6-3a1.0008,1.0008,0,0,0-.8946,0l-6,3A1,1,0,0,0,9,7v6.3818L3.5527,16.1055A1,1,0,0,0,3,17v7a1,1,0,0,0,.5527.8945l6,3a1.001,1.001,0,0,0,.8946,0L16,25.1182l5.5527,2.7763a1.001,1.001,0,0,0,.8946,0l6-3A1,1,0,0,0,29,24V17A1,1,0,0,0,28.4473,16.1055ZM21,13.3818l-4,2V10.6182l4-2ZM16,5.1182,19.7637,7,16,8.8818,12.2363,7Zm-5,3.5,4,2v4.7636l-4-2ZM9,25.3818l-4-2V18.6182l4,2Zm1-6.5L6.2363,17,10,15.1182,13.7637,17Zm1,1.7364,4-2v4.7636l-4,2Zm10,4.7636-4-2V18.6182l4,2Zm1-6.5L18.2363,17,22,15.1182,25.7637,17Zm5,4.5-4,2V20.6182l4-2Z"
                              />
                              <rect
                                id="_Transparent_Rectangle_"
                                data-name="&lt;Transparent Rectangle&gt;"
                                class="cls-1"
                                width="32"
                                height="32"
                              />
                            </svg>
                            <select
                              id="modelRfx"
                              class="block w-full rounded-2xl border-gray-300 dark:border-gray-600 shadow-sm focus:border-gray-800 dark:focus:border-gray-400 focus:ring-gray-800 dark:focus:ring-gray-400 sm:text-sm py-3 border bg-white dark:bg-zinc-800 dark:text-white"
                            >
                              <option value="gemini-2.5-flash-image" selected>
                                gemini-2.5-flash-image
                              </option>
                              <option value="gemini-3-pro-image-preview">
                                gemini-3-pro-image-preview
                              </option>
                            </select>
                          </div>
                        </div>
                      </div>

                      <div>
                        <label
                          for="watermark_positionRfx"
                          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"
                          >Watermark Position</label
                        >
                        <div class="icon-input-wrapper">
                          <!-- Optional icon â€“ you can replace with a suitable watermark SVG if desired -->
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                          >
                            <path d="M12 2L2 12h3v8h14v-8h3L12 2z"></path>
                            <text
                              x="6"
                              y="16"
                              font-size="8"
                              fill="currentColor"
                            >
                              Â©
                            </text>
                          </svg>
                          <select
                            id="watermark_positionRfx"
                            class="block w-full rounded-2xl border-gray-300 dark:border-gray-600 shadow-sm focus:border-gray-800 dark:focus:border-gray-400 focus:ring-gray-800 dark:focus:ring-gray-400 sm:text-sm py-3 border bg-white dark:bg-zinc-800 dark:text-white"
                          >
                            <option value="">No watermark</option>
                            <option value="bottom-right">Bottom Right</option>
                            <option value="top-left">Top Left</option>
                            <option value="top-right">Top Right</option>
                            <option value="bottom-left">Bottom Left</option>
                          </select>
                        </div>
                      </div>

                      <button
                        type="submit"
                        id="createSubmitBtnRfx"
                        disabled
                        class="w-full flex justify-center items-center py-3.5 px-4 border border-transparent rounded-3xl shadow-sm text-sm font-medium text-white bg-gray-900 dark:bg-white dark:text-gray-900 hover:bg-gray-800 dark:hover:bg-gray-100 disabled:bg-gray-300 dark:disabled:bg-gray-600 dark:disabled:text-gray-400 disabled:cursor-not-allowed transform hover:scale-[1.02] mt-4"
                      >
                        <svg
                          class="w-4 h-4 mr-2"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"
                          ></path>
                        </svg>
                        Generate New Post
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </section>

      <section
        id="integrations"
        class="view-section items-center justify-center h-full"
      >
        <div class="w-full h-full">
          <div
            class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border"
          >
            <div class="flex w-full  items-center justify-between ">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Integrations
              </h1>
              <div id="activeCounterContainerRvk" class="hidden md:flex">
                <div
                  class="flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-500/10 border border-gray-200 dark:border-gray-500/20 rounded-full"
                >
                  <span class="relative flex h-2 w-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full dark:bg-gray-50 bg-gray-600 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 dark:bg-white bg-zinc-500"></span>
                  </span>
                  <span
                    id="activeCountRvk"
                    class="text-xs font-semibold text-gray-700 dark:text-gray-400"
                    >0 Active</span
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="max-w-7xl mx-auto px-6 py-8">
            <div
              class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8"
            >
              <div>
                <h2
                  id="pageTitleRvk"
                  class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
                >
                  Connected Platforms
                </h2>
                <p
                  class="text-sm text-gray-500 dark:text-gray-400 mt-1"
                >
                  Manage your connected social media accounts and their access permissions.
                </p>
              </div>
            </div>

            <div
              id="loaderRvk"
              class="flex flex-col items-center justify-center py-24"
            >
              <div class="relative">
                <div
                  class="w-10 h-10 border-2 border-gray-200 dark:border-gray-700 rounded-full"
                ></div>
                <div
                  class="absolute top-0 left-0 w-10 h-10 border-2 border-transparent border-t-gray-900 dark:border-t-white rounded-full animate-spin"
                ></div>
              </div>
              <p class="mt-4 text-sm text-gray-500 dark:text-gray-400">Loading platforms...</p>
            </div>

            <div
              id="zeroStateRvk"
              class="hidden flex flex-col items-center justify-center py-16 px-8 rounded-2xl bg-gray-50 dark:bg-zinc-900/50 border border-gray-200 dark:border-white/10 text-center"
            >
              <div
                class="w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-zinc-700 dark:to-zinc-800 rounded-2xl flex items-center justify-center mb-6 shadow-sm"
              >
                <i data-lucide="unplug" class="w-7 h-7 text-gray-500 dark:text-gray-400"></i>
              </div>

              <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                No Connected Platforms
              </h2>
              <p class="text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-6 text-sm leading-relaxed">
                Connect your social media accounts to start scheduling and managing your posts from one place.
              </p>

              <button
                onclick="switchView('home')"
                class="mb-6 px-6 py-2.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 text-sm font-semibold rounded-xl hover:bg-gray-800 dark:hover:bg-gray-100 shadow-sm hover:shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2"
              >
                Connect Platform
              </button>

              <div class="flex gap-6 mt-2 opacity-40 text-gray-900 dark:text-gray-100">
                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Instagram"
                  title="Instagram"
                  
                >
                  <path
                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Facebook"
                  title="Facebook"
                  
                >
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="LinkedIn"
                  title="LinkedIn"
                  
                >
                  <path
                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.202 24 24 23.227 24 22.271V1.729C24 .774 23.202 0 22.222 0h.003z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Twitter (X)"
                  title="Twitter (X)"
                  
                >
                  <path
                    d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
                  ></path>
                </svg>

                <svg
                  viewBox="0 0 24 24"
                  class="w-6 h-6"
                  fill="currentColor"
                  aria-label="Threads"
                  title="Threads"
                  
                >
                  <path
                    d="M12.066 0C6.723 0 1.5 3.051 1.5 11.991c0 8.989 5.391 12.009 11.181 12.009 6.045 0 9.384-3.538 9.384-7.612 0-1.916-.915-3.588-2.578-4.706-.62-.415-1.358-.726-1.358-.726-.115-1.703-.621-3.035-1.508-3.966-.887-.932-2.128-1.422-3.591-1.422-2.069 0-3.564.632-4.698 2.253 0 0 1.344.933 1.749 1.203.602-.695 1.076-1.302 2.951-1.302 2.04 0 2.85 1.637 2.85 2.592-.553-.111-1.615-.171-2.495-.171-2.348 0-5.325 1.135-5.325 4.27 0 2.196 2.093 3.873 4.52 3.873 4.164 0 5.112-3.114 5.466-4.965.093 0 1.905 1.034 1.905 3.191 0 3.169-3.105 5.334-7.271 5.334-5.064 0-8.445-3.3-8.445-9.515 0-6.929 3.026-10.185 8.373-10.185 3.235 0 6.765.816 8.425 2.659l2.04-.53C20.325.365 14.535 0 12.066 0z m1.008 16.161c-.836 0-2.4-.435-2.4-1.752 0-.819.396-2.124 3.456-2.124 1.214 0 1.933.098 2.292.242-.247 3.211-1.818 3.634-3.348 3.634z"
                  ></path>
                </svg>
              </div>
            </div>

            <div
              id="platformGridRvk"
              class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 lg:gap-8"
            ></div>
          </div>
        </div>
      </section>
      <section id="brand" class="view-section items-center justify-center h-full mb-4">
        <div class="w-full h-full">
          <div class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border">
            <div class="flex w-full  items-center justify-between ">
              <h1
                class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight"
              >
                Brand Assets (Experimental)
              </h1>
              
              <div class="flex gap-2">
                <button id="openFetchBtnCft" class="hidden inline-flex items-center gap-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-600 px-5 py-2.5 rounded-xl font-medium shadow-sm text-sm transition-all duration-200 group">
                <i data-lucide="search" class="w-4 h-4 text-gray-400 group-hover:text-gray-500 transition-colors"></i> 
                <span>Fetch New</span>
              </button>
              <button id="deleteCompanyBtnCft" type="button" class="inline-flex items-center gap-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-600 px-5 py-2.5 rounded-xl font-medium shadow-sm text-sm transition-all duration-200 group">
              <i data-lucide="x" class="w-4 h-4 text-gray-400 group-hover:text-gray-500 transition-colors"></i> 
              <span>Delete</span>
              </button>
              </div>
            </div>


          </div>
          <div id="emptyStateCft" class="hidden flex-col items-center justify-center min-h-[450px] px-6 text-center fade-enter-cft">
            <div class="w-20 h-20 bg-gray-50 dark:bg-gray-800/50 rounded-3xl flex items-center justify-center mb-6 border border-gray-100 dark:border-gray-800">
                <i data-lucide="globe" class="w-10 h-10 text-gray-400"></i>
            </div>
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">No Brand Profile Found</h2>
            <p class="text-gray-500 dark:text-gray-400 max-w-sm mb-8">
                Enter a website URL and our AI Agent will analyze the site to extract brand assets, products, and company details.
            </p>
            
            <div class="w-full max-w-md flex flex-col gap-3">
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i data-lucide="link" class="w-4 h-4 text-gray-400"></i>
                    </div>
                    <input type="text" id="emptyInputCft" 
                        class="block w-full pl-11 pr-4 py-3.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl text-sm focus:ring-2 focus:ring-gray-900 dark:focus:ring-white transition-all outline-none" 
                        placeholder="https://example.com">
                </div>
                <button id="emptyFetchBtnCft" class="w-full py-3.5 px-6 bg-gray-900 dark:bg-white text-white dark:text-black font-semibold rounded-2xl hover:opacity-90 transition-all shadow-lg shadow-gray-200 dark:shadow-none flex items-center justify-center gap-2">
                    <span>Generate Brand Profile</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
          </div>
            <div id="mainCardCft" class="hidden overflow-hidden ">
                
                <!-- Tabs Header -->
                <div class="flex justify-center file:px-6 pt-6 pb-2">
                    <nav class="flex p-1 space-x-1 bg-gray-100 dark:bg-gray-800 rounded-full" aria-label="Tabs">
                        <button id="tabViewCft" class="flex items-center justify-center gap-2 rounded-full py-2 px-4 text-sm font-semibold shadow bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-all duration-200">
                            <i data-lucide="eye" class="w-4 h-4"></i>
                            <span>Overview</span>
                        </button>
                        <button id="tabEditCft" class="flex items-center justify-center gap-2 rounded-full py-2 px-4text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-200/50 dark:hover:bg-gray-700/50 transition-all duration-200">
                            <i data-lucide="edit-3" class="w-4 h-4"></i>
                            <span>Edit Details</span>
                        </button>
                    </nav>
                </div>

                <div class="p-6 sm:p-8 min-h-[400px]">
                    
                    <!-- Loading State -->
                    <div id="cardSpinnerCft" class="hidden flex flex-col items-center justify-center h-80 text-gray-500 dark:text-gray-400">
                        <div class="spinner-cft mb-6"></div>
                        <p class="animate-pulse font-medium">AI Agent is analyzing website...</p>
                    </div>

                    <!-- VIEW MODE -->
                    <div id="viewModeCft" class="fade-enter-cft">
                        <div class="flex flex-col sm:flex-row justify-between items-start gap-5 border-b border-gray-100 dark:border-gray-800 pb-8 mb-8">
                            <div class="space-y-2">
                                <h2 id="vNameCft" class="text-3xl font-medium text-gray-900 dark:text-white tracking-tight">Loading...</h2>
                                <a id="vUrlCft" href="#" target="_blank" class="inline-flex items-center gap-1.5 text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 text-sm font-medium transition-colors">
                                    <i data-lucide="link" class="w-3.5 h-3.5"></i>
                                    <span class="underline decoration-gray-200 dark:decoration-gray-800 underline-offset-2"></span>
                                </a>
                            </div>
                            <div class="flex items-center gap-2 bg-gray-50 dark:bg-gray-800/50 pl-3 pr-4 py-1.5 rounded-full border border-gray-200 dark:border-gray-700">
                                <i data-lucide="map-pin" class="w-4 h-4 text-gray-400 dark:text-gray-500"></i>
                                <span id="vLocCft" class="text-sm font-medium text-gray-700 dark:text-gray-300"></span>
                            </div>
                        </div>

                        <div class="mb-10">
                            <div class="flex items-center gap-2 mb-4">
                                <i data-lucide="info" class="w-4 h-4 text-gray-400"></i>
                                <h3 class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-widest">About</h3>
                            </div>
                            <p id="vDetailsCft" class="text-gray-600 dark:text-gray-300 leading-relaxed text-base bg-gray-50 dark:bg-gray-800/50 p-5 rounded-2xl border border-gray-100 dark:border-gray-800/50"></p>
                        </div>

                        <div>
                            <div class="flex items-center gap-2 mb-5">
                                <i data-lucide="package" class="w-4 h-4 text-gray-400"></i>
                                <h3 class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-widest">Products & Services</h3>
                            </div>
                            <div id="vProductsCft" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                        </div>
                    </div>

                    <!-- EDIT MODE -->
                    <div id="editModeCft" class="hidden space-y-8 fade-enter-cft">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Company Name</label>
                                <input type="text" id="eNameCft" class="block w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white sm:text-sm px-4 py-3 transition-colors">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Location</label>
                                <div class="relative rounded-xl shadow-sm">
                                    <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                                        <i data-lucide="map-pin" class="w-4 h-4 text-gray-400"></i>
                                    </div>
                                    <input type="text" id="eLocCft" class="block w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white pl-10  sm:text-sm px-4 py-3 transition-colors">
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
                                <textarea id="eDescCft" rows="6" class="block w-full rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white sm:text-sm px-4 py-3 transition-colors"></textarea>
                            </div>

                            <!-- Read-only Notice -->
                            <div class="rounded-2xl bg-gray-50 dark:bg-gray-900/20 p-5 border border-gray-200 dark:border-gray-800/50">
                                <div class="flex gap-3">
                                    <div class="flex-shrink-0">
                                        <i data-lucide="alert-circle" class="w-5 h-5 text-gray-500 dark:text-gray-400"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-sm font-semibold text-gray-800 dark:text-gray-300">Product List is Auto-Generated</h3>
                                        <div class="mt-1 text-sm text-gray-700 dark:text-gray-400/80">
                                            <p>Products are extracted by the AI agent and cannot be edited manually here. Fetch the profile again to update this list.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end gap-3 border-t border-gray-100 dark:border-gray-800 pt-6">
                            <button id="eRevertCft" class="px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors focus:ring-2 focus:ring-gray-200">Revert Changes</button>
                            <button id="eSaveCft" class="inline-flex items-center gap-2 px-5 py-2.5 text-sm font-medium text-white bg-gray-900 dark:bg-white dark:text-black rounded-full hover:bg-zinc-700 dark:hover:bg-zinc-500 dark:shadow-none transition-all">
                                Save Changes
                            </button>
                        </div>
                    </div>

                </div>
            </div>
            <div id="globalStatusCft" class="hidden mx-8 rounded-2xl p-4 text-sm font-medium border shadow-sm flex items-start gap-3 fade-enter-cft bg-gray-50 dark:bg-gray-900/20 text-gray-700 dark:text-green-200 border-gray-100 dark:border-gray-900/30"></div>
        </div>
      </section>

      <section id="clickframe" class="view-section items-center justify-center h-full">
        <div class="w-full h-full">
          <div class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border">
            <div class="flex items-center gap-4">
              <h1 class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight">Click Frame (Beta)</h1>
              <div class="flex items-center bg-gray-100 dark:bg-dark-surface rounded-lg p-1"></div>
            </div>
          </div>
          <main class="flex-grow max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12">
          <div class="lg:col-span-4 space-y-8">
              <form id="generateFormTnl" class="space-y-6">
                  <div class="space-y-3">
                      <label class="flex font-medium items-center text-sm  text-gray-700 dark:text-gray-300 gap-2">
                        Source Image
                      </label>
                      <div id="dropZoneTnl" class="group relative border border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-8 text-center hover:border-gray-900 dark:hover:border-gray-400 hover:bg-gray-50 dark:hover:bg-gray-900  cursor-pointer">
                          <input type="file" id="fileInputTnl" name="file" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10">
                          
                          <div id="uploadPromptTnl" class="space-y-3 pointer-events-none transition-opacity">
                              <div class="w-12 h-12 border border-gray-200 dark:border-gray-700 rounded-lg flex items-center justify-center mx-auto group-hover:scale-110 transition-transform">
                                  <i data-lucide="arrow-up-from-dot" class="w-6 h-6 text-gray-400 dark:text-gray-500"></i>
                              </div>
                              <div>
                                  <p class="text-sm font-medium text-gray-900 dark:text-gray-200">Click or drop image</p>
                                  <p class="text-xs text-gray-500 mt-1">JPG, PNG up to 10MB</p>
                              </div>
                          </div>

                          <div id="filePreviewTnl" class="hidden absolute inset-0 bg-white dark:bg-dark-surface p-2 rounded-xl items-center justify-center">
                          </div>
                      </div>
                      <input type="hidden" id="editSourceUrlTnl" value="">
                  </div>
                  <div class="space-y-5">
                      <div class="space-y-2">
                          <label class="flex items-center text-sm font-medium text-gray-700 dark:text-gray-300 gap-2">
                            </i> Prompt
                          </label>
                          <textarea id="promptInputTnl" name="prompt" rows="3" class="w-full bg-transparent border border-gray-300 dark:border-gray-700 rounded-lg p-3 text-sm focus:ring-1 focus:ring-gray-900 dark:focus:ring-gray-100 focus:border-gray-900 dark:focus:border-gray-100 outline-none resize-none transition-colors placeholder-gray-400" placeholder="A shocked person holding an object..."></textarea>
                      </div>

                      <!-- Custom Dropdowns Grid -->
                      <div class="grid grid-cols-2 gap-4">
                          
                          <!-- Style Dropdown -->
                          <div class="custom-select-container-tnl relative" id="styleDropdownTnl">
                              <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5">Style</label>
                              <input type="hidden" name="style" id="styleInputTnl" value="MrBeast">
                              <button type="button" class="dropdown-trigger-tnl w-full flex items-center justify-between bg-white dark:bg-dark-surface border border-gray-300 dark:border-gray-700 rounded-lg px-3 py-2.5 text-sm hover:border-gray-400 dark:hover:border-gray-500 transition-colors">
                                  <span class="selected-text-tnl truncate">MrBeast Viral</span>
                                  <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400"></i>
                              </button>
                              <!-- Options -->
                              <div class="dropdown-content-tnl absolute z-20 top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl overflow-hidden hidden">
                                  <div class="max-h-60 overflow-y-auto p-1">
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="MrBeast">
                                          <i data-lucide="flame" class="w-4 h-4"></i> MrBeast Viral
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Bold">
                                          <i data-lucide="zap" class="w-4 h-4"></i> Bold & Vivid
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Dark">
                                          <i data-lucide="moon" class="w-4 h-4"></i> Cinematic Dark
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Minimal">
                                          <i data-lucide="minus-circle" class="w-4 h-4"></i> Minimalist
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Tech">
                                          <i data-lucide="cpu" class="w-4 h-4"></i> Tech / Futuristic
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Neon">
                                          <i data-lucide="lightbulb" class="w-4 h-4"></i> Neon Glow
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Cartoon">
                                          <i data-lucide="smile" class="w-4 h-4"></i> Cartoon
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <!-- Platform Dropdown -->
                          <div class="custom-select-container-tnl relative" id="ratioDropdownTnl">
                              <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5">Format</label>
                              <input type="hidden" name="ratio" id="ratioInputTnl" value="YouTube">
                              <button type="button" class="dropdown-trigger-tnl w-full flex items-center justify-between bg-white dark:bg-dark-surface border border-gray-300 dark:border-gray-700 rounded-lg px-3 py-2.5 text-sm hover:border-gray-400 dark:hover:border-gray-500 transition-colors">
                                  <span class="selected-text-tnl truncate">YouTube (16:9)</span>
                                  <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400"></i>
                              </button>
                              <div class="dropdown-content-tnl absolute z-20 top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl overflow-hidden hidden">
                                  <div class="p-1">
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="YouTube">
                                          <i data-lucide="youtube" class="w-4 h-4"></i> YouTube
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="Instagram">
                                          <i data-lucide="instagram" class="w-4 h-4"></i> Instagram
                                      </div>
                                      <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center gap-2" data-value="TikTok">
                                          <i data-lucide="smartphone" class="w-4 h-4"></i> TikTok
                                      </div>
                                  </div>
                              </div>
                          </div>

                      </div>

                      <!-- Model Dropdown (Full Width) -->
                      <div class="custom-select-container-tnl relative" id="modelDropdownTnl">
                          <label class="block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5">AI Model</label>
                          <input type="hidden" name="model" id="modelInputTnl" value="gemini-2.5-flash-image">
                          <button type="button" class="dropdown-trigger-tnl w-full flex items-center justify-between bg-white dark:bg-dark-surface border border-gray-300 dark:border-gray-700 rounded-lg px-3 py-2.5 text-sm hover:border-gray-400 dark:hover:border-gray-500 transition-colors">
                              <span class="selected-text-tnl truncate">Gemini 2.5 Flash (Fast)</span>
                              <i data-lucide="chevron-down" class="w-4 h-4 text-gray-400"></i>
                          </button>
                          <div class="dropdown-content-tnl absolute z-20 top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl overflow-hidden hidden">
                              <div class="p-1">
                                  <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer" data-value="gemini-2.5-flash-image">
                                      <div class="font-medium">Gemini 2.5 Flash</div>
                                      <div class="text-xs text-gray-500">Fast generation, good for testing</div>
                                  </div>
                                  <div class="dropdown-option-tnl px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer" data-value="gemini-3-pro-image-preview">
                                      <div class="font-medium">Gemini 3 Pro</div>
                                      <div class="text-xs text-gray-500">Highest quality details</div>
                                  </div>
                              </div>
                          </div>
                      </div>

                  </div>

                  <button type="submit" id="generateBtnTnl" class="w-full bg-gray-900 dark:bg-white hover:bg-gray-800 dark:hover:bg-gray-200 text-white dark:text-gray-900 py-3 px-4 rounded-2xl  shadow-lg flex items-center justify-center gap-2 group">
                      <span>Generate Canvas</span>
                      <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                  </button>
              </form>
          </div>
          <div class="lg:col-span-8 flex flex-col h-full max-h-[600px]">
              <div class="flex-grow border border-gray-200 dark:border-gray-800 rounded-xl relative overflow-hidden flex items-center justify-center p-4">
                  
                  <!-- Placeholder State -->
                  <div id="placeholderStateTnl" class="text-center p-8 max-w-sm mx-auto">
                      <div class="w-16 h-16 border-2 border-gray-300 dark:border-gray-700 rounded-2xl flex items-center justify-center mx-auto mb-4 border-dashed">
                          <i data-lucide="image-plus" class="w-8 h-8 text-gray-400"></i>
                      </div>
                      <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">Ready to Imagine</h3>
                      <p class="text-gray-500 mt-2 text-sm">Upload an image and select your style. The AI will handle the rest.</p>
                  </div>

                  <!-- Loading State -->
                  <div id="loadingStateTnl" class="hidden text-center z-10">
                      <div class="loader-tnl mx-auto mb-4 text-gray-900 dark:text-white"></div>
                      <p class="text-gray-500 text-sm font-medium animate-pulse">Processing pixels...</p>
                  </div>

                  <img id="resultImageTnl" src="" alt="Generated Thumbnail" class="hidden max-w-full max-h-full object-contain shadow-2xl rounded-lg">
                  <div id="imageActionsTnl" class="hidden absolute top-4 right-4 flex gap-2">
                      <a id="downloadLinkTnl" href="#" download class="bg-white/90 dark:bg-dark-surface/90 text-gray-900 dark:text-white p-2 rounded-xl hover:scale-105 shadow-sm border border-gray-200 dark:border-gray-700" title="Download">
                          <i data-lucide="download" class="w-4 h-4"></i>
                      </a>
                      <button onclick="resetUITnl()" class="bg-white/90 dark:bg-dark-surface/90 text-red-500 p-2 rounded-xl hover:scale-105 shadow-sm border border-gray-200 dark:border-gray-700" title="Clear">
                          <i data-lucide="trash-2" class="w-4 h-4"></i>
                      </button>
                  </div>
              </div>

              <!-- Refine Bar (appears after generation) -->
              <div id="refineSectionTnl" class="hidden mt-4 bg-white dark:bg-dark-surface border border-gray-200 dark:border-gray-800 p-4 rounded-xl shadow-sm">
                  <div class="flex flex-col sm:flex-row items-center gap-4 justify-between">
                      <div class="flex items-center gap-3">
                            <div class="p-2 bg-gray-100 dark:bg-dark-surface rounded-md">
                              <i data-lucide="edit-3" class="w-4 h-4 text-gray-600 dark:text-gray-400"></i>
                            </div>
                            <div>
                              <h4 class="text-sm font-medium text-gray-900 dark:text-gray-100">Iterate Design</h4>
                              <p class="text-xs text-gray-500">Use this result as a base for the next generation.</p>
                            </div>
                      </div>
                      <button onclick="enableEditModeTnl()" class="w-full sm:w-auto bg-white dark:bg-gray-950 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-900 dark:text-gray-200 px-5 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2">
                          <span>Refine</span>
                          <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                      </button>
                  </div>
              </div>

              <!-- Editing Indicator -->
              <div id="editingBadgeTnl" class="hidden mt-4 bg-gray-50 dark:bg-dark-surface border border-gray-200 dark:border-gray-800 text-gray-600 dark:text-gray-300 px-4 py-3 rounded-xl flex items-center justify-between shadow-sm">
                  <span class="text-sm flex items-center gap-2">
                      <span class="relative flex h-2 w-2">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-gray-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-gray-900 dark:bg-white"></span>
                      </span>
                      <strong>Edit Mode:</strong> Refining previous result.
                  </span>
                  <button onclick="cancelEditModeTnl()" class="text-xs font-medium underline hover:text-gray-900 dark:hover:text-white">Cancel</button>
              </div>
          </div>
          </main>
        </div>
      <script>
    lucide.createIcons();
    const formTnl = document.getElementById('generateFormTnl');
    const fileInputTnl = document.getElementById('fileInputTnl');
    const promptInputTnl = document.getElementById('promptInputTnl');
    const dropZoneTnl = document.getElementById('dropZoneTnl');
    const uploadPromptTnl = document.getElementById('uploadPromptTnl');
    const filePreviewTnl = document.getElementById('filePreviewTnl');
    
    const placeholderStateTnl = document.getElementById('placeholderStateTnl');
    const loadingStateTnl = document.getElementById('loadingStateTnl');
    const resultImageTnl = document.getElementById('resultImageTnl');
    const imageActionsTnl = document.getElementById('imageActionsTnl');
    
    const refineSectionTnl = document.getElementById('refineSectionTnl');
    const editingBadgeTnl = document.getElementById('editingBadgeTnl');
    const generateBtnTnl = document.getElementById('generateBtnTnl');
    const downloadLinkTnl = document.getElementById('downloadLinkTnl');
    

    let currentImageUrlTnl = null;
    let isEditingTnl = false;

    function setupCustomDropdownsTnl() {
        const containers = document.querySelectorAll('.custom-select-container-tnl');
        
        containers.forEach(container => {
            const trigger = container.querySelector('.dropdown-trigger-tnl');
            const content = container.querySelector('.dropdown-content-tnl');
            const input = container.querySelector('input[type="hidden"]');
            const options = container.querySelectorAll('.dropdown-option-tnl');
            const selectedText = container.querySelector('.selected-text-tnl');

            // Toggle dropdown
            trigger.addEventListener('click', (e) => {
                e.stopPropagation();
                // Close all others
                document.querySelectorAll('.dropdown-content-tnl').forEach(c => {
                    if (c !== content) {
                        c.classList.remove('active');
                        c.classList.add('hidden');
                    }
                });
                
                if (content.classList.contains('hidden')) {
                    content.classList.remove('hidden');
                    // Small delay to allow display:block to apply before opacity transition
                    setTimeout(() => content.classList.add('active'), 10);
                } else {
                    content.classList.remove('active');
                    setTimeout(() => content.classList.add('hidden'), 200);
                }
            });

            // Select option
            options.forEach(option => {
                option.addEventListener('click', () => {
                    const value = option.dataset.value;
                    const text = option.innerText.trim(); // Just text
                    input.value = value;
                    selectedText.innerText = text;
                    
                    // Close dropdown
                    content.classList.remove('active');
                    setTimeout(() => content.classList.add('hidden'), 200);
                });
            });
        });

        // Close when clicking outside
        document.addEventListener('click', () => {
            document.querySelectorAll('.dropdown-content-tnl').forEach(c => {
                c.classList.remove('active');
                setTimeout(() => c.classList.add('hidden'), 200);
            });
        });
    }

    setupCustomDropdownsTnl();


    // --- File Upload Logic ---

    fileInputTnl.addEventListener('change', handleFileSelectTnl);

    dropZoneTnl.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZoneTnl.classList.add('border-gray-900', 'bg-gray-50', 'dark:border-gray-400', 'dark:bg-gray-800');
    });

    dropZoneTnl.addEventListener('dragleave', () => {
        dropZoneTnl.classList.remove('border-gray-900', 'bg-gray-50', 'dark:border-gray-400', 'dark:bg-gray-800');
    });

    dropZoneTnl.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZoneTnl.classList.remove('border-gray-900', 'bg-gray-50', 'dark:border-gray-400', 'dark:bg-gray-800');
        if (e.dataTransfer.files.length) {
            fileInputTnl.files = e.dataTransfer.files;
            handleFileSelectTnl();
        }
    });

    function handleFileSelectTnl() {
        if (isEditingTnl) cancelEditModeTnl(); // Reset edit mode if new file uploaded

        const files = fileInputTnl.files;
        if (files.length > 0) {
            const file = files[0];
            const reader = new FileReader();
            reader.onload = (e) => {
                // Show preview inside dropzone
                uploadPromptTnl.classList.add('opacity-0');
                filePreviewTnl.classList.remove('hidden');
                filePreviewTnl.classList.add('flex');
                filePreviewTnl.innerHTML = `
                    <img src="${e.target.result}" class="w-full h-full object-contain rounded-lg">
                    <button type="button" onclick="clearFileTnl(event)" class="absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full p-1 transition-colors">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                `;
                lucide.createIcons();
            };
            reader.readAsDataURL(file);
        }
    }

    window.clearFileTnl = function(e) {
        e.stopPropagation(); // Prevent opening file dialog
        fileInputTnl.value = '';
        filePreviewTnl.innerHTML = '';
        filePreviewTnl.classList.add('hidden');
        filePreviewTnl.classList.remove('flex');
        uploadPromptTnl.classList.remove('opacity-0');
    };

    formTnl.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // UI Loading State
        const originalBtnContent = generateBtnTnl.innerHTML;
        generateBtnTnl.disabled = true;
        generateBtnTnl.innerHTML = `<div class="loader-tnl mr-2"></div> Processing...`;
        
        placeholderStateTnl.classList.add('hidden');
        resultImageTnl.classList.add('hidden');
        imageActionsTnl.classList.add('hidden');
        refineSectionTnl.classList.add('hidden');
        loadingStateTnl.classList.remove('hidden');

        try {
            const formData = new FormData(formTnl);

            // Handle Edit Mode Logic
            if (isEditingTnl && currentImageUrlTnl) {
                const response = await fetch(currentImageUrlTnl);
                const blob = await response.blob();
                formData.delete('file'); 
                formData.append('file', blob, 'edited_image.png');
            }

            if (!isEditingTnl && fileInputTnl.files.length === 0) {
                throw new Error("Please upload an image to start.");
            }

            const response = await fetch('/create-thumbnail', {
                method: 'POST',
                body: formData
            });

            if (!response.ok) throw new Error('Generation failed');
            
            const data = await response.json();
            
            // Success Handling
            const filename = data.filenames[0];
            currentImageUrlTnl = `/uploads/${filename}`;
            
            resultImageTnl.src = currentImageUrlTnl;
            resultImageTnl.onload = () => {
                loadingStateTnl.classList.add('hidden');
                resultImageTnl.classList.remove('hidden');
                imageActionsTnl.classList.remove('hidden');
                refineSectionTnl.classList.remove('hidden');
                downloadLinkTnl.href = currentImageUrlTnl;
            };

            // Exit edit mode naturally after success
            if(isEditingTnl) cancelEditModeTnl();

        } catch (error) {
            console.error(error);
            loadingStateTnl.classList.add('hidden');
            placeholderStateTnl.classList.remove('hidden');
            // Simple alert for error, could be a toast in a fuller app
            alert(error.message);
        } finally {
            generateBtnTnl.disabled = false;
            generateBtnTnl.innerHTML = originalBtnContent;
            lucide.createIcons(); // Re-init icons in button
        }
    });

    window.enableEditModeTnl = function() {
        if (!currentImageUrlTnl) return;

        isEditingTnl = true;
        
        editingBadgeTnl.classList.remove('hidden');
        refineSectionTnl.classList.add('hidden');
        
        // Clear manual file input to show we are using generated image
        fileInputTnl.value = '';
        
        // Update preview to show source
        uploadPromptTnl.classList.add('opacity-0');
        filePreviewTnl.classList.remove('hidden');
        filePreviewTnl.classList.add('flex');
        filePreviewTnl.innerHTML = `
            <img src="${currentImageUrlTnl}" class="w-full h-full object-contain rounded-lg opacity-80">
            <div class="absolute inset-0 flex items-center justify-center bg-black/10">
                <span class="bg-black/70 text-white text-xs px-2 py-1 rounded font-mono">SOURCE_IMG</span>
            </div>
        `;
        
        promptInputTnl.focus();
        promptInputTnl.placeholder = "Refine this result... (e.g. 'Add more contrast', 'Change background')";
    }

    window.cancelEditModeTnl = function() {
        isEditingTnl = false;
        editingBadgeTnl.classList.add('hidden');
        if(currentImageUrlTnl) refineSectionTnl.classList.remove('hidden');
        
        // Reset preview
        filePreviewTnl.innerHTML = '';
        filePreviewTnl.classList.add('hidden');
        filePreviewTnl.classList.remove('flex');
        uploadPromptTnl.classList.remove('opacity-0');
        
        promptInputTnl.placeholder = "A shocked person holding an object...";
    }

    window.resetUITnl = function() {
        currentImageUrlTnl = null;
        isEditingTnl = false;
        formTnl.reset();
        
        // Reset Dropdown Text to Defaults
        document.querySelectorAll('.custom-select-container-tnl').forEach(c => {
              const options = c.querySelectorAll('.dropdown-option-tnl');
              const triggerText = c.querySelector('.selected-text-tnl');
              if(options.length > 0) triggerText.innerText = options[0].innerText.trim();
              // Reset hidden inputs
              const input = c.querySelector('input[type="hidden"]');
              if(input) input.value = options[0].getAttribute('data-value');
        });

        cancelEditModeTnl();
        
        resultImageTnl.src = '';
        resultImageTnl.classList.add('hidden');
        imageActionsTnl.classList.add('hidden');
        refineSectionTnl.classList.add('hidden');
        placeholderStateTnl.classList.remove('hidden');
    }

      </script>
      </section>
    </main>

    <div
      id="modalOverlay"
      class="relative z-40 hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div class="fixed inset-0 bg-gray-900/80 transition-opacity"></div>
      <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-1 text-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-3xl bg-white text-left  sm:w-full sm:max-w-5xl border border-gray-200 flex flex-col"
          >
            <div class="flex flex-col lg:grid lg:grid-cols-12 h-full">
              <div
                class="lg:col-span-5 bg-gray-50/50 border-b lg:border-b-0 lg:border-r border-gray-200 p-6 lg:p-8 flex flex-col gap-6"
              >
                <div
                  class="group relative w-full overflow-hidden rounded-2xl bg-gray-200 border border-gray-300 shadow-sm aspect-video lg:aspect-square flex items-center justify-center"
                >
                  <img
                    id="modalImg"
                    src=""
                    class="w-full h-full object-cover transition-transform duration-700 hover:scale-105"
                    style="display: none"
                  />

                  <video
                    id="modalVideo"
                    class="w-full h-full object-cover"
                    controls
                    style="display: none"
                  ></video>

                  <div
                    id="imageDownloadBtn"
                    class="absolute top-3 right-3 hidden bg-white/90 hover:bg-white rounded-full p-2 shadow-lg cursor-pointer z-10 transition-opacity"
                  >
                    <svg
                      fill="currentColor"
                      class="w-5 h-5 text-gray-600"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M22.71,6.29a1,1,0,0,0-1.42,0L20,7.59V2a1,1,0,0,0-2,0V7.59l-1.29-1.3a1,1,0,0,0-1.42,1.42l3,3a1,1,0,0,0,.33.21.94.94,0,0,0,.76,0,1,1,0,0,0,.33-.21l3-3A1,1,0,0,0,22.71,6.29ZM19,13a1,1,0,0,0-1,1v.38L16.52,12.9a2.79,2.79,0,0,0-3.93,0l-.7.7L9.41,11.12a2.85,2.85,0,0,0-3.93,0L4,12.6V7A1,1,0,0,1,5,6h8a1,1,0,0,0,0-2H5A3,3,0,0,0,2,7V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V14A1,1,0,0,0,19,13ZM5,20a1,1,0,0,1-1-1V15.43l2.9-2.9a.79.79,0,0,1,1.09,0l3.17,3.17,0,0L15.46,20Zm13-1a.89.89,0,0,1-.18.53L13.31,15l.7-.7a.77.77,0,0,1,1.1,0L18,17.21Z"
                      />
                    </svg>
                  </div>

                  <div
                    id="modalNoImg"
                    class="flex flex-col items-center justify-center text-gray-400 p-6 text-center"
                  >
                    <span class="text-xs font-medium uppercase tracking-wide"
                      >No Media Preview</span
                    >
                  </div>
                </div>
                <div class="flex-1 min-h-0 flex flex-col">
                  <label
                    class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2"
                    >Caption Preview</label
                  >
                  <div
                    class="bg-white rounded-lg p-4 border border-gray-200 shadow-sm flex-1 overflow-y-auto max-h-[200px]"
                  >
                    <div class="flex justify-end mb-3">
                      <button
                        id="copyCaptionBtn"
                        class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-l-xl text-sm text-gray-600 "
                      >
                        <svg
                          class="w-4 h-4 text-gray-600"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M15 1.25H10.9436C9.10583 1.24998 7.65019 1.24997 6.51098 1.40314C5.33856 1.56076 4.38961 1.89288 3.64124 2.64124C2.89288 3.38961 2.56076 4.33856 2.40314 5.51098C2.24997 6.65019 2.24998 8.10582 2.25 9.94357V16C2.25 17.8722 3.62205 19.424 5.41551 19.7047C5.55348 20.4687 5.81753 21.1208 6.34835 21.6517C6.95027 22.2536 7.70814 22.5125 8.60825 22.6335C9.47522 22.75 10.5775 22.75 11.9451 22.75H15.0549C16.4225 22.75 17.5248 22.75 18.3918 22.6335C19.2919 22.5125 20.0497 22.2536 20.6517 21.6517C21.2536 21.0497 21.5125 20.2919 21.6335 19.3918C21.75 18.5248 21.75 17.4225 21.75 16.0549V10.9451C21.75 9.57754 21.75 8.47522 21.6335 7.60825C21.5125 6.70814 21.2536 5.95027 20.6517 5.34835C20.1208 4.81753 19.4687 4.55348 18.7047 4.41551C18.424 2.62205 16.8722 1.25 15 1.25ZM17.1293 4.27117C16.8265 3.38623 15.9876 2.75 15 2.75H11C9.09318 2.75 7.73851 2.75159 6.71085 2.88976C5.70476 3.02502 5.12511 3.27869 4.7019 3.7019C4.27869 4.12511 4.02502 4.70476 3.88976 5.71085C3.75159 6.73851 3.75 8.09318 3.75 10V16C3.75 16.9876 4.38624 17.8265 5.27117 18.1293C5.24998 17.5194 5.24999 16.8297 5.25 16.0549V10.9451C5.24998 9.57754 5.24996 8.47522 5.36652 7.60825C5.48754 6.70814 5.74643 5.95027 6.34835 5.34835C6.95027 4.74643 7.70814 4.48754 8.60825 4.36652C9.47522 4.24996 10.5775 4.24998 11.9451 4.25H15.0549C15.8297 4.24999 16.5194 4.24998 17.1293 4.27117ZM7.40901 6.40901C7.68577 6.13225 8.07435 5.9518 8.80812 5.85315C9.56347 5.75159 10.5646 5.75 12 5.75H15C16.4354 5.75 17.4365 5.75159 18.1919 5.85315C18.9257 5.9518 19.3142 6.13225 19.591 6.40901C19.8678 6.68577 20.0482 7.07435 20.1469 7.80812C20.2484 8.56347 20.25 9.56458 20.25 11V16C20.25 17.4354 20.2484 18.4365 20.1469 19.1919C20.0482 19.9257 19.8678 20.3142 19.591 20.591C19.3142 20.8678 18.9257 21.0482 18.1919 21.1469C17.4365 21.2484 16.4354 21.25 15 21.25H12C10.5646 21.25 9.56347 21.2484 8.80812 21.1469C8.07435 21.0482 7.68577 20.8678 7.40901 20.591C7.13225 20.3142 6.9518 19.9257 6.85315 19.1919C6.75159 18.4365 6.75 17.4354 6.75 16V11C6.75 9.56458 6.75159 8.56347 6.85315 7.80812C6.9518 7.07435 7.13225 6.68577 7.40901 6.40901Z"
                            fill="currentColor"
                          />
                        </svg>
                      </button>
                      <button
                        id="downloadCaptionBtn"
                        class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-r-xl text-sm text-gray-600 "
                      >
                        <svg
                          class="w-5 h-5 text-gray-600"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M5.625 15C5.625 14.5858 5.28921 14.25 4.875 14.25C4.46079 14.25 4.125 14.5858 4.125 15H5.625ZM4.875 16H4.125H4.875ZM19.275 15C19.275 14.5858 18.9392 14.25 18.525 14.25C18.1108 14.25 17.775 14.5858 17.775 15H19.275ZM11.1086 15.5387C10.8539 15.8653 10.9121 16.3366 11.2387 16.5914C11.5653 16.8461 12.0366 16.7879 12.2914 16.4613L11.1086 15.5387ZM16.1914 11.4613C16.4461 11.1347 16.3879 10.6634 16.0613 10.4086C15.7347 10.1539 15.2634 10.2121 15.0086 10.5387L16.1914 11.4613ZM11.1086 16.4613C11.3634 16.7879 11.8347 16.8461 12.1613 16.5914C12.4879 16.3366 12.5461 15.8653 12.2914 15.5387L11.1086 16.4613ZM8.39138 10.5387C8.13662 10.2121 7.66533 10.1539 7.33873 10.4086C7.01212 10.6634 6.95387 11.1347 7.20862 11.4613L8.39138 10.5387ZM10.95 16C10.95 16.4142 11.2858 16.75 11.7 16.75C12.1142 16.75 12.45 16.4142 12.45 16H10.95ZM12.45 5C12.45 4.58579 12.1142 4.25 11.7 4.25C11.2858 4.25 10.95 4.58579 10.95 5H12.45ZM4.125 15V16H5.625V15H4.125ZM4.125 16C4.125 18.0531 5.75257 19.75 7.8 19.75V18.25C6.61657 18.25 5.625 17.2607 5.625 16H4.125ZM7.8 19.75H15.6V18.25H7.8V19.75ZM15.6 19.75C17.6474 19.75 19.275 18.0531 19.275 16H17.775C17.775 17.2607 16.7834 18.25 15.6 18.25V19.75ZM19.275 16V15H17.775V16H19.275ZM12.2914 16.4613L16.1914 11.4613L15.0086 10.5387L11.1086 15.5387L12.2914 16.4613ZM12.2914 15.5387L8.39138 10.5387L7.20862 11.4613L11.1086 16.4613L12.2914 15.5387ZM12.45 16V5H10.95V16H12.45Z"
                            fill="currentColor"
                          />
                        </svg>
                      </button>
                    </div>
                    <pre
                      id="modalContentText"
                      class="whitespace-pre-wrap text-sm leading-relaxed text-gray-600"
                    ></pre>
                    <div
                      class="mt-4 pt-3 border-t border-gray-100 flex flex-wrap gap-2"
                    >
                      <span
                        id="modalHashtags"
                        class="text-sm font-medium text-gray-500 italic"
                      ></span>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="lg:col-span-7 bg-white p-6 lg:p-8 flex flex-col h-full"
              >
                <div class="flex justify-between items-start mb-6">
                  <div>
                    <h3
                      class="text-xl font-bold text-gray-900 tracking-tight"
                      id="modalTitle"
                    >
                      Task Details
                    </h3>
                  </div>
                  <span
                    class="px-2.5 py-1.5 rounded-full bg-white/40 backdrop-blur-xs text-xs font-medium border border-gray-100 text-emerald-600 border-gray-200"
                  >
                    Approved
                  </span>
                </div>
                <div class="flex-1 overflow-y-auto pr-2 custom-scrollbar">
                  <div
                    id="schedulingSection"
                    class="hidden animate-in fade-in slide-in-from-bottom-2 duration-300"
                  >
                    <div class="mb-3 border-b border-gray-100"></div>
                    <div class="space-y-6">
                      <div class="px-4">
                        <label
                          class="block text-xs font-semibold text-gray-500 tracking-wider mb-3"
                          >Select Platforms</label
                        >
                        <div
                          id="platformsList"
                          class="grid grid-cols-1 sm:grid-cols-2 gap-3"
                        ></div>
                      </div>
                      <div
                        id="InstaPstTyp"
                        class="mt-3 hidden flex gap-4 text-sm font-medium text-gray-600"
                      >
                        <label
                          class="block text-xs font-semibold text-gray-500 tracking-wider my-3"
                          >Select Post Type For Instagram</label
                        >
                        <label
                          class="flex items-center gap-2 cursor-pointer group"
                        >
                          <input
                            type="radio"
                            name="InspostType"
                            value="Post"
                            checked=""
                            class="w-4 h-4 text-gray-800 border-gray-300 focus:ring-gray-800"
                          />
                          <span class="group-hover:text-gray-800 transition"
                            >Post</span
                          > </label
                        ><label
                          class="flex items-center gap-2 cursor-pointer group"
                        >
                          <input
                            type="radio"
                            name="InspostType"
                            value="Reel"
                            class="w-4 h-4 text-gray-800 border-gray-300 focus:ring-gray-800"
                          />
                          <span class="group-hover:text-gray-800 transition"
                            >Reel</span
                          > </label
                        ><label
                          class="flex items-center gap-2 cursor-pointer group"
                        >
                          <input
                            type="radio"
                            name="InspostType"
                            value="Story"
                            class="w-4 h-4 text-gray-800 border-gray-300 focus:ring-gray-800"
                          />
                          <span class="group-hover:text-gray-800 transition"
                            >Story</span
                          >
                        </label>
                      </div>

                      <div class="grid grid-cols-1 gap-5">
                        <div>
                          <div
                            class="flex items-center gap-2 mt-1 text-xs text-gray-500"
                          >
                            <label
                              class="block text-xs font-semibold text-gray-500 tracking-wider mb-2"
                              >Publish Date & Time (IST)</label
                            >
                            <svg
                              class="w-4 h-4 mb-2 text-gray-400"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke="currentColor"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M13 10V3L4 14h7v7l9-11h-7z"
                              />
                            </svg>
                            <span class="mb-2"
                              >AI Suggestion:
                              <span
                                id="modalTime"
                                class="font-medium text-gray-700"
                              ></span
                            ></span>
                          </div>
                          <div class="relative">
                            <div
                              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                            >
                              <svg
                                class="h-4 w-4 text-gray-400"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  stroke-width="2"
                                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                                ></path>
                              </svg>
                            </div>
                            <input
                              type="datetime-local"
                              id="scheduledAtInput"
                              class="block w-full rounded-lg border-gray-300 bg-white pl-10 px-4 py-2.5 text-gray-900 shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-sm "
                            />
                          </div>
                        </div>
                      </div>
                      <div
                        id="inswarn"
                        class="hidden text-sm text-amber-500 my-2"
                      >
                        Instagram posting requires an image. Text-only posts are
                        not supported
                      </div>
                      <div>
                        <div hidden id="notesInput"></div>
                      </div>
                    </div>
                  </div>
                  <div
                    id="emptyStatePlaceholder"
                    class="hidden h-32 flex items-center justify-center border-2 border-dashed border-gray-100 rounded-lg"
                  >
                    <span class="text-sm text-gray-400"
                      >Scheduling options not available</span
                    >
                  </div>
                </div>
                <div
                  class="mt-8 pt-4 border-t border-gray-100 flex flex-col-reverse sm:flex-row sm:justify-end gap-3"
                >
                  <button
                    type="button"
                    id="closeModalBtn"
                    class="inline-flex w-full justify-center rounded-xl bg-white px-5 py-2.5 text-sm font-semibold text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:w-auto "
                  >
                    Cancel
                  </button>
                  <button
                    type="button"
                    id="postNowBtn"
                    class="w-full inline-flex gap-2 justify-center items-center rounded-xl bg-gray-100 px-6 py-2.5 text-sm font-semibold text-gray-800 shadow-sm hover:bg-gray-200 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 "
                  >
                    Post Now
                    <i
                      data-lucide="send-horizontal"
                      class="w-4 h-4 mt-[2px]"
                    ></i>
                  </button>
                  <button
                    type="button"
                    id="scheduleBtn"
                    class="hidden w-full inline-flex justify-center items-center rounded-xl bg-gray-600 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 "
                  >
                    Confirm Schedule
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="postUiModalOverlay"
      class="fixed inset-0 z-40 hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-slate-900/60 transition-opacity"
        onclick="closePostUiModal()"
      ></div>
      <div class="fixed inset-0 z-10 overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-2xl bg-white dark:bg-slate-850 text-left shadow-2xl  sm:my-8 w-full max-w-5xl"
            onclick="event.stopPropagation()"
          >
            <div id="modalContent"></div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="postUiModalOverlayGfr"
      class="hidden fixed inset-0 z-[60] bg-slate-900/60 transition-opacity duration-300"
    >
      <div class="fixed inset-0 flex items-center justify-center p-0 sm:p-4">
        <div
          class="bg-white dark:bg-slate-950 w-full h-[100dvh] sm:h-[90vh] sm:max-w-7xl sm:rounded-[2rem] shadow-2xl flex flex-col overflow-hidden ring-1 ring-white/10 relative transition-transform duration-300 scale-100"
        >
          <div
            class="shrink-0 flex items-center justify-between px-5 py-3 border-b border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-950/80 backdrop-blur-md z-20 sm:hidden"
          >
            <h2 class="text-base font-bold text-slate-900 dark:text-white">
              Edit Draft
            </h2>
            <button
              onclick="closePostUiModalGfr()"
              class="p-2 -mr-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>

          <div class="flex flex-col lg:flex-row flex-1 overflow-hidden h-full">
            <div
              class="w-full lg:w-[45%] xl:w-[40%] bg-slate-100 dark:bg-dark-surface/50 flex flex-col border-b lg:border-b-0 lg:border-r border-slate-200 dark:border-slate-800 relative group/preview"
            >
              <div class="hidden sm:flex absolute top-4 left-4 z-30">
                <button
                  onclick="closePostUiModalGfr()"
                  class="p-2.5 bg-white/90 dark:bg-black/50 text-slate-500 dark:text-white hover:text-red-500 rounded-full shadow-lg backdrop-blur-sm  hover:scale-105 active:scale-95 border border-slate-200 dark:border-white/10"
                  title="Close"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </button>
              </div>

              <div class="absolute top-4 right-4 z-30 pointer-events-none">
                <div
                  id="taskStatusGfr"
                  class="px-3 py-1.5 bg-white/90 dark:bg-zinc-800/90 backdrop-blur shadow-sm rounded-full text-[10px] uppercase font-bold tracking-wider text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700"
                >
                  Processing
                </div>
              </div>

              <div
                class="flex-1 p-4 lg:p-8 flex items-center justify-center min-h-[300px] lg:min-h-0 overflow-hidden relative"
              >
                <div
                  id="imagePreviewGfr"
                  class="w-full h-full max-h-full bg-white dark:bg-zinc-800 rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700/50 overflow-hidden relative shadow-sm flex items-center justify-center  hover:border-slate-400"
                >
                  <span
                    class="flex flex-col items-center gap-2 text-slate-400 dark:text-slate-600"
                  >
                    <svg
                      class="w-8 h-8 opacity-50"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                      ></path>
                    </svg>
                    <span class="text-xs font-medium uppercase tracking-wide"
                      >No Preview</span
                    >
                  </span>
                </div>
              </div>

              <div
                class="shrink-0 p-5 bg-white dark:bg-dark-surface border-t border-slate-200 dark:border-slate-800"
              >
                <div class="grid grid-cols-2 gap-4">
                  <div class="space-y-1.5">
                    <label
                      class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest"
                      >Model</label
                    >
                    <div class="relative">
                      <select
                        id="geminiModelSelect"
                        class="w-full pl-3 pr-8 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-semibold text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-slate-900 dark:focus:ring-white focus:border-transparent outline-none appearance-none transition-shadow cursor-pointer hover:bg-slate-100"
                      >
                        <option value="gemini-2.5-flash-image">
                          Gemini 2.5 Flash
                        </option>
                        <option value="gemini-3-pro-image-preview">
                          Gemini 3 Pro
                        </option>
                      </select>
                      <div
                        class="absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"
                      >
                        <svg
                          width="12"
                          height="12"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="M6 9l6 6 6-6" />
                        </svg>
                      </div>
                    </div>
                  </div>
                  <div class="space-y-1.5">
                    <label
                      class="block text-[10px] font-bold text-slate-400 uppercase tracking-widest"
                      >Watermark</label
                    >
                    <div class="relative">
                      <select
                        id="watermarkPos"
                        class="w-full pl-3 pr-8 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-semibold text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-slate-900 dark:focus:ring-white focus:border-transparent outline-none appearance-none transition-shadow cursor-pointer hover:bg-slate-100"
                      >
                        <option value="">None</option>
                        <option value="bottom-right">Bottom Right</option>
                        <option value="bottom-left">Bottom Left</option>
                        <option value="top-left">Top Left</option>
                        <option value="top-right">Top Right</option>
                      </select>
                      <div
                        class="absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"
                      >
                        <svg
                          width="12"
                          height="12"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        >
                          <path d="M6 9l6 6 6-6" />
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              class="w-full lg:w-[55%] xl:w-[60%] flex flex-col bg-white dark:bg-slate-950 overflow-hidden relative"
            >
              <div
                class="hidden sm:flex shrink-0 items-center justify-between px-8 py-6 border-b border-slate-100 dark:border-slate-800/50"
              >
                <div>
                  <h2
                    class="text-xl font-bold text-slate-900 dark:text-white tracking-tight"
                  >
                    Edit Details
                  </h2>
                  <p
                    id="modalTaskIdGfr"
                    class="hidden text-xs font-mono text-slate-400 mt-1"
                  ></p>
                </div>

                <div class="flex items-center gap-3">
                  <button
                    id="btnApproveGfr"
                    class="hidden group relative inline-flex items-center justify-center px-5 py-2 rounded-full text-sm font-semibold text-emerald-600 bg-emerald-50 hover:bg-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:hover:bg-emerald-500/20 "
                  >
                    <svg
                      class="w-4 h-4 mr-2 transition-transform group-hover:scale-110"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 13l4 4L19 7"
                      ></path>
                    </svg>
                    Approve
                  </button>
                </div>
              </div>

              <div
                class="flex-1 overflow-y-auto custom-scrollbar p-6 lg:p-4 space-y-8"
              >
                <div class="flex flex-col space-y-3 relative group/caption">
                  <div class="flex items-center justify-between">
                    <label
                      id="postCaption"
                      class="text-xs font-bold text-slate-900 dark:text-white uppercase tracking-wider flex items-center gap-2"
                    >
                      Caption
                      <span
                        class="text-[10px] font-normal text-slate-400 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded"
                        >Required</span
                      >
                    </label>
                  </div>

                  <div class="relative flex-1">
                    <textarea
                      id="captionGfr"
                      rows="12"
                      class="block w-full p-4 bg-slate-50 dark:bg-dark-surface/30 border border-slate-200 dark:border-slate-800 rounded-2xl text-[15px] leading-relaxed text-slate-700 dark:text-slate-200 placeholder-slate-400 focus:bg-white dark:focus:bg-slate-900 focus:border-slate-300 dark:focus:border-slate-600 focus:ring-4 focus:ring-slate-100 dark:focus:ring-slate-800  resize-none outline-none shadow-sm"
                      placeholder="Write a catchy caption..."
                    ></textarea>

                    <div
                      class="absolute bottom-6 right-6 flex flex-col items-end gap-3 z-30"
                    >
                      <div
                        id="tools-menu"
                        class="flex flex-col items-center gap-2 p-1.5 bg-white dark:bg-slate-800 rounded-full shadow-xl border border-slate-100 dark:border-slate-700  duration-300 ease-spring origin-bottom opacity-0 scale-y-50 translate-y-10 pointer-events-none absolute bottom-16 right-0"
                      >
                        <button
                          title="Make the caption concise"
                          name="concise"
                          class="p-3 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full "
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18px"
                            height="18px"
                            viewBox="0 0 24 24"
                          >
                            <g
                              fill="none"
                              stroke="currentColor"
                              stroke-linecap="round"
                              stroke-width="2"
                            >
                              <path d="m17.5 10.5l2 2M14 14l2 2m-5.5 1.5l2 2" />
                              <path
                                stroke-linejoin="round"
                                d="M10.536 4.678c1.364-1.365 2.047-2.047 2.808-2.363a4.14 4.14 0 0 1 3.17 0c.761.316 1.444.998 2.808 2.363c1.365 1.364 2.047 2.047 2.363 2.808a4.14 4.14 0 0 1 0 3.17c-.316.761-.998 1.444-2.363 2.808l-5.857 5.858c-1.365 1.365-2.048 2.047-2.809 2.363a4.14 4.14 0 0 1-3.17 0c-.761-.316-1.444-.998-2.808-2.363c-1.365-1.364-2.047-2.047-2.363-2.808a4.14 4.14 0 0 1 0-3.17c.316-.761.998-1.444 2.363-2.808z"
                              />
                            </g>
                          </svg>
                        </button>
                        <button
                          title="Make the caption professional"
                          name="professional"
                          class="p-3 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full "
                        >
                          <svg
                            width="18px"
                            height="18px"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M3 11C3 9.11438 3 8.17157 3.58579 7.58579C4.17157 7 5.11438 7 7 7H8H16H17C18.8856 7 19.8284 7 20.4142 7.58579C21 8.17157 21 9.11438 21 11V17C21 18.8856 21 19.8284 20.4142 20.4142C19.8284 21 18.8856 21 17 21H16H8H7C5.11438 21 4.17157 21 3.58579 20.4142C3 19.8284 3 18.8856 3 17V11Z"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linejoin="round"
                            />
                            <path
                              d="M8 21V5C8 3.89543 8.89543 3 10 3H14C15.1046 3 16 3.89543 16 5V21"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linejoin="round"
                            />
                          </svg>
                        </button>
                        <button
                          title="Make the caption formal"
                          name="formal"
                          class="p-3 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full "
                        >
                          <svg
                            width="18px"
                            height="18px"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21"
                              stroke="currentColor"
                              stroke-width="2"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                            />
                          </svg>
                        </button>
                        <button
                          title="Custom Formating"
                          onclick="activateInputMode()"
                          class="p-3 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full "
                        >
                          <svg
                            fill="currentColor"
                            width="18px"
                            height="18px"
                            viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                            <path
                              d="M17.764,2A4.2,4.2,0,0,0,14.77,3.241L3.155,14.855a1,1,0,0,0-.28.55l-.863,5.438a1,1,0,0,0,1.145,1.145L8.6,21.125a1,1,0,0,0,.55-.28L20.759,9.23a4.236,4.236,0,0,0-3-7.23ZM7.96,19.2,4.2,19.8l.6-3.757,8.39-8.391,3.162,3.162ZM19.345,7.816,17.765,9.4,14.6,6.235l1.581-1.58a2.289,2.289,0,0,1,3.161,0,2.234,2.234,0,0,1,0,3.161Z"
                            />
                          </svg>
                        </button>
                      </div>
                      <div class="flex items-center gap-2 relative">
                        <div
                          id="input-container"
                          class="w-0 opacity-0 overflow-hidden  duration-500 ease-spring origin-right bg-white dark:bg-slate-800 rounded-full shadow-xl border border-slate-100 dark:border-slate-700 flex items-center h-12"
                        >
                          <input
                            type="text"
                            id="chat-input"
                            placeholder="Ask anything..."
                            class="w-full h-full px-5 py-3 bg-transparent text-slate-700 dark:text-slate-200 min-w-[280px] outline-none ring-0 focus:ring-0 border-none text-sm"
                          />
                        </div>
                        <button
                          title="Use AI to format the Caption"
                          id="main-btn"
                          onclick="handleMainClick()"
                          class="group relative w-12 h-12 bg-slate-900 hover:bg-black dark:bg-white dark:hover:bg-slate-200 text-white dark:text-slate-900 rounded-full shadow-lg z-10 flex items-center justify-center overflow-hidden transition-transform active:scale-95"
                        >
                          <div
                            class="absolute inset-0 flex items-center justify-center  duration-300 ease-spring rotate-0 scale-100 opacity-100 group-[.input-mode]:-rotate-90 group-[.input-mode]:scale-0 group-[.input-mode]:opacity-0 group-[.menu-open]:rotate-45"
                          >
                            <svg
                              width="20"
                              height="20"
                              viewBox="0 0 24 24"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M12.9914 2.86904C12.9914 2.86899 12.9914 2.86895 12.9914 2.86891C12.9256 2.37165 12.5016 2 12 2C11.4983 2 11.0743 2.37171 11.0086 2.86904L11.0086 2.86932L11.0085 2.86992L11.0075 2.87704L11.0029 2.91013C10.9985 2.94035 10.9917 2.98656 10.9822 3.04699C10.9633 3.16792 10.9339 3.34537 10.8927 3.56523C10.81 4.00611 10.6812 4.61161 10.4967 5.27082C10.1127 6.64363 9.5417 8.04408 8.79289 8.79289C8.04408 9.5417 6.64363 10.1127 5.27082 10.4967C4.61161 10.6812 4.00611 10.81 3.56523 10.8927C3.34537 10.9339 3.16792 10.9633 3.04699 10.9822C2.98656 10.9917 2.94035 10.9985 2.91013 11.0029L2.87704 11.0075L2.86992 11.0085L2.86932 11.0086C2.86923 11.0086 2.86913 11.0086 2.86904 11.0086C2.86899 11.0086 2.86895 11.0086 2.86891 11.0086C2.37165 11.0744 2 11.4984 2 12C2 12.5017 2.37171 12.9257 2.86904 12.9914L2.86932 12.9914L2.86992 12.9915L2.87704 12.9925L2.91013 12.9971C2.94035 13.0015 2.98656 13.0083 3.04699 13.0178C3.16792 13.0367 3.34537 13.0661 3.56523 13.1073C4.00611 13.19 4.61161 13.3188 5.27082 13.5033C6.64363 13.8873 8.04408 14.4583 8.79289 15.2071C9.5417 15.9559 10.1127 17.3564 10.4967 18.7292C10.6812 19.3884 10.81 19.9939 10.8927 20.4348C10.9339 20.6546 10.9633 20.8321 10.9822 20.953C10.9917 21.0134 10.9985 21.0596 11.0029 21.0899L11.0075 21.123L11.0085 21.1301L11.0086 21.1307C11.0086 21.1308 11.0086 21.1309 11.0086 21.131C11.0086 21.131 11.0086 21.131 11.0086 21.131C11.0743 21.6283 11.4983 22 12 22C12.5017 22 12.9257 21.6283 12.9914 21.131L12.9914 21.1307L12.9915 21.1301L12.9925 21.123L12.9971 21.0899C13.0015 21.0596 13.0083 21.0134 13.0178 20.953C13.0367 20.8321 13.0661 20.6546 13.1073 20.4348C13.19 19.9939 13.3188 19.3884 13.5033 18.7292C13.8873 17.3564 14.4583 15.9559 15.2071 15.2071C15.9559 14.4583 17.3564 13.8873 18.7292 13.5033C19.3884 13.3188 19.9939 13.19 20.4348 13.1073C20.6546 13.0661 20.8321 13.0367 20.953 13.0178C21.0134 13.0083 21.0596 13.0015 21.0899 12.9971L21.123 12.9925L21.1301 12.9915L21.1307 12.9914C21.1308 12.9914 21.1309 12.9914 21.131 12.9914C21.131 12.9914 21.131 12.9914 21.131 12.9914C21.6283 12.9257 22 12.5017 22 12C22 11.4983 21.6283 11.0743 21.131 11.0086L21.1307 11.0086L21.1301 11.0085L21.123 11.0075L21.0899 11.0029C21.0596 10.9985 21.0134 10.9917 20.953 10.9822C20.8321 10.9633 20.6546 10.9339 20.4348 10.8927C19.9939 10.81 19.3884 10.6812 18.7292 10.4967C17.3564 10.1127 15.9559 9.5417 15.2071 8.79289C14.4583 8.04408 13.8873 6.64363 13.5033 5.27082C13.3188 4.61161 13.19 4.00611 13.1073 3.56523C13.0661 3.34537 13.0367 3.16792 13.0178 3.04699C13.0083 2.98656 13.0015 2.94035 12.9971 2.91013L12.9925 2.87704L12.9915 2.86992L12.9914 2.86932C12.9914 2.86923 12.9914 2.86913 12.9914 2.86904ZM16.8722 12C15.7644 11.5928 14.6021 11.0163 13.7929 10.2071C12.9837 9.39792 12.4072 8.23564 12 7.12776C11.5928 8.23564 11.0163 9.39792 10.2071 10.2071C9.39792 11.0163 8.23564 11.5928 7.12776 12C8.23564 12.4072 9.39792 12.9837 10.2071 13.7929C11.0163 14.6021 11.5928 15.7644 12 16.8722C12.4072 15.7644 12.9837 14.6021 13.7929 13.7929C14.6021 12.9837 15.7644 12.4072 16.8722 12Z"
                                fill="currentColor"
                              />
                            </svg>
                          </div>
                          <div
                            class="absolute inset-0 flex items-center justify-center  duration-300 ease-spring rotate-90 scale-0 opacity-0 group-[.input-mode]:rotate-0 group-[.input-mode]:scale-100 group-[.input-mode]:opacity-100"
                          >
                            <svg
                              width="20"
                              height="20"
                              viewBox="0 0 24 24"
                              fill="none"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M12 3C12.2652 3 12.5196 3.10536 12.7071 3.29289L19.7071 10.2929C20.0976 10.6834 20.0976 11.3166 19.7071 11.7071C19.3166 12.0976 18.6834 12.0976 18.2929 11.7071L13 6.41421V20C13 20.5523 12.5523 21 12 21C11.4477 21 11 20.5523 11 20V6.41421L5.70711 11.7071C5.31658 12.0976 4.68342 12.0976 4.29289 11.7071C3.90237 11.3166 3.90237 10.6834 4.29289 10.2929L11.2929 3.29289C11.4804 3.10536 11.7348 3 12 3Z"
                                stroke="currentColor"
                                stroke-width=".5"
                                fill="currentColor"
                              />
                            </svg>
                          </div>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div class="space-y-2">
                    <label
                      class="text-xs font-bold text-slate-900 dark:text-white uppercase tracking-wider"
                      >Hashtags</label
                    >
                    <input
                      id="hashtagsGfr"
                      class="w-full p-3.5 bg-slate-50 dark:bg-dark-surface/30 border border-slate-200 dark:border-slate-800 rounded-xl text-sm font-mono text-emerald-600 dark:text-emerald-400 placeholder-slate-400 focus:bg-white dark:focus:bg-slate-900 focus:border-slate-300 focus:ring-4 focus:ring-slate-100 dark:focus:ring-slate-800  outline-none"
                      placeholder='["#tag"]'
                    />
                  </div>
                  <div class="space-y-2">
                    <label
                      class="text-xs font-bold text-slate-900 dark:text-white uppercase tracking-wider"
                      >Image Prompt</label
                    >
                    <textarea
                      id="imagePromptGfr"
                      rows="3"
                      class="w-full p-3.5 bg-slate-50 dark:bg-dark-surface/30 border border-slate-200 dark:border-slate-800 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-400 placeholder-slate-400 focus:bg-white dark:focus:bg-slate-900 focus:border-slate-300 focus:ring-4 focus:ring-slate-100 dark:focus:ring-slate-800  outline-none resize-none overflow-hidden min-h-[50px]"
                    ></textarea>
                  </div>
                </div>

                <div class="h-20 sm:hidden"></div>
              </div>

              <div
                class="shrink-0 p-5 bg-white dark:bg-slate-950 border-t border-slate-100 dark:border-slate-800/50 z-20"
              >
                <div class="flex items-center gap-3 w-full">
                  <div class="w-full flex gap-3 flex-row-reverse">
                    <button
                      id="btnSaveGfr"
                      class="text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 px-3 sm:px-4 py-2 sm:py-2.5 rounded-xl border border-slate-300 dark:border-slate-600  duration-200 inline-flex items-center gap-2 hover:shadow-md"
                    >
                      Save Changes
                    </button>

                    <button
                      id="btnRegenGfr"
                      class="hidden text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-200 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 px-3 sm:px-4 py-2 sm:py-2.5 rounded-xl border border-slate-300 dark:border-slate-600  duration-200 inline-flex items-center gap-2 hover:shadow-md"
                    >
                      Regenerate Image
                    </button>

                    <button
                      id="btnDeleteGfr"
                      class="p-3.5 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl  border border-transparent hover:border-red-100 dark:hover:border-red-500/20"
                      title="Delete Draft"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      >
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path
                          d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>

                <button
                  id="btnApproveMobileGfr"
                  class="sm:hidden mt-3 w-full py-3.5 rounded-xl text-sm font-bold text-white bg-emerald-600 hover:bg-emerald-700 shadow-md "
                >
                  Approve Draft
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="noti-capsule"
      class="fixed top-8 left-1/2 -translate-x-1/2 z-50 flex items-center bg-white border border-gray-200 rounded-full shadow-2xl shadow-black/50 opacity-0 -translate-y-10  duration-500 ease-elastic pointer-events-none"
    >
      <div class="relative w-12 h-12 flex items-center justify-center shrink-0">
        <div id="noti-icon" class="text-gray-800"></div>
      </div>
      <div
        id="noti-text-wrapper"
        class="overflow-hidden max-w-0 opacity-0  duration-500 ease-smooth"
      >
        <div
          id="noti-message"
          class="pr-6 pl-1 text-sm font-semibold whitespace-nowrap text-gray-800"
        ></div>
      </div>
    </div>

    <div
      id="modalOverlayMnl"
      class="fixed inset-0 bg-black/60 hidden z-40 transition-opacity duration-300 opacity-0 flex items-center justify-center"
    >
      <div
        id="modalContentMnl"
        class="bg-white dark:bg-dark-surface w-full max-w-full h-full shadow-2xl transform scale-90  duration-300 flex flex-col overflow-hidden"
      >
        <div
          class="px-6 py-4 border-b border-gray-100 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-dark-surface z-20"
        >
          <div class="flex items-center gap-4">
            <h2 class="text-xl font-bold text-gray-900 dark:text-white">Create Post</h2>
          </div>
          <div class="flex items-center gap-3">
            <button
              class="flex items-center gap-2 text-sm font-medium text-brand bg-brand/5 px-3 py-1.5 rounded-xl border border-brand/20 dark:text-gray-200 dark:bg-zinc-800 dark:border-gray-600"
            >
              <svg
                class="w-4 h-4"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                ></path>
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                ></path>
              </svg>
              Preview
            </button>
            <button
              id="closeBtnMnl"
              class="p-2 ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-800 text-gray-400 dark:text-slate-400 hover:text-gray-600 dark:hover:text-slate-200 "
            >
              <svg
                class="w-6 h-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
        </div>

        <!-- Skeleton Loading State -->
        <div
          id="skeletonLoaderMnl"
          class="hidden flex flex-1 overflow-hidden bg-white dark:bg-dark-surface"
        >
          <!-- Left Panel Skeleton -->
          <div class="w-7/12 flex flex-col border-r border-gray-100 dark:border-slate-800 p-6">
            <!-- Avatar & Platform Skeleton -->
            <div class="flex items-start gap-4 mb-6">
              <div class="w-12 h-12 rounded-full skeleton dark:bg-slate-800"></div>
              <div class="flex-1 space-y-3">
                <div class="flex gap-2">
                  <div class="h-8 w-24 rounded-full skeleton dark:bg-slate-800"></div>
                  <div class="h-8 w-20 rounded-full skeleton dark:bg-slate-800"></div>
                  <div class="h-8 w-20 rounded-full skeleton dark:bg-slate-800"></div>
                </div>
                <div class="flex gap-4">
                  <div class="h-4 w-12 rounded skeleton dark:bg-slate-800"></div>
                  <div class="h-4 w-12 rounded skeleton dark:bg-slate-800"></div>
                </div>
              </div>
            </div>
            <!-- Textarea Skeleton -->
            <div class="rounded-xl border border-gray-200 dark:border-slate-700 p-4 space-y-3">
              <div class="h-4 skeleton dark:bg-slate-800 rounded w-3/4"></div>
              <div class="h-4 skeleton dark:bg-slate-800 rounded w-full"></div>
              <div class="h-4 skeleton dark:bg-slate-800 rounded w-5/6"></div>
              <div class="h-4 skeleton dark:bg-slate-800 rounded w-2/3"></div>
              <div class="h-4 skeleton dark:bg-slate-800 rounded w-1/2"></div>
            </div>
            <!-- Button Bar Skeleton -->
            <div
              class="flex items-center justify-between mt-4 p-3 border-t border-gray-100 dark:border-slate-800"
            >
              <div class="flex gap-2">
                <div class="w-9 h-9 rounded-full skeleton dark:bg-slate-800"></div>
                <div class="w-9 h-9 rounded-full skeleton dark:bg-slate-800"></div>
                <div class="w-9 h-9 rounded-full skeleton dark:bg-slate-800"></div>
              </div>
              <div class="h-6 w-16 rounded skeleton dark:bg-slate-800"></div>
            </div>
          </div>
          <!-- Right Panel Skeleton -->
          <div class="w-5/12 bg-gray-50 dark:bg-slate-950 p-4 flex flex-col gap-4">
            <div class="h-8 skeleton dark:bg-slate-800 rounded w-32"></div>
            <div class="flex-1 flex justify-center items-center">
              <div
                class="w-full max-w-[300px] aspect-square skeleton dark:bg-slate-800 rounded-2xl"
              ></div>
            </div>
          </div>
        </div>

        <div
          id="modalContentAreaMnl"
          class="hidden flex flex-1 overflow-hidden bg-white dark:bg-dark-surface"
        >
          <div
            class="w-7/12 flex flex-col border-r border-gray-100 dark:border-slate-800 overflow-y-auto custom-scrollbar"
          >
            <div class="p-6 pb-2">
              <div class="flex items-start gap-4 mb-6">
                <div class="relative">
                  <div
                    id="UserDpLg"
                    class="w-12 h-12 rounded-full bg-gradient-to-tr from-yellow-400 to-pink-600 p-[2px]"
                  >
                    <img
                      src="https://www.gravatar.com/avatar/0?d=mp"
                      class="w-full h-full rounded-full border-2 border-white dark:border-slate-900 object-cover"
                      alt="User"
                    />
                  </div>
                  <div id="activePlatformIcon"
                    class="absolute -bottom-1 -right-1 bg-white dark:bg-gray-200 rounded-full p-1 shadow-sm border border-gray-100 dark:border-slate-300"
                  >
                    <div class="w-4 h-4 bg-gray-200 dark:bg-slate-600 rounded-full"></div>
                  </div>
                </div>

                <div class="flex-1">
                  <div
                    id="platform-selector"
                    class="flex flex-wrap gap-2 mb-3"
                  ></div>
                  <div
                    id="post-type-selector"
                    class="flex gap-4 text-sm font-medium text-gray-600 dark:text-slate-400"
                  ></div>
                </div>
              </div>

              <div
                class="border border-gray-200 dark:border-slate-700 rounded-xl shadow-sm focus-within:ring-0  bg-white dark:bg-dark-surface"
              >
                <textarea
                  required
                  id="captionMnl"
                  name="caption"
                  rows="5"
                  class="w-full p-3 border-none text-gray-800 dark:text-slate-200 text-lg placeholder-gray-400 dark:placeholder-slate-500 focus:outline-none resize-none rounded-t-xl bg-transparent"
                  placeholder="What's on your mind?"
                ></textarea>

                <div id="inputMediaPreview" class="px-4 hidden mb-4">
                  <div class="relative w-fit group">
                    <div
                      id="inputMediaContainer"
                      class="h-16 w-16 rounded-lg border border-gray-100 dark:border-slate-700 shadow-sm overflow-hidden bg-gray-50 dark:bg-slate-800 flex items-center justify-center relative"
                    >
                      <img
                        id="inputMediaImg"
                        src=""
                        class="h-full w-full object-cover hidden"
                      />
                      <video
                        id="inputMediaVideo"
                        src=""
                        class="h-full w-full object-cover hidden"
                      ></video>

                      <div
                        id="mediaCountOverlay"
                        class="absolute inset-0 bg-black/50 flex items-center justify-center text-white font-bold text-xs hidden"
                      >
                        +0
                      </div>
                    </div>

                    <button
                      id="removeMediaBtn"
                      class="absolute -top-2 -right-2 bg-gray-800 text-white rounded-full p-1 hover:bg-black shadow-md z-10"
                    >
                      <svg
                        class="w-3 h-3"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M6 18L18 6M6 6l12 12"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>

                <div
                  class="relative flex items-center justify-between px-3 py-2 border-t border-gray-100 dark:border-slate-700 bg-gray-50/50 dark:bg-slate-800/50 rounded-b-xl"
                >
                  <div class="flex items-center gap-1">
                    <button
                      class="p-2 text-gray-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 rounded-full transition"
                      title="Add Media"
                      onclick="document.getElementById('fileInputMnl').click()"
                    >
                      <svg
                        class="w-5 h-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
                        ></path>
                      </svg>
                    </button>

                    <button
                      id="emojiBtnMnl"
                      class="p-2 text-gray-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 rounded-full transition relative"
                      title="Add Emoji"
                    >
                      <svg
                        class="w-5 h-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                        ></path>
                      </svg>
                    </button>

                    <button
                      id="hashtagBtnMnl"
                      class="p-2 text-gray-500 dark:text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 rounded-full transition"
                      title="Hashtags"
                    >
                      <svg
                        class="w-5 h-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"
                        ></path>
                      </svg>
                    </button>
                  </div>

                  <span
                    id="charCountMnl"
                    class="text-xs text-gray-400 font-mono bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 px-2 py-1 rounded"
                    >0/2200</span
                  >

                  <div
                    id="emojiPickerMnl"
                    class="hidden absolute bottom-12 left-2 bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 shadow-xl rounded-lg p-2 w-64 z-40"
                  >
                    <div
                      class="grid grid-cols-6 gap-1 h-48 overflow-y-auto custom-scrollbar"
                      id="emojiGridMnl"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <input
              id="fileInputMnl"
              name="file"
              type="file"
              accept="image/*,video/*"
              multiple
              class="hidden"
            />
            <input type="hidden" id="hashtagsMnl" name="hashtags" />
            <input type="hidden" id="notesMnl" name="notes" />
            <input type="hidden" id="platformIdMnl" name="platform_id" />
            <div class="w-full p-5">
              <div
                class="w-full mx-auto py-5 px-6 text-center bg-white dark:bg-slate-800/50 border border-gray-200 dark:border-slate-700 rounded-3xl shadow-sm"
              >
                <p
                  class="text-gray-600 dark:text-slate-400 mb-5 text-sm md:text-md leading-relaxed font-light"
                >
                  Transform abstract concepts into
                  <span class="text-gray-900 dark:text-white font-semibold">publish-ready</span>
                  social assets. AI-generated designs and captions in seconds.
                </p>

                <button
                  onclick="openPromptModal()"
                  class="group relative inline-flex items-center justify-center overflow-hidden rounded-full bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 px-8 py-2 font-medium text-gray-800 dark:text-white  duration-300 hover:bg-gray-200 dark:hover:bg-slate-600 hover:scale-[1.02] active:scale-95"
                >
                  <span class="relative z-10 mr-3 text-lg"
                    >Create New Post</span
                  >

                  <svg
                    class="relative z-10 transition-transform duration-300 group-hover:translate-x-1.5"
                    xmlns="http://www.w3.org/2000/svg"
                    width="22"
                    height="22"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                  </svg>

                  <div
                    class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"
                  ></div>
                </button>
              </div>
            </div>
          </div>

          <div class="w-5/12 bg-gray-50 dark:bg-slate-950 border-l border-gray-200 dark:border-slate-800 flex flex-col">
            <div
              class="p-2 border-b border-gray-200 dark:border-slate-800 bg-white/50 dark:bg-dark-surface/50 sticky top-0 z-10"
            >
              <h3
                id="preview-title"
                class="text-gray-700 dark:text-slate-300 flex items-center gap-2"
              >
                <span class="text-gray-500 dark:text-slate-400">Preview</span>
                <svg
                  class="w-4 h-4 text-gray-300 ml-auto cursor-pointer hover:text-gray-500 dark:hover:text-slate-300"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  ></path>
                </svg>
              </h3>
            </div>

            <div
              class="flex-1 dark:bg-dark-surface overflow-y-auto p-4 flex justify-center items-start"
            >
              <div
                id="previewMnl"
                class="w-full max-w-[380px]  duration-300"
              ></div>
            </div>
          </div>
        </div>

        <div
          class="px-6 py-4 border-t border-gray-100 dark:border-slate-800 bg-white dark:bg-dark-surface flex justify-between items-center z-20"
        >
          <div class="flex items-center gap-4"></div>

          <div class="flex gap-0 shadow-sm rounded-lg">
            <button
              id="saveAsDraftBtn"
              class="bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-slate-200 px-4 py-2 text-sm font-medium rounded-l-lg hover:bg-gray-50 dark:hover:bg-slate-700 flex items-center gap-2 "
            >
              Save as draft
            </button>
            <button
              id="submitBtnMnl"
              class="bg-gray-900 dark:bg-white text-gray-50 dark:text-gray-900 px-6 py-2 text-sm font-medium rounded-r-lg hover:bg-black dark:hover:bg-gray-200 transition shadow-sm"
            >
              Schedule Post
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="globalConfirmModal" class="hidden fixed inset-0 z-[999] flex items-center justify-center px-4">
  <!-- Backdrop -->
  <div class="absolute inset-0 bg-slate-900/40 dark:bg-black/60 transition-opacity"></div>

  <!-- Card -->
  <div id="globalConfirmCard" class="relative w-full max-w-sm p-4 rounded-3xl bg-white dark:bg-zinc-900 shadow-2xl dark:shadow-black/40 border border-transparent dark:border-zinc-800 transform duration-300">
    <div class="flex flex-col items-center text-center">

      <div
        class="w-12 h-12 mb-2 flex items-center justify-center rounded-3xl
               bg-slate-50 dark:bg-zinc-800
               text-slate-900 dark:text-zinc-100"
      >
        <i data-lucide="help-circle" class="w-8 h-8"></i>
      </div>

      <!-- Title -->
      <h3
        id="globalConfirmTitle"
        class="text-2xl font-semibold tracking-tight
               text-slate-900 dark:text-zinc-100"
      >
        Are you sure?
      </h3>

      <p
        id="globalConfirmText"
        class="mt-3 mb-8 text-sm leading-relaxed
               text-slate-500 dark:text-zinc-400"
      >
        This action cannot be undone.
      </p>

      <div class="flex gap-3 w-full">
        <button
          id="globalConfirmCancel"
          class="flex-1 py-3 text-sm font-semibold rounded-2xl
                 bg-slate-100 text-slate-600 hover:bg-slate-200
                 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700
                 transition-colors"
        >
          Cancel
        </button>

        <button
          id="globalConfirmBtn"
          class="flex-1 py-3 text-sm font-semibold rounded-2xl
                 bg-slate-900 text-white hover:bg-black
                 dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-white
                 shadow-lg shadow-slate-200 dark:shadow-black/30
                 transition-colors"
        >
          Confirm
        </button>
      </div>

    </div>
  </div>
</div>


  <div id="promptModal" class="hidden fixed inset-0 z-50 flex items-center justify-center  bg-black/20 dark:bg-black/60  backdrop-blur-sm  fade-in-scale">
  <div class="relative w-full max-w-4xl mx-4 p-6 rounded-2xl bg-white dark:bg-zinc-900 shadow-2xl dark:shadow-black/40 border border-transparent dark:border-zinc-800">
  <button onclick="closePromptModal()" class="absolute top-6 right-6 p-2 rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-zinc-400 dark:hover:text-zinc-100 dark:hover:bg-zinc-800 transition">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" > <line x1="18" y1="6" x2="6" y2="18"></line> <line x1="6" y1="6" x2="18" y2="18"></line></svg>
  </button>
  <h3 class="text-2xl font-bold mb-3 tracking-tight text-slate-900 dark:text-zinc-100">Start New Project</h3>
  <p class="mb-6 text-gray-500 dark:text-zinc-400" > What would you like to create today? Be descriptive for better results.</p>
  <textarea id="promptInput" rows="4" placeholder="Ex: A launch announcement for our new eco-friendly sneaker line, minimalist style, green and white color palette..." class="w-full p-5 mb-4 rounded-2xl resize-none text-base shadow-inner bg-gray-50 border border-gray-200 text-slate-900 focus:outline-none focus:ring-2 focus:ring-black/5 focus:border-gray-300 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-100 dark:placeholder:text-zinc-500 dark:focus:ring-white/10 dark:focus:border-zinc-600"></textarea>
  <div class="w-full flex justify-end"><button onclick="startGeneration()" id="generateBtn" class="px-5 py-3 rounded-full font-medium text-base bg-black text-white hover:bg-gray-800 dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-white shadow-lg shadow-black/10 dark:shadow-black/30 transition flex items-center gap-2" > Generate Assets</button></div>
  </div>
  </div>


    <div
      id="resultsView"
      class="hidden inset-view backdrop-blur-sm fade-in-scale flex flex-col"
    >
      <div class="max-w-5xl mx-auto w-full px-8 py-12">
        <div class="flex items-center justify-between mb-2">
          <h1 class="text-3xl font-bold tracking-tight text-gray-900">
            Review Generated Assets
          </h1>
        </div>
        <p class="text-gray-500">
          We've tailored these designs and copy based on your specific
          requirements.
        </p>
      </div>

      <div class="max-w-5xl mx-auto w-full px-8 grid gap-16 pb-32">
        <section>
          <div
            class="flex justify-between items-end mb-6 border-b border-gray-100 pb-4"
          >
            <h2
              class="text-base font-medium text-gray-900 flex items-center gap-2"
            >
              Visual Selection
            </h2>
          </div>

          <div
            id="designsGrid"
            class="grid grid-cols-2 md:grid-cols-3 gap-x-8 gap-y-12"
          ></div>
        </section>

        <section>
          <div
            class="flex justify-between items-end mb-6 border-b border-gray-100 pb-4"
          >
            <h2
              class="text-base font-medium text-gray-900 flex items-center gap-2"
            >
              Caption Refinement
            </h2>

            <button
              onclick="regenerateCaption()"
              id="regenCaptionBtn"
              class="group flex items-center gap-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 disabled:opacity-50 transition"
            >
              <svg
                class="group-hover:rotate-180 transition-transform duration-500"
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"
                ></path>
                <path d="M3 3v5h5"></path>
                <path
                  d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"
                ></path>
                <path d="M16 16h5v5"></path>
              </svg>
              Regenerate
            </button>
          </div>

          <div class="relative group">
            <textarea
              id="captionArea"
              rows="6"
              class="w-full p-6 border border-gray-200 rounded-3xl text-gray-800 text-sm leading-7 focus:outline-none focus:bg-white focus:ring-2 focus:ring-black/5  resize-none font-medium"
            ></textarea>

            <div
              id="captionShimmer"
              class="hidden absolute inset-0 bg-white z-10 p-6 space-y-4 rounded-xl border border-gray-100"
            >
              <div class="h-3 bg-gray-200 rounded w-3/4 skeleton"></div>
              <div class="h-3 bg-gray-200 rounded w-full skeleton"></div>
              <div class="h-3 bg-gray-200 rounded w-5/6 skeleton"></div>
              <div class="h-3 bg-gray-200 rounded w-4/5 skeleton"></div>
            </div>
          </div>
        </section>
      </div>

      <div
        class="sticky bottom-0 left-0 right-0 bg-white/50 backdrop-blur-md p-4 z-50 rounded-b-3xl"
      >
        <div class="max-w-5xl mx-auto flex justify-between items-center px-4">
          <button
            onclick="closeResultsView()"
            class="flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-black transition"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M15 18l-6-6 6-6" />
            </svg>
            Discard & Exit
          </button>

          <div class="flex gap-3">
            <button
              onclick="openSaveModal()"
              class="px-6 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100 transition"
            >
              Save Draft
            </button>
            <button
              id="useDesignBtn"
              onclick="useSelectedDesign()"
              class="bg-black text-white px-8 py-2.5 rounded-full text-sm font-medium hover:bg-gray-800 transition shadow-lg flex items-center gap-2"
            >
              Use This Design
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M5 12h14M12 5l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      id="saveModal"
      class="hidden fixed inset-0 z-[1001] bg-black/60 flex items-center justify-center fade-in-scale"
    >
      <div
        class="bg-white rounded-2xl shadow-sm p-6 w-full max-w-4xl mx-4 relative"
      >
        <button
          onclick="closeSaveModal()"
          class="absolute top-6 right-6 p-2 rounded-full hover:bg-gray-100 transition"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>

        <h3 class="text-2xl font-bold mb-6 tracking-tight">Save as Template</h3>

        <div class="space-y-5">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Template Name</label
            >
            <input
              type="text"
              id="save-name"
              placeholder="Summer Sale 2025"
              class="w-full p-3 font-light border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-black/5 focus:border-gray-300 "
            />
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Type</label
              >
              <div class="relative">
                <select
                  id="save-type"
                  class="w-full p-3 font-light border border-gray-200 rounded-xl appearance-none focus:outline-none focus:ring-2 focus:ring-black/5"
                >
                  <option value="Instagram">Instagram</option>
                  <option value="YouTube">YouTube</option>
                  <option value="TikTok">TikTok</option>
                  <option value="Facebook">Facebook</option>
                </select>
                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500"
                >
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    ></path>
                  </svg>
                </div>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Category</label
              >
              <div class="relative">
                <select
                  id="save-category"
                  class="w-full p-3 font-light border border-gray-200 rounded-xl appearance-none focus:outline-none focus:ring-2 focus:ring-black/5"
                >
                  <option value="Business">Business</option>
                  <option value="Charity">Charity</option>
                  <option value="Fashion">Fashion</option>
                  <option value="Quote">Quote</option>
                  <option value="Other">Other</option>
                </select>
                <div
                  class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500"
                >
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    ></path>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Style</label
            >
            <div class="relative">
              <select
                id="save-style"
                class="w-full p-3 bg-gray-50 border border-gray-200 rounded-xl appearance-none focus:outline-none focus:ring-2 focus:ring-black/5"
              >
                <option value="Minimal">Minimal</option>
                <option value="Modern">Modern</option>
                <option value="Bold">Bold</option>
                <option value="Retro">Retro</option>
              </select>
              <div
                class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500"
              >
                <svg
                  class="w-4 h-4"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  ></path>
                </svg>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-8 flex justify-end gap-3">
          <button
            onclick="closeSaveModal()"
            class="px-5 py-2.5 rounded-full text-sm font-medium text-gray-600 hover:bg-gray-100 transition"
          >
            Cancel
          </button>
          <button
            onclick="submitSaveTemplate()"
            id="saveSubmitBtn"
            class="bg-black text-white px-6 py-2.5 rounded-full text-sm font-medium hover:bg-gray-800 transition shadow-lg flex items-center gap-2"
          >
            Save Template
          </button>
        </div>
      </div>
    </div>

        <div id="popupModalCft" class="relative z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900/60 dark:bg-black/80 backdrop-blur-sm transition-opacity"></div>

        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                
                <div class="relative transform overflow-hidden rounded-3xl bg-white dark:bg-zinc-900 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-xl border border-gray-100 dark:border-gray-800">
                    
                    <div class="bg-white dark:bg-zinc-900 px-6 py-4">
                        <div class="flex flex-col items-center text-center">
                            <h3 class="text-xl font-medium leading-6 text-gray-900 dark:text-white">Fetch Company Profile</h3>
                            <div class="mt-2 max-w-sm">
                                <p class="text-sm text-gray-500 dark:text-gray-400">
                                    Enter a website URL. Our AI will analyze the site and use that structured profile for prompt refining.
                                </p>
                            </div>
                        </div>

                        <div class="mt-8">
                            <div class="relative">
                                <input id="modalInputCft" type="url" class="block w-full rounded-xl border-0 py-3 px-4 pl-12 text-gray-900 dark:text-white dark:bg-zinc-800 ring-1 ring-inset ring-gray-200 dark:ring-gray-700 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-gray-600 sm:text-sm sm:leading-6 transition-all" placeholder="https://example.com">
                                <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
                                    <i data-lucide="globe" class="w-5 h-5 text-gray-400"></i>
                                </div>
                            </div>
                            <div id="modalErrCft" class="mt-2 text-sm text-red-600 dark:text-red-400 h-5 text-center font-medium"></div>
                        </div>
                    </div>
                    
                    <div class="bg-zinc-50 dark:bg-zinc-800/50 px-6 py-4 sm:flex sm:flex-row-reverse sm:px-8 gap-3 border-t border-gray-100 dark:border-gray-800">
                        <button id="modalFetchBtnCft" type="button" class="inline-flex w-full justify-center items-center gap-2 rounded-full bg-zinc-900 px-5 py-3 text-sm font-medium text-white shadow-lg shadow-gray-200 dark:shadow-none hover:bg-gray-500 sm:w-auto transition-all">
                            Fetch Profile
                            <i data-lucide="arrow-right" class="w-4 h-4"></i>
                        </button>
                        
                        <div id="dismissBtnsCft" class="flex flex-col sm:flex-row w-full sm:w-auto gap-3 sm:mr-auto mt-3 sm:mt-0 opacity-100 transition-opacity duration-300">
                            <button id="askLaterBtnCft" type="button" class="inline-flex w-full justify-center rounded-full bg-white dark:bg-zinc-800 px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 sm:w-auto">
                                Later
                            </button>
                            <button id="dontAskBtnCft" type="button" class="inline-flex w-full justify-center rounded-full bg-white dark:bg-zinc-800 px-4 py-3 text-sm font-semibold text-gray-700 dark:text-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 sm:w-auto">
                                Never
                            </button>
                        </div>

                        <button id="closeModalBtnCft" type="button" class="hidden mt-3 inline-flex w-full justify-center rounded-full bg-white dark:bg-zinc-800 px-4 py-3 text-sm font-semibold text-gray-900 dark:text-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 sm:mt-0 sm:w-auto">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
      lucide.createIcons();
      function switchView(viewId, element) {
        document.querySelectorAll(".view-section").forEach((el) => {
          el.classList.remove("active");
        });
        const target = document.getElementById(viewId);
        if (target) target.classList.add("active");

        // 3. Reset ALL navigation items to default state
        document.querySelectorAll(".nav-item").forEach((el) => {
          el.classList.remove(
            "active",
            "bg-brand-light/50",
            "dark:bg-brand/10",
            "text-brand",
            "dark:text-brand",
          );
          el.classList.add(
            "text-gray-600",
            "dark:text-gray-400",
            "hover:bg-gray-50",
            "dark:hover:bg-zinc-800/50",
          );

          const icon = el.querySelector("svg, i"); // Added 'i' for lucide icons
          if (icon) icon.classList.remove("text-brand");
        });

        let activeElement = element;

        if (viewId === "poster") {
          const posterNav = document.querySelector(
            "a[onclick*=\"switchView('poster'\"]",
          );
          if (posterNav) activeElement = posterNav;
        }

        // 5. Apply active classes to the chosen element
        if (activeElement) {
          activeElement.classList.remove(
            "text-gray-600",
            "dark:text-gray-400",
            "hover:bg-gray-50",
            "dark:hover:bg-zinc-800/50",
          );
          activeElement.classList.add(
            "active",
            "bg-brand-light/50",
            "dark:bg-brand/10",
            "text-brand",
            "dark:text-brand",
          );

          const activeIcon = activeElement.querySelector("svg, i");
          if (activeIcon) activeIcon.classList.add("text-brand");
        }
      }
    </script>

    <script>
      const defaultPillId = {{ default_platform_pill_id | tojson }};
      const defaultDbId = {{ default_platform_db_id | tojson }};
      const zeroState = document.getElementById('zeroState');
      const dataState = document.getElementById('dataState');
      const loadingState = document.getElementById('loadingState');
      const taskList = document.getElementById('taskList');
      const statScheduled = document.getElementById('statScheduled');
      const statPosted = document.getElementById('statPosted');
      document.addEventListener('DOMContentLoaded', () => {
          if (defaultPillId && defaultDbId) {
              const pillBtn = document.getElementById(`pill-${defaultPillId}`);
              if (pillBtn) {
                  loadPlatform(defaultDbId, pillBtn);
              }
          } else {
              zeroState.classList.remove('hidden');
          }
      });
      if (!window._taskListMediaHelpers) {
          window._taskListMediaHelpers = true;

          function isVideoUrl(url) {
            return /\.(mp4|webm|ogg|mov|m4v)(\?.*)?$/i.test(url) || /\b(video|youtube|vimeo)\b/i.test(url);
          }

          // IntersectionObserver to lazy-load images/videos when card is near viewport
          window._mediaObserver = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
              if (!entry.isIntersecting) return;
              const container = entry.target;

              // IMG lazy load
              const img = container.querySelector('img[data-src]');
              if (img) {
                img.src = img.getAttribute('data-src');
                img.removeAttribute('data-src');
              }

              // VIDEO lazy load: create <source> and call load()
              const video = container.querySelector('video[data-src]');
              if (video) {
                const src = video.getAttribute('data-src');
                if (src && !video.querySelector('source')) {
                  const source = document.createElement('source');
                  source.src = src;
                  video.appendChild(source);
                  // load metadata only; won't stream media until user plays
                  try { video.load(); } catch (e) { /* ignore */ }
                }
              }

              obs.unobserve(container);
            });
          }, { rootMargin: '200px', threshold: 0.05 });
        }

      async function loadPlatform(platformId, btnElement) {
          document.querySelectorAll('.nav-pill').forEach(el => el.classList.remove('active'));
          if(btnElement) btnElement.classList.add('active');
          // 2. State: Switch to Loading
          zeroState.classList.add('hidden');
          dataState.classList.add('hidden');
          loadingState.classList.remove('hidden');
          try {
              const svgPath = btnElement.dataset.svg;
              const imgElement = btnElement.querySelector('img');
              const profileImg = imgElement ? imgElement.src : null;
              // 3. API Call to your Backend
              const res = await fetch(`/api/platform/${platformId}/tasks`);
              if (!res.ok) throw new Error('Failed to fetch platform tasks');

              const data = await res.json();
              const accountName = data.account_name;
              animateValue(statScheduled, 0, data.stats.scheduled_count, 800);
              animateValue(statPosted, 0, data.stats.total_posted, 800);
              let allTasks = data.tasks;
              function renderTasks(filter = 'all') {
                  taskList.innerHTML = ''; // Clean slate
                  let filteredTasks = filter === 'all' ? allTasks : allTasks.filter(task => task.status.toLowerCase() === filter);
                  if (filteredTasks.length === 0) {
                      if (allTasks.length === 0) {
                          taskList.innerHTML = `
                              <div class="flex flex-col items-center justify-center py-24 px-6 border dark:text-gray-200 dark:border-gray-800 border-slate-200 rounded-2xl shadow-[0_1px_3px_rgba(0,0,0,0.02)]">
                                  <div class="mb-5">
                                      <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-slate-300">
                                          <path d="M8 2V5M16 2V5M3.5 9.09H20.5M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                          <path d="M11.9955 13.7h.009m-.009 3.7h.009m-4.01-3.7h.01m-.01 3.7h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                      </svg>
                                  </div>

                                  <div class="text-center max-w-sm">
                                      <h4 class="text-[16px] font-semibold text-slate-900 dark:text-gray-200 tracking-tight">No scheduled content</h4>
                                      <p class="text-slate-500 dark:text-gray-300 text-sm mt-1.5 leading-relaxed">
                                          Posts scheduled for your connected social accounts will appear here. Start by creating a new task.
                                      </p>
                                  </div>
                              </div>
                          `;
                      } else {
                          taskList.innerHTML = `
                              <div class="flex flex-col items-center justify-center py-20 border border-slate-200 rounded-2xl">
                                  <p class="text-sm font-medium text-slate-900">No results found</p>
                                  <p class="text-sm text-slate-500 mt-1">Try adjusting your filters to find what you're looking for.</p>
                              </div>
                          `;
                      }
                  } else {
                          filteredTasks.forEach((task, index) => {
                            let statusColor = "text-slate-600 border-slate-200 dark:text-slate-300 dark:border-zinc-700";
                            let statusIcon = '<i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-icon lucide-circle"><circle cx="12" cy="12" r="10"/></svg></i>';

                            const status = task.status ? task.status.toLowerCase() : 'unknown';
                            const statusDisplay = status.charAt(0).toUpperCase() + status.slice(1);

                            if (status === "posted") {
                              statusIcon = '<i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-icon lucide-check"><path d="M20 6 9 17l-5-5"/></svg></i>';
                            }
                            else if (status === "scheduled") {
                              statusIcon = '<i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-check2-icon lucide-calendar-check-2"><path d="M8 2v4"/><path d="M16 2v4"/><path d="M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8"/><path d="M3 10h18"/><path d="m16 20 2 2 4-4"/></svg></i>';
                            }
                            else if (status === "failed") {
                              statusIcon = '<i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bug-icon lucide-bug"><path d="M12 20v-9"/><path d="M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z"/><path d="M14.12 3.88 16 2"/><path d="M21 21a4 4 0 0 0-3.81-4"/><path d="M21 5a4 4 0 0 1-3.55 3.97"/><path d="M22 13h-4"/><path d="M3 21a4 4 0 0 1 3.81-4"/><path d="M3 5a4 4 0 0 0 3.55 3.97"/><path d="M6 13H2"/><path d="m8 2 1.88 1.88"/><path d="M9 7.13V6a3 3 0 1 1 6 0v1.13"/></svg></i>';
                            }
                            const delay = Math.min(index * 100, 1000); 
                            let mediaHtml = '';
                            if (task.image_url) {
                              if (isVideoUrl(task.image_url)) {
                                mediaHtml = `
                                  <div class="w-48 h-48 rounded-lg overflow-hidden border border-slate-200 shadow-sm bg-black dark:bg-black/60 flex items-center justify-center">
                                    <div class="w-full h-full media-container" data-src-container>
                                      <video controls playsinline muted preload="metadata" poster="${task.poster || ''}" class="w-full h-full object-cover" data-src="/media/${task.image_url}">
                                        <!-- <source> will be created by observer when in view -->
                                        Your browser does not support the video tag.
                                      </video>
                                    </div>
                                  </div>
                                `;
                              } else if (/\.(jpe?g|png|gif|webp|avif|svg)(\?.*)?$/i.test(task.image_url)) {
                                // Lazy-load images via data-src so browser won't fetch until needed
                                mediaHtml = `
                                  <div class="w-48 h-48 rounded-lg overflow-hidden border border-slate-200 shadow-sm bg-slate-50 dark:bg-zinc-800 dark:border-zinc-700 flex items-center justify-center">
                                    <img loading="lazy" data-src="/media/${task.image_url}" alt="media" class="w-full h-full object-cover" />
                                  </div>
                                `;
                              } else {
                                // Unknown file type: provide a lightweight link preview
                                const filename = (task.image_url.split('/').pop() || 'file').split('?')[0];
                                mediaHtml = `
                                  <div class="w-48 h-48 rounded-lg border border-slate-200 border-dashed bg-slate-50 dark:bg-zinc-800 dark:border-zinc-700 flex flex-col items-center justify-center p-3 text-sm text-slate-600 dark:text-slate-300">
                                    <div class="truncate w-full text-center"><strong>${filename}</strong></div>
                                    <a href="/media/${task.image_url}" target="_blank" rel="noopener noreferrer" class="mt-2 inline-flex items-center gap-2 text-xs font-medium underline">
                                      Open file
                                    </a>
                                  </div>
                                `;
                              }
                            } else {
                              // No media provided: dashed placeholder
                              mediaHtml = `
                                <div class="w-48 h-48 rounded-lg border-2 border-dashed border-slate-200 bg-slate-50 dark:bg-zinc-800 dark:border-zinc-700 flex items-center justify-center text-slate-300 dark:text-zinc-500">
                                  <i data-lucide="image" class="w-10 h-10 opacity-50"></i>
                                </div>
                              `;
                            }

                            const html = `<div class="task-card group bg-white dark:bg-dark-surface border border-slate-200 dark:border-zinc-800 rounded-3xl overflow-hidden duration-300 animate-in fade-in slide-in-from-bottom-2 mb-6" style="animation-delay: ${delay}ms; animation-fill-mode: backwards;">
                                            <div class="p-6 flex justify-between gap-6">

                                              <div class="flex flex-col justify-between flex-1">
                                                  <div>
                                                      <div class="flex items-center gap-2 mb-6">
                                                          <div class="relative">
                                                              ${profileImg
                                                                ? `<img 
                                                                      src="${profileImg}" 
                                                                      class="w-10 h-10 rounded-full object-cover"
                                                                      onerror="this.outerHTML = \`
                                                                        <div class='w-10 h-10 rounded-full bg-slate-100 dark:bg-zinc-700 flex items-center justify-center font-semibold text-slate-600 dark:text-zinc-300 uppercase'>
                                                                          ${accountName?.charAt(0) || '?'}
                                                                        </div>
                                                                      \`"
                                                                  >`
                                                                : `<div class="w-10 h-10 rounded-full bg-slate-100 dark:bg-zinc-700 flex items-center justify-center font-semibold text-slate-600 dark:text-zinc-300 uppercase">
                                                                      ${accountName?.charAt(0) || '?'}
                                                                  </div>`
                                                              }

                                                              <div class="absolute -bottom-1 -right-1 bg-white dark:bg-zinc-900 rounded-full p-0.5 border-2 border-white dark:border-zinc-900 flex items-center justify-center w-5 h-5 text-white">
                                                                  <svg class="w-3 h-3 text-gray-800 dark:text-zinc-200" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                                      <path d="${svgPath}" fill="currentColor"/>
                                                                  </svg>
                                                              </div>
                                                          </div>
                                                          <span class="font-bold text-slate-800 dark:text-slate-200 text-base">${accountName}</span>
                                                      </div>

                                                      <div class="text-slate-800 dark:text-slate-200 text-[15px] font-normal leading-relaxed">
                                                          ${task.caption || "No caption provided."}
                                                      </div>
                                                  </div>
                                              </div>

                                              <div class="shrink-0">
                                                  ${mediaHtml}
                                              </div>
                                          </div>

                                          <div class="px-6 py-3 border-t border-slate-200 dark:border-zinc-700 flex items-center justify-between">
                                              <div class="text-sm text-slate-900 dark:text-slate-200 font-medium">
                                                  You created this <span class="font-normal text-slate-600 dark:text-slate-400">${task.created_at}</span>
                                              </div>

                                              <div class="flex items-center gap-2">
                                                  <button class="flex items-center gap-2 px-4 py-1.5 border border-slate-300 dark:border-zinc-700 rounded-md text-slate-700 dark:text-slate-200 text-sm font-semibold hover:bg-slate-50 dark:hover:bg-zinc-900">
                                                    <span class="${statusColor} rounded-md px-2 py-1 text-xs inline-flex items-center gap-2">${statusIcon}${statusDisplay}</span>
                                                  </button>
                                              </div>
                                          </div>
                                        </div>`;

                            taskList.insertAdjacentHTML('beforeend', html);

                            // After insertion: attach observer to lazy media container(s) (if any)
                            const inserted = taskList.lastElementChild;
                            if (inserted) {
                              const mediaContainer = inserted.querySelector('.media-container') || inserted.querySelector('img[data-src]') && inserted.querySelector('img[data-src]').closest('div') ;
                              if (mediaContainer) {
                                try {
                                  window._mediaObserver.observe(mediaContainer);
                                } catch (e) { /* fail-silent */ }
                              }
                            }
                          });

                  }
              }
              renderTasks('all');
              const filterSelect = document.getElementById('filterSelect');
              filterSelect.addEventListener('change', () => renderTasks(filterSelect.value));
              loadingState.classList.add('hidden');
              dataState.classList.remove('hidden');
          } catch (err) {
              console.error(err);
              loadingState.innerHTML = `
                  <div class="text-center">
                      <div class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3">
                          <i data-lucide="x" class="w-4 h-4 text-red-500"></i>
                      </div>
                      <p class="text-slate-800 font-medium">Unable to load data</p>
                      <button onclick="location.reload()" class="text-sm text-blue-600 hover:underline mt-2">Try refreshing</button>
                  </div>
              `;
          }
      }
      function animateValue(obj, start, end, duration) {
          if (start === end) {
              obj.innerHTML = end;
              return;
          }
          let startTimestamp = null;
          const step = (timestamp) => {
              if (!startTimestamp) startTimestamp = timestamp;
              const progress = Math.min((timestamp - startTimestamp) / duration, 1);
              obj.innerHTML = Math.floor(progress * (end - start) + start);
              if (progress < 1) {
                  window.requestAnimationFrame(step);
              }
          };
          window.requestAnimationFrame(step);
      }
    </script>

    <script>
      const content_library_prompts = {
        "Custom Option": "",
        "Educational Post":
          "Describe the specific concept, skill, or quick hack you want to teach your audience today, and who the target is.",
        "Marketing Post":
          "Create a marketing post promoting [insert product/service name] by highlighting the main problem it solves and including a call to action.",
        "Motivational Post":
          "Generate a motivational post focused on the theme of [insert theme, e.g., resilience, consistency, starting over], and what feeling you want to inspire.",
        "Behind the Scenes (BTS) Post":
          "Design a post that gives a sneak peek into [describe the process, e.g., our team culture, how we develop our product, a typical day]. What's the main takeaway.",
        "User Generated Content (UGC) Showcase":
          "Draft a post celebrating a customer who used our product/service. Describe the user's success story and which specific product they used.",
        "Holiday/Seasonal Post":
          "Create a post recognizing the upcoming holiday/season: [insert holiday/season]. What is the connection to our brand, and what positive message should we convey?",
        "Ask Me Anything (AMA) / Q&A Post":
          "Formulate a post inviting questions from the audience about [insert topic, e.g., a new feature, industry trends, personal experience]. Clearly state the topic for the Q&A.",
        "Audience Poll/Feedback":
          "Create a poll or question-based post to get direct feedback on [insert topic, e.g., new product packaging, preferred content type, industry opinion]. What are the choices/options?",
        "Thought Leadership Post":
          "Develop a strong opinion or unique insight about a recent [industry trend/news item]. What is your contrarian view, and what advice follows from it?",
        "Industry News/Update":
          "Share a brief update on a recent and relevant piece of industry news. Explain why this news matters to your audience and what their next step should be.",
        "Case Study/Success Story":
          "Outline a detailed customer success story. Focus on the 'Before' (the problem), the 'During' (how your solution was used), and the 'After' (the measurable result).",
        "Product Feature Spotlight":
          "Highlight a single, powerful feature of your product: [feature name]. Describe the feature and the single biggest benefit it offers the user.",
        "Contest/Giveaway":
          "Draft a post announcing a contest or giveaway. Define the prize, the entry rules (e.g., Tag 3 friends, Follow, Share), and the end date.",
        "Flash Sale/Discount":
          "Write a time-sensitive post announcing a flash sale or discount. Specify the discount percentage, the product, and the expiration date/time.",
      };
      const useCaseDisplayMapDrf = {
        "Custom Option": "Custom Idea",
        "Educational Post": "Educational Post",
        "Marketing Post": "Marketing Post",
        "Motivational Post": "Motivational Post",
        "Behind the Scenes (BTS) Post": "Behind the Scenes (BTS)",
        "User Generated Content (UGC) Showcase": "UGC Showcase",
        "Holiday/Seasonal Post": "Seasonal Post",
        "Ask Me Anything (AMA) / Q&A Post": "AMA / Q&A",
        "Audience Poll/Feedback": "Audience Poll/Feedback",
        "Thought Leadership Post": "Thought Leadership",
        "Industry News/Update": "Industry News",
        "Case Study/Success Story": "Case Study / Success Story",
        "Product Feature Spotlight": "Feature Spotlight",
        "Contest/Giveaway": "Contest / Giveaway",
        "Flash Sale/Discount": "Flash Sale / Discount",
      };
      document.addEventListener("DOMContentLoaded", function () {
        const promptTextarea = document.getElementById("animatedPlaceholder");
        const prevBtn = document.getElementById("prevCaseBtnDrf");
        const nextBtn = document.getElementById("nextCaseBtnDrf");
        const displayText = document.getElementById("currentCaseTextDrf");

        const useCaseKeysDrf = Object.keys(content_library_prompts);
        const totalCasesDrf = useCaseKeysDrf.length;
        let currentCaseIndexDrf = 0; // Starts at Custom Option (index 0)
        const customPlaceholderDrf =
          "Describe your idea here... We'll handle the caption, hashtags, and visuals.";
        function updateCarouselDrf() {
          const currentKey = useCaseKeysDrf[currentCaseIndexDrf];
          displayText.textContent = useCaseDisplayMapDrf[currentKey];
          if (currentKey === "Custom Option") {
            promptTextarea.value = "";
            promptTextarea.placeholder = customPlaceholderDrf;
          } else {
            promptTextarea.placeholder = "";
            promptTextarea.value = content_library_prompts[currentKey];
            promptTextarea.focus();
          }
        }

        // Event listener for Next button with Cycling Logic
        nextBtn.addEventListener("click", function () {
          currentCaseIndexDrf = (currentCaseIndexDrf + 1) % totalCasesDrf;
          updateCarouselDrf();
        });

        // Event listener for Previous button with Cycling Logic
        prevBtn.addEventListener("click", function () {
          currentCaseIndexDrf =
            (currentCaseIndexDrf - 1 + totalCasesDrf) % totalCasesDrf;
          updateCarouselDrf();
        });

        // Initialize the carousel on page load with the Custom Option (no focus)
        updateCarouselDrf();
      });
    </script>

    <script>
      const toolsMenu = document.getElementById("tools-menu");
      const inputContainer = document.getElementById("input-container");
      const mainBtn = document.getElementById("main-btn");
      const chatInput = document.getElementById("chat-input");

      let menuState = {
        menuOpen: false,
        inputMode: false,
      };

      async function handleMainClick() {
        if (menuState.inputMode) {
          const userMessage = chatInput.value.trim();
          chatInput.value = "";
          resetToIdle();
          if (userMessage) {
            const captionForFormating = document.getElementById("captionGfr");
            const textToFormat = captionForFormating.value;
            captionForFormating.value = "";
            toggleLoading(`postCaption`, true, "Updating Caption...");

            try {
              const response = await fetch("/format-text", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  text: textToFormat.trim(),
                  custom_instruction: userMessage,
                }),
              });

              if (!response.ok) {
                const errorText = await response.text();
                throw new Error(
                  `HTTP ${response.status}: ${response.statusText}\n${errorText}`,
                );
              }

              const reader = response.body.getReader();
              const decoder = new TextDecoder();
              let isFirstChunk = true;

              while (true) {
                const { done, value } = await reader.read();
                if (done) break;

                const chunk = decoder.decode(value, { stream: true });

                if (isFirstChunk) {
                  captionForFormating.value = "";
                  isFirstChunk = false;
                }

                captionForFormating.value += chunk;
              }
            } catch (err) {
              console.error("Streaming failed");
              captionForFormating.value =
                "Formatting failed. Please try again.";
            } finally {
              toggleLoading(`postCaption`, false);
            }
          }
        } else {
          editToggleMenu();
        }
      }

      function editToggleMenu() {
        menuState.menuOpen = !menuState.menuOpen;
        updateUI();
      }

      function activateInputMode() {
        menuState.menuOpen = false;
        menuState.inputMode = true;
        updateUI();
      }

      function resetToIdle() {
        menuState.menuOpen = false;
        menuState.inputMode = false;
        updateUI();
      }

      function updateUI() {
        if (menuState.menuOpen) {
          toolsMenu.classList.remove(
            "opacity-0",
            "scale-y-50",
            "translate-y-10",
            "pointer-events-none",
          );
          mainBtn.classList.add("menu-open");
        } else {
          toolsMenu.classList.add(
            "opacity-0",
            "scale-y-50",
            "translate-y-10",
            "pointer-events-none",
          );
          mainBtn.classList.remove("menu-open");
        }

        if (menuState.inputMode) {
          inputContainer.classList.remove("w-0", "opacity-0");
          inputContainer.classList.add("w-auto", "opacity-100");

          mainBtn.classList.add("input-mode");
        } else {
          inputContainer.classList.add("w-0", "opacity-0");
          inputContainer.classList.remove("w-auto", "opacity-100");

          mainBtn.classList.remove("input-mode");
        }
      }
    </script>
    <script>
      let selectedStyle = null;

      const confirmationModal = `
            <div id="confirm-modal" class="fixed inset-0 bg-black/30 flex items-center justify-center z-[100] hidden">
                <div class="bg-white rounded-3xl p-6 shadow-2xl max-w-md w-full mx-4 animate-in fade-in zoom-in duration-200">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">
                        Click cofirm to make the paragraph <span id="style-name" class="text-blue-600"></span>
                    </h3>
                    <div class="flex gap-3 justify-end mt-3">
                        <button id="cancel-style" class="px-5 py-2.5 bg-gray-100 hover:bg-gray-200 rounded-full font-medium transition">
                            Cancel
                        </button>
                        <button id="confirm-style" class="px-5 py-2.5 bg-gray-800 hover:bg-gray-700 text-white rounded-full font-medium transition">
                            Confirm
                        </button>
                    </div>
                </div>
            </div>
        `;
      document.body.insertAdjacentHTML("beforeend", confirmationModal);

      const confirmModal = document.getElementById("confirm-modal");
      const styleNameEl = document.getElementById("style-name");

      document.querySelectorAll("#tools-menu button[name]").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          const style = btn.getAttribute("name");
          selectedStyle = style;

          styleNameEl.textContent = style;
          confirmModal.classList.remove("hidden");

          if (menuState.menuOpen) {
            menuState.menuOpen = false;
            updateUI();
          }
        });
      });

      document
        .getElementById("confirm-style")
        .addEventListener("click", async () => {
          if (!selectedStyle) {
            closeModal();
            activateInputMode();
            return;
          }
          const captionForFormating = document.getElementById("captionGfr");
          const textToFormat = captionForFormating.value;

          if (!textToFormat.trim()) {
            closeModal();
            activateInputMode();
            return;
          }
          confirmModal.classList.add("hidden");
          activateInputMode();
          toggleLoading(`postCaption`, true, "Updating Caption...");
          captionForFormating.value = "";

          try {
            const response = await fetch("/format-text", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                text: textToFormat.trim(),
                style: selectedStyle,
              }),
            });

            if (!response.ok) {
              const errorText = await response.text();
              throw new Error(
                `HTTP ${response.status}: ${response.statusText}\n${errorText}`,
              );
            }

            const reader = response.body.getReader();
            const decoder = new TextDecoder();
            let isFirstChunk = true;

            while (true) {
              const { done, value } = await reader.read();
              if (done) break;

              const chunk = decoder.decode(value, { stream: true });

              if (isFirstChunk) {
                captionForFormating.value = ""; // fully clean on first real chunk
                isFirstChunk = false;
              }

              captionForFormating.value += chunk;
            }
          } catch (err) {
            console.error("Streaming failed:", err);
            captionForFormating.value =
              "Error: Formatting failed. Please try again.";
          } finally {
            toggleLoading(`postCaption`, false);
          }
        });

      document
        .getElementById("cancel-style")
        .addEventListener("click", closeModal);

      confirmModal.addEventListener("click", (e) => {
        if (e.target === confirmModal) closeModal();
      });

      function closeModal() {
        confirmModal.classList.add("hidden");
        selectedStyle = null;
      }

      function activateInputMode() {
        menuState.menuOpen = false;
        menuState.inputMode = true;
        updateUI();
        setTimeout(() => chatInput.focus(), 300);
      }
    </script>

    <script>
      let animationTimeouts = [];

      const icons = {
        success: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>`,
        error: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>`,
        warning: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ca8a04" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>`,
        info: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>`,
      };

      function ShowNoti(type, message) {
        const capsule = document.getElementById("noti-capsule");
        const iconContainer = document.getElementById("noti-icon");
        const textWrapper = document.getElementById("noti-text-wrapper");
        const messageEl = document.getElementById("noti-message");

        clearTimeouts();

        capsule.classList.add("opacity-0", "-translate-y-10");
        textWrapper.classList.add("max-w-0", "opacity-0");
        setTimeout(() => {
          iconContainer.innerHTML = icons[type] || icons["info"];
          messageEl.textContent = message;

          capsule.classList.remove("opacity-0", "-translate-y-10");

          const t1 = setTimeout(() => {
            textWrapper.classList.remove("max-w-0", "opacity-0");
            textWrapper.classList.add("max-w-[500px]", "opacity-100");
          }, 400);

          const t2 = setTimeout(() => {
            textWrapper.classList.remove("max-w-[500px]", "opacity-100");
            textWrapper.classList.add("max-w-0", "opacity-0");
          }, 3000);

          const t3 = setTimeout(() => {
            capsule.classList.add("opacity-0", "-translate-y-10");
          }, 3500);

          animationTimeouts.push(t1, t2, t3);
        }, 50);
      }

      function clearTimeouts() {
        animationTimeouts.forEach((id) => clearTimeout(id));
        animationTimeouts = [];
      }
    </script>


<script src="/static/DesignGen.js"></script>
<script src="/static/Theme.js"></script>
<script src="/static/TaskList.js"></script>
<script src="/static/PostAi.js"></script>
<script src="/static/Approved.js"></script>
<script src="/static/ManualDraft.js"></script>
<script src="/static/Downloader.js"></script>
<script src="/static/placeholderAnim.js"></script>
<script src="/static/Research.js"></script>
<script src="/static/Rephraser.js"></script>
<script src="/static/Connection.js"></script>
<script src="/static/BrandAsset.js"></script>
</body>
</html>
