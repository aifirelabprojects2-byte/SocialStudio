<!DOCTYPE html>
<html class="light" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>AI Social Studio</title>
  <script src="/static/tailwind.js"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <link rel="stylesheet" href="/static/PostAi.css">
  <link rel="stylesheet" href="/static/Nav.css">
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          fontFamily: {
            sans: ["Inter", "system-ui", "sans-serif"],
            display: ["Inter", "system-ui", "sans-serif"],
          },
          rotate: {
            '360': '360deg', 
          }
        },
      },
    }
  </script>
  <style>
    /* Premium subtle shimmer — used by Twitter, Linear, Vercel */
    .skeletonPlatform-loader {
      background: linear-gradient(90deg,
        rgba(240, 240, 240, 0) 0%,
        rgba(240, 240, 240, 0.8) 50%,
        rgba(240, 240, 240, 0) 100%
      );
      background-size: 200% 100%;
      animation: skeletonPlatform-loading 1.8s ease-in-out infinite;
    }
  
    @keyframes skeletonPlatform-loading {
      0%   { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
  
    .skeletonPlatform-line {
      @apply h-4 bg-gray-200 rounded;
    }
  
    dialog::backdrop {
      @apply bg-black/50;
    }
  </style>
  <style>
    :root {
  
        --bg-body: #eef2f5; 
        --bg-app: #ffffff;
        --text-main: #1d1d1f; 
        --text-muted: #86868b;
        --accent: #0071e3; 
        --pill-color: #dddddde5; 
        --card-bg: #f2f2f7;
        --shadow-soft: 0 10px 40px rgba(0,0,0,0.08); 
    }


    body, html {
      font-family: "Plus Jakarta Sans", "system-ui", "sans-serif";
      font-feature-settings: "cv11", "ss01";
      font-weight: 400;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 50% 50%, #ffffff 0%, #eef1f5 100%);
      height: 100vh;
      overflow: hidden;
      color: var(--text-main);
    }


</style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 min-h-screen flex flex-col transition-colors duration-200">
  <div class="app-container">
    <nav class="nav-header">
      <div class="flex h-16 w-full items-center shadow-[0px_20px_20px_8px_white]">
          
          <div class="flex items-center gap-3 w-1/4">
              <div class="bg-gray-600 text-white p-1.5 rounded-lg">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
              </div>
              <span class="font-semibold text-lg tracking-tight text-slate-900 dark:text-white">AI Social Studio</span>
          </div>
          
          <div class="flex-grow flex justify-center">
              <ul class="nav-list">
                  <div class="nav-pill"></div>
                  <li class="pill-nav-item active" data-index="0">Leads</li>
                  <li class="pill-nav-item" data-index="1">Competitors</li>
                  <li class="pill-nav-item" data-index="2">Mentions</li>
                  <li class="pill-nav-item" data-index="3">Engagement</li>
                  <li class="pill-nav-item" data-index="4">Campaigns</li>
              </ul>
          </div>
          
          <div class="flex items-center justify-end gap-4 w-1/4">
              <button class="p-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
              </button>
          </div>
          
      </div>
  </nav>

    <div class="viewport">
        <div class="content-track">
            
            <div class="tab-content">
                
                <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-12">
                  
                  <section class="max-w-3xl mx-auto" id="Section1">
                    <div class="text-center mb-8">
                      <h1 class="text-3xl md:text-4xl font-semibold tracking-tight text-slate-900 dark:text-white mb-3">
                        What would you like to post today?
                      </h1>
                      <p class="text-slate-500 dark:text-slate-400 text-lg">
                        Describe your idea, and we'll craft the caption, hashtags, and visuals.
                      </p>
                    </div>

                    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-1">
                      <form id="generateForm" class="p-5 sm:p-6 space-y-4">
                        <div class="relative">
                          <textarea name="prompt" rows="3" required id="animatedPlaceholder"
                            class="block w-full rounded-xl border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-900/50 text-slate-900 dark:text-white shadow-sm focus:border-gray-500 focus:ring-gray-500 sm:text-base px-4 py-3 transition resize-none placeholder:text-slate-400"
                            placeholder=""></textarea>
                        </div>

                        <div class="flex items-center justify-between pt-2">
                          <div class="flex items-center">
                            <input type="checkbox" name="generate_image" value="yes" id="imgToggle" checked 
                                  class="h-5 w-5 rounded border-slate-300 text-gray-600 focus:ring-gray-600 dark:border-slate-600 dark:bg-slate-700">
                            <label for="imgToggle" class="ml-2 block text-sm font-medium text-slate-700 dark:text-slate-300 select-none cursor-pointer">
                              Generate Image
                            </label>
                          </div>

                          <button type="submit" id="genBtnBtn"
                            class="shiny-button inline-flex items-center justify-center rounded-xl bg-gray-600 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 transition-all duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"></path><line x1="16" y1="5" x2="22" y2="5"></line><line x1="19" y1="2" x2="19" y2="8"></line></svg>
                            <span id="genBtnSpan" >Generate Draft</span>
                          </button>
                        </div>
                      </form>
                    </div>

                    <div id="loading" class="hidden mt-8 text-center animate-pulse">
                      <div class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-gray-600 transition ease-in-out duration-150 cursor-not-allowed">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Crafting your post...
                      </div>
                    </div>

                    <div id="preview" class="hidden mt-8 w-full bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden">
                      </div>
                  </section>

                  <section class="min-h-[20rem]">
                    <div class="flex mb-6 px-1">
                      <h2 class="text-2xl flex items-center font-semibold tracking-tight text-slate-900 dark:text-white w-full">
                        <div class="mr-3">Recent Drafts</div>
                        
                        <div id="draftCount" class="inline-flex items-center  rounded-full bg-slate-100 dark:bg-slate-700 px-2.5 py-0.5 text-sm font-medium text-slate-800 dark:text-slate-300">0</div>
                      </h2>
                    
                      <button onclick="loadDrafts()" class="refresh-button group text-gray-600 hover:text-gray-500">
                        <svg class="w-6 h-6 transition-transform duration-500 ease-out group-hover:rotate-360"  viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M13.5 4.5H12.5C8.08172 4.5 4.5 8.08172 4.5 12.5C4.5 15.6631 6.33576 18.3975 9 19.6958M11.5 20.5H12.5C16.9183 20.5 20.5 16.9183 20.5 12.5C20.5 9.33688 18.6642 6.60253 16 5.30423" stroke="currentColor" stroke-width="2"/>
                          <path d="M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811" stroke="currentColor" stroke-width="2"/>
                          </svg>
                      </button>
                    </div>
                      
                    <div id="draftsGrid" class="grid gap-6">
                    </div>
                    <div id="noDrafts" class="hidden flex flex-col items-center justify-center py-20 text-center border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl">
                      <div class="p-3 bg-slate-50 dark:bg-slate-800 rounded-full mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                      </div>
                      <h3 class="text-sm font-semibold text-slate-900 dark:text-white">No drafts found</h3>
                      <p class="mt-1 text-sm text-slate-500">Get started by generating your first post above.</p>
                    </div>
                      
                    <div id="PaginBtns" class="flex justify-center mt-8 space-x-6 font-sans hidden">
                      <button id="prevDrafts" 
                              class="flex items-center px-6 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-xl shadow-md 
                                     hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200 ease-in-out"
                              disabled>
                          <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7071 4.29289C12.0976 4.68342 12.0976 5.31658 11.7071 5.70711L6.41421 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H6.41421L11.7071 18.2929C12.0976 18.6834 12.0976 19.3166 11.7071 19.7071C11.3166 20.0976 10.6834 20.0976 10.2929 19.7071L3.29289 12.7071C3.10536 12.5196 3 12.2652 3 12C3 11.7348 3.10536 11.4804 3.29289 11.2929L10.2929 4.29289C10.6834 3.90237 11.3166 3.90237 11.7071 4.29289Z" fill="currentColor"/>
                          </svg>
                          Newer Drafts
                      </button>
                      
                      <button id="nextDrafts" 
                              class="flex items-center px-6 py-2 text-sm font-semibold text-white bg-gray-600 rounded-xl shadow-md 
                                     hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200 ease-in-out">
                          Older Drafts 
                          <svg class="w-5 h-5 ml-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M12.2929 4.29289C12.6834 3.90237 13.3166 3.90237 13.7071 4.29289L20.7071 11.2929C21.0976 11.6834 21.0976 12.3166 20.7071 12.7071L13.7071 19.7071C13.3166 20.0976 12.6834 20.0976 12.2929 19.7071C11.9024 19.3166 11.9024 18.6834 12.2929 18.2929L17.5858 13H4C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11H17.5858L12.2929 5.70711C11.9024 5.31658 11.9024 4.68342 12.2929 4.29289Z" fill="currentColor"/>
                          </svg>
                      </button>
                  </div>
                  </section>


                  <section>

                    <div class="min-h-full py-8 px-4 sm:px-6 lg:px-8">
                      <div class="mx-auto max-w-7xl">
                          
                          <div class="md:flex md:items-center md:justify-between mb-6">
                              <div class="min-w-0 flex-1">
                                  <h2 class="text-2xl font-semibold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight">
                                      Approved Drafts
                                  </h2>
                                  <p class="mt-1 text-sm text-gray-500">Overview of all content approved for publication.</p>
                              </div>
                              <div class="mt-4 flex md:ml-4 md:mt-0">
                                  <button type="button" onclick="fetchData()" class="ml-3 inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                                      <svg class="-ml-0.5 mr-1.5 h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" /></svg>
                                      Refresh
                                  </button>
                              </div>
                          </div>
              
                          <div class="bg-white rounded-lg overflow-hidden">
                              
                              <div class="relative min-h-[300px]">
                                  
                                <div id="skeletonDraft" class="space-y-6">
                                  <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                                    <div class="h-14 bg-gray-50 skeletonPlatform-loader"></div>
                                    <div class="p-6 space-y-4">
                                      <div class="h-5 w-48 bg-gray-200 rounded skeletonPlatform-loader"></div>
                                      <div class="h-4 w-64 bg-gray-200 rounded skeletonPlatform-loader"></div>
                                      <div class="flex items-center gap-8">
                                        <div class="h-8 w-32 bg-gray-200 rounded-full skeletonPlatform-loader"></div>
                                        <div class="h-4 w-24 bg-gray-200 rounded skeletonPlatform-loader"></div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                  <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 overflow-hidden" >
                                  <table class="w-full text-sm text-left ">
                                      <thead class="bg-gray-50 ">
                                          <tr>
                                              <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-xs font-[400] uppercase tracking-wide text-gray-500 sm:pl-6">Title & Preview</th>
                                              <th scope="col" class="px-3 py-3.5 text-left text-xs font-[400] uppercase tracking-wide text-gray-500">Created At</th>
                                              <th scope="col" class="px-3 py-3.5 text-left text-xs font-[400] uppercase tracking-wide text-gray-500">Status</th>
                                              <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                  <span class="sr-only">View</span>
                                              </th>
                                          </tr>
                                      </thead>
                                        <tbody id="tableBody" class="divide-y divide-gray-200 bg-white">
                                    
                                        </tbody>
                                  </table>
                                </div>
              
                                  <div id="errorState" class="hidden flex-col items-center justify-center py-12 text-center text-red-600">
                                      <svg class="h-10 w-10 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                      <p class="text-sm font-medium">Failed to load data.</p>
                                  </div>
              
                                  <div id="emptyState" class="hidden flex-col items-center justify-center py-16 text-center">
                                      <div class="rounded-full bg-gray-50 p-4 mb-3">
                                          <svg class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" /></svg>
                                      </div>
                                      <h3 class="mt-2 text-sm font-semibold text-gray-900">No approved drafts</h3>
                                      <p class="mt-1 text-sm text-gray-500">There are no tasks currently in this view.</p>
                                  </div>
                              </div>
              
                              <div class="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
                                  <div class="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                                      <div>
                                          <p class="text-sm text-gray-700">
                                              Showing <span class="font-medium" id="lblStart">0</span> to <span class="font-medium" id="lblEnd">0</span> of <span class="font-medium" id="lblTotal">0</span> results
                                          </p>
                                      </div>
                                      <div>
                                          <nav class="isolate inline-flex -space-x-px rounded-md shadow-sm" aria-label="Pagination">
                                              <button type="button" id="btnPrev" class="relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed">
                                                  <span class="sr-only">Previous</span>
                                                  <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                      <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
                                                  </svg>
                                                  <span class="ml-1 text-sm font-medium">Prev</span>
                                              </button>
                                              <button type="button" id="btnNext" class="relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed">
                                                  <span class="mr-1 text-sm font-medium">Next</span>
                                                  <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                      <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                                                  </svg>
                                              </button>
                                          </nav>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              
                  </section>


                  <section id="Platform">

                    <div class="min-h-full">
                      <header class="bg-white shadow-sm border-b">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                          <div class="flex justify-between items-center">
                            <h1 class="text-3xl font-semibold text-gray-900">Platforms</h1>
                            <div class="flex gap-3">
                              <button id="refreshBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50">
                                Refresh
                              </button>
                              <button id="openModalBtn" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm font-medium">
                                + Create New Platform
                              </button>
                            </div>
                          </div>
                        </div>
                      </header>
                  
                      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
                      <div id="skeletonPlatform" class="space-y-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                          <div class="h-14 bg-gray-50 skeletonPlatform-loader"></div>
                          <div class="p-6 space-y-4">
                            <div class="h-5 w-48 bg-gray-200 rounded skeletonPlatform-loader"></div>
                            <div class="h-4 w-64 bg-gray-200 rounded skeletonPlatform-loader"></div>
                            <div class="flex items-center gap-8">
                              <div class="h-8 w-32 bg-gray-200 rounded-full skeletonPlatform-loader"></div>
                              <div class="h-4 w-24 bg-gray-200 rounded skeletonPlatform-loader"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                  
                      <div id="PlatformEmptyState" class="hidden flex-col items-center justify-center py-2 text-center">
                        <div class="rounded-full bg-gray-50 p-4 mb-3 inline-block">
                            <svg class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" /></svg>
                        </div>
                        <h3 class="mt-2 text-sm font-semibold text-gray-900">No platforms yet</h3>
                        <p class="mt-1 text-sm text-gray-500">Add your first social platform to get started.</p>
                        <button id="openModalBtn2" class="mt-6 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                          Create Platform
                        </button>
                    </div>
                
                      <!-- Table -->
                      <div id="table" class="hidden bg-white shadow overflow-hidden sm:rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200">
                          <thead class="bg-gray-50">
                            <tr>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">API</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Token</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                              <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                            </tr>
                          </thead>
                          <tbody id="tbody" class="bg-white divide-y divide-gray-200"></tbody>
                        </table>
                      </div>
                    </main>
                  </div>
                
                  <!-- Modal -->
                  <dialog id="createModal" class="p-8 rounded-2xl shadow-2xl max-w-lg w-full bg-white">
                    <h2 class="text-2xl font-bold mb-6">Add New Platform</h2>
                    <form id="createForm" class="space-y-5">
                      <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Platform Name *</label>
                        <input name="name" required placeholder="e.g. Facebook" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"/>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">API Name (optional)</label>
                        <input name="api_name" placeholder="e.g. facebook_graph" class="w-full px-4 py-2 border border-gray-300 rounded-lg"/>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Access Token *</label>
                        <textarea name="access_token" required placeholder="Paste your access token here" class="w-full px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm"></textarea>
                      </div>
                      <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Refresh Token (optional)</label>
                        <textarea name="refresh_token" rows="2" placeholder="Optional" class="w-full px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm"></textarea>
                      </div>
                
                      <div class="flex justify-end gap-3 mt-8">
                        <button type="button" id="cancelBtn" class="px-5 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                          Cancel
                        </button>
                        <button type="submit" id="saveBtn" class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
                          Save Platform
                        </button>
                      </div>
                    </form>
                  </dialog>
                
                  <script>
                    const modal = document.getElementById('createModal')
                    const tbody = document.getElementById('tbody')
                    const table = document.getElementById('table')
                    const PlatformEmptyState = document.getElementById('PlatformEmptyState')
                    const skeletonPlatform = document.getElementById('skeletonPlatform')
                    const form = document.getElementById('createForm')
                    const saveBtn = document.getElementById('saveBtn')
                    
                
                    // Open modal
                    document.getElementById('openModalBtn').onclick = () => modal.showModal()
                    document.getElementById('openModalBtn2').onclick = () => modal.showModal()
                    document.getElementById('cancelBtn').onclick = () => modal.close()
                
                    async function loadPlatforms() {
                      skeletonPlatform.classList.remove('hidden')
                      table.classList.add('hidden')
                      PlatformEmptyState.classList.add('hidden')
                
                      try {
                        const res = await fetch('/api/platforms')
                        const platforms = await res.json()
                
                        skeletonPlatform.classList.add('hidden')
                
                        if (platforms.length === 0) {
                          PlatformEmptyState.classList.remove('hidden')
                          return
                        }
                
                        table.classList.remove('hidden')
                        tbody.innerHTML = ''
                
                        platforms.forEach(p => {
                          const status = p.token_valid
                            ? `<span class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">Valid</span>`
                            : `<span class="px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">Invalid</span>`
                
                          const row = document.createElement('tr')
                          row.innerHTML = `
                            <td class="px-6 py-4 font-medium text-gray-900">${p.name}</td>
                            <td class="px-6 py-4 text-sm text-gray-500">${p.api_name || '—'}</td>
                            <td class="px-6 py-4 text-sm font-mono">
                              ${p.masked_token ? status + ' ' + p.masked_token : 'No token'}
                            </td>
                            <td class="px-6 py-4 text-sm text-gray-500">
                              ${new Date(p.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
                            </td>
                            <td class="px-6 py-4 text-right">
                              <button onclick="deletePlatform('${p.platform_id}', '${p.name.replace(/'/g, "\\'")}')"
                                      class="text-red-600 hover:text-red-900 font-medium text-sm">Delete</button>
                            </td>
                          `
                          tbody.appendChild(row)
                        })
                      } catch (err) {
                        alert('Failed to load: ' + err.message)
                        skeletonPlatform.classList.add('hidden')
                      }
                    }
                
                    async function deletePlatform(id, name) {
                      if (!confirm(`Delete "${name}"? This cannot be undone.`)) return
                      try {
                        const res = await fetch(`/api/platforms/${id}`, { method: 'DELETE' })
                        if (!res.ok) throw new Error(await res.text())
                        loadPlatforms()
                      } catch (e) {
                        alert('Delete failed: ' + e.message)
                      }
                    }
                
                    form.onsubmit = async e => {
                      e.preventDefault()
                      saveBtn.disabled = true
                      saveBtn.textContent = 'Saving...'
                
                      const data = Object.fromEntries(new FormData(form))
                
                      try {
                        const res = await fetch('/api/platforms/create', {
                          method: 'POST',
                          headers: { 'Content-Type': 'application/json' },
                          body: JSON.stringify(data)
                        })
                
                        if (!res.ok) {
                          const err = await res.json()
                          throw new Error(err.detail || 'Failed to create')
                        }
                
                        modal.close()
                        form.reset()
                        loadPlatforms()
                        alert('Platform created successfully!')
                      } catch (e) {
                        alert('Error: ' + e.message)
                      } finally {
                        saveBtn.disabled = false
                        saveBtn.textContent = 'Save Platform'
                      }
                    }
                
                    // Refresh button
                    document.getElementById('refreshBtn').onclick = loadPlatforms
                
                    // Load on start
                    loadPlatforms()
                  </script>

                  </section>

                </main>
            </div>
            <div class="tab-content">
              <div class="placeholder-screen">Competitors</div>
          </div>

            <div class="tab-content">
                <div class="placeholder-screen">Mentions</div>
            </div>

            <div class="tab-content">
                <div class="placeholder-screen">Engagement</div>
            </div>

            <div class="tab-content">
                <div class="placeholder-screen">Campaigns</div>
            </div>

        </div>
    </div>
</div>


  


  <div id="postUiModalOverlay" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-slate-900/60 transition-opacity" onclick="closePostUiModal()"></div>
    <div class="fixed inset-0 z-10 overflow-y-auto">
      <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-2xl bg-white dark:bg-slate-850 text-left shadow-2xl transition-all sm:my-8 w-full max-w-5xl"
             onclick="event.stopPropagation()">
           <div id="modalContent"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="modalOverlay" class="relative z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity"></div>
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xl border border-gray-200">
                <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
                            <h3 class="text-lg font-semibold leading-6 text-gray-900" id="modalTitle">Draft Details</h3>
                            <div class="mt-4">
                                <div class="rounded-lg bg-gray-50 border border-gray-100 p-2 flex justify-center mb-4">
                                    <img id="modalImg" src="" class="max-h-64 object-contain rounded shadow-sm" style="display:none">
                                    <div id="modalNoImg" class="text-gray-400 text-sm py-8 hidden">No Media Available</div>
                                </div>
                                <div class="bg-gray-50 rounded p-3 border border-gray-200">
                                    <pre id="modalContentText" class="whitespace-pre-wrap text-sm text-gray-700 font-sans"></pre>
                                </div>
                                <div class="mt-3 flex gap-2">
                                    <span id="modalHashtags" class="text-sm font-medium text-primary-600"></span>
                                </div>
                                <div class="mt-2 text-xs text-gray-500 border-t pt-2">
                                    Scheduled: <span id="modalTime" class="font-medium text-gray-700"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 border-t border-gray-100">
                    <button type="button" id="closeModalBtn" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
  // Simplified State
  let state = {
      limit: 10,      // Default limit
      nextOffset: null,
      prevOffset: null,
      currentOffset: 0
  };

  const els = {
      tbody: document.getElementById('tableBody'),
      skeletonDraft: document.getElementById('skeletonDraft'),
      empty: document.getElementById('emptyState'),
      error: document.getElementById('errorState'),
      lblStart: document.getElementById('lblStart'),
      lblEnd: document.getElementById('lblEnd'),
      lblTotal: document.getElementById('lblTotal'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      modal: document.getElementById('modalOverlay')
  };

  document.addEventListener('DOMContentLoaded', () => {
      fetchData(0);

      els.btnPrev.addEventListener('click', () => {
          if (state.prevOffset !== null) {
              fetchData(state.prevOffset);
          }
      });

      els.btnNext.addEventListener('click', () => {
          if (state.nextOffset !== null) {
              fetchData(state.nextOffset);
          }
      });


      document.getElementById('closeModalBtn').addEventListener('click', () => {
          els.modal.classList.add('hidden');
      });
  });

  async function fetchData(offset = 0) {
      setLoading(true);
      try {
          state.currentOffset = offset;

          const res = await fetch(`/api/tasks/approved?limit=${state.limit}&offset=${offset}`);
          if (!res.ok) throw new Error("API Failed");
          
          const data = await res.json();

          state.nextOffset = data.next_offset; 
          state.prevOffset = data.prev_offset;

          if (data.limit) state.limit = data.limit;

          renderTable(data.tasks);
          renderPagination(data);
          
      } catch (err) {
          console.error(err);
          els.tbody.innerHTML = '';
          els.error.classList.remove('hidden');
          els.empty.classList.add('hidden');
      } finally {
          setLoading(false);
      }
  }

  function renderPagination(data) {
      const total = data.total_count || 0;
      const count = data.tasks ? data.tasks.length : 0;
      
      // Calculate "Showing X - Y"
      const start = count === 0 ? 0 : state.currentOffset + 1;
      const end = state.currentOffset + count;
      
      els.lblStart.textContent = start;
      els.lblEnd.textContent = end;
      els.lblTotal.textContent = total;

      els.btnPrev.disabled = (state.prevOffset === null);
      els.btnNext.disabled = (state.nextOffset === null);
  }

  function renderTable(tasks) {
      els.tbody.innerHTML = '';
      els.error.classList.add('hidden');

      if (!tasks || tasks.length === 0) {
          els.empty.classList.remove('hidden');
          els.empty.classList.add('flex');
          return;
      }
      
      els.empty.classList.add('hidden');
      els.empty.classList.remove('flex');

      tasks.forEach(t => {
          const tr = document.createElement('tr');
          tr.className = "hover:bg-gray-50 transition-colors duration-150 group";
          
          const dateStr = t.created_at ? new Date(t.created_at).toLocaleDateString() : '-';
          
          // Thumbnail Logic
          let mediaHtml = '';
          if(t.has_image && t.media_url) {
              mediaHtml = `<img src="${t.media_url}" class="h-10 w-10 rounded-lg object-cover border border-gray-200 group-hover:border-gray-300">`;
          } else {
              mediaHtml = `<div class="h-10 w-10 rounded bg-gray-100 flex items-center justify-center text-xs font-semibold text-gray-400 border border-gray-200">TXT</div>`;
          }

          tr.innerHTML = `
              <td class="whitespace-nowrap py-4 pl-4 pr-3 sm:pl-6">
                  <div class="flex items-center">
                      <div class="h-10 w-10 flex-shrink-0">
                          ${mediaHtml}
                      </div>
                      <div class="ml-4">
                          <div class="font-sembold text-gray-900">${escapeHtml(t.title || 'Untitled')}</div>
                          <div class="text-gray-500 text-xs truncate max-w-[200px]">${escapeHtml(t.caption_preview || '')}</div>
                      </div>
                  </div>
              </td>
              <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${dateStr}</td>
              <td class="whitespace-nowrap px-3 py-4 text-sm">
                <span class="text-xs font-medium px-2.5 py-1 rounded-full bg-green-100 dark:bg-green-700 text-green-800 dark:text-green-200">Approved</span>  
              </td>
              <td class="relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6">
                  
              <button class="text-xs inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded hover:shadow-sm" onclick="openDetail('${t.task_id}')">
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none"><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0zM2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7S3.732 16.057 2.458 12z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                View
                </button>
            </td>
          `;
          els.tbody.appendChild(tr);
      });
  }

  function setLoading(bool) {
      if(bool) {
          skeletonDraft.classList.remove('hidden')
          els.tbody.classList.add('opacity-50', 'pointer-events-none'); 
      } else {
          skeletonDraft.classList.add('hidden')
          els.tbody.classList.remove('opacity-50', 'pointer-events-none');
      }
  }

  async function openDetail(taskId) {
      try {
          const res = await fetch(`/api/tasks/approved/${taskId}`);
          if(!res.ok) throw new Error("Err");
          const d = await res.json();
          
          const gc = d.generated_content || {};
          console.log(gc);
          document.getElementById('modalTitle').textContent = d.title || "Task Details";
          document.getElementById('modalContentText').textContent = gc.caption ;
          
          const tags = gc.hashtags || [];
          document.getElementById('modalHashtags').textContent = tags.map(t => `#${t}    `).join(' ');

          document.getElementById('modalTime').textContent = gc.suggested_posting_time || "Not scheduled";

          const img = document.getElementById('modalImg');
          const noImg = document.getElementById('modalNoImg');
          if(d.preview_image) {
              img.src = d.preview_image;
              img.style.display = 'block';
              noImg.classList.add('hidden');
          } else {
              img.style.display = 'none';
              noImg.classList.remove('hidden');
              noImg.style.display = 'block';
          }

          els.modal.classList.remove('hidden');
      } catch(e) {
          console.error(e);
          alert("Could not load details");
      }
  }

  function escapeHtml(text) {
      if (!text) return "";
      return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
  }
</script>

<script>
    const examples = [
      "A LinkedIn post about the future of remote work, professional tone",
      "A short social media caption about AI in education",
      "A blog intro about sustainable business trends",
      "A friendly announcement for a new product launch",
      "A concise summary for a newsletter section"
    ];
    
    const el = document.getElementById("animatedPlaceholder");
    
    let exampleIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let isPaused = false;  // <-- NEW
    
    const cursor = "▋"; 
    
    function type() {
      if (!isPaused) {                         // <-- stop animation when paused
        const full = examples[exampleIndex];

        if (!isDeleting) {
          charIndex++;
        } else {
          charIndex--;
        }

        const text = full.substring(0, charIndex);

        el.placeholder = text + " " + cursor;

        let speed = isDeleting ? 45 : 70;

        if (!isDeleting && charIndex === full.length) {
          speed = 1300;
          isDeleting = true;
        }

        if (isDeleting && charIndex === 0) {
          isDeleting = false;
          exampleIndex = (exampleIndex + 1) % examples.length;
          speed = 350;
        }

        setTimeout(type, speed);
        return;
      }

      // If paused, check again soon
      setTimeout(type, 150);
    }

    // ---- EVENT HANDLERS ----
    el.addEventListener("focus", () => {
      isPaused = true;
      el.placeholder = "";         // optional: clear placeholder on focus
    });

    el.addEventListener("blur", () => {
      isPaused = false;
    });

    type();
</script>

    
    

<script src="/static/Tabs.js"></script>
<script src="/static/PostAi.js"></script>

</body>
</html>