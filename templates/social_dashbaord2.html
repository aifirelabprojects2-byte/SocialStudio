<style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .nav-pill { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .nav-pill.active {
        background-color: #f1f1f1;
        color: #434343;
        border-color: #d9d9d9;
    }
    .nav-pill.active svg { fill: white; }
    .nav-pill.active .status-indicator { background-color: #10b981; border-color: #0f172a; }
    .nav-pill:not(.active):hover {
        border-color: #cbd5e1;
        background-color: #ffffff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        transform: scale(1.01);
    }
    .fade-in { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    /* Card Hover Effects */
    .task-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
    }
</style>
<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>SocialStudio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              brand: {
                DEFAULT: "#EA4335", // Blaze Red
                hover: "#D33828",
                light: "#FCE8E6",
              },
              dark: {
                bg: "#09090b", // Zinc 950
                surface: "#18181b", // Zinc 900
                border: "#27272a", // Zinc 800
              }
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
            boxShadow: {
              'subtle': '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
              'card': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
            }
          },
        },
      };
    </script>
    <style>
        body, html {
            font-family: "Plus Jakarta Sans", "system-ui", "sans-serif";
            font-feature-settings: "cv11", "ss01";
            font-weight: 400;
            background: radial-gradient(circle at 50% 50%, #ffffff 0%, #eef1f5 100%);
            transition: background-color 0.2s, color 0.2s;
            height: 100vh;
            overflow: hidden;
            color: var(--text-main);
            width: 100%;
          }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: #e4e4e7; border-radius: 3px; }
        .dark ::-webkit-scrollbar-thumb { background-color: #3f3f46; }
        
        /* Hide sections by default, show active */
        .view-section { display: none; animation: fadeIn 0.3s ease-out; }
        .view-section.active { display: flex; flex-direction: column; height: 100%; overflow-y: auto; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-dark-bg text-gray-900 dark:text-gray-100 h-screen flex overflow-hidden">

    <aside class="w-64 bg-white dark:bg-dark-surface border-r border-gray-200 dark:border-dark-border flex flex-col flex-shrink-0 z-20">
        <div class="h-16 flex items-center px-6 border-b border-gray-100 dark:border-dark-border">
            <div class="flex items-center gap-2 font-bold text-xl tracking-tight text-gray-900 dark:text-white">
                <div class="p-1.5 bg-gray-100 text-white rounded-lg">
                    <svg width="26" height="26" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-slate-900" ><path d="M12,22.24a1,1,0,0,1-.5-.14l-8-4.62a1,1,0,0,1-.5-.86V7.38a1,1,0,0,1,.5-.86l8-4.62a1,1,0,0,1,1,0l8,4.62a1,1,0,0,1,.5.86v9.24a1,1,0,0,1-.5.86l-8,4.62A1,1,0,0,1,12,22.24ZM5,16l7,4,7-4V8l-7-4L5,8Z"/><path d="M12,19a1,1,0,0,1-1-1V12a1,1,0,0,1,.49-.86l5-3a1,1,0,0,1,1,1.72L13,12.57V18A1,1,0,0,1,12,19Z"/> <path d="M12,13a1,1,0,0,1-.51-.14l-5-3a1,1,0,0,1,1-1.72l5,3A1,1,0,0,1,12,13Z"/></svg>
                </div>
                Social Studio
            </div>
        </div>

        <div class="p-4">
            <button class="w-full group bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 hover:border-brand dark:hover:border-brand text-gray-700 dark:text-gray-200 py-2.5 px-4 rounded-xl flex items-center justify-center gap-2 font-medium transition-all shadow-sm hover:shadow-md">
                <i data-lucide="plus" class="w-4 h-4 text-brand group-hover:scale-110 transition-transform"></i>
                <span>Create New</span>
            </button>
        </div>

        <nav class="flex-1 overflow-y-auto px-3 space-y-0.5" id="sidebar-nav">
            
            <a href="#" onclick="switchView('home', this)" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors group">
                <i data-lucide="layout-dashboard" class="w-5 h-5 group-hover:text-brand transition-colors"></i>
                <span class="font-medium text-sm">Home</span>
            </a>

            <a href="#" onclick="switchView('calendar', this)" class="nav-item active flex items-center gap-3 px-3 py-2 bg-brand-light/50 dark:bg-brand/10 text-brand dark:text-brand rounded-lg transition-colors">
                <i data-lucide="calendar" class="w-5 h-5"></i>
                <span class="font-medium text-sm">Calendar</span>
            </a>

            <a href="#" onclick="switchView('ads', this)" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors group">
                <i data-lucide="megaphone" class="w-5 h-5 group-hover:text-brand transition-colors"></i>
                <span class="font-medium text-sm">Paid Ads</span>
            </a>

            <a href="#" onclick="switchView('content', this)" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors group">
                <i data-lucide="kanban" class="w-5 h-5 group-hover:text-brand transition-colors"></i>
                <span class="font-medium text-sm">Content Plan</span>
            </a>

            <a href="#" onclick="switchView('brand', this)" class="nav-item flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors group">
                <i data-lucide="palette" class="w-5 h-5 group-hover:text-brand transition-colors"></i>
                <span class="font-medium text-sm">Brand Kit</span>
            </a>

            <div class="pt-6 pb-2 px-3 flex items-center justify-between">
                <span class="text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider">Workspace</span>
                <i data-lucide="plus" class="w-3.5 h-3.5 text-gray-400 cursor-pointer hover:text-brand"></i>
            </div>

            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors">
                <i data-lucide="folder" class="w-4 h-4"></i>
                <span class="text-sm">Q1 Marketing</span>
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors">
                <i data-lucide="folder-open" class="w-4 h-4"></i>
                <span class="text-sm">Brand Assets</span>
            </a>
        </nav>

        <div class="p-3 border-t border-gray-200 dark:border-dark-border space-y-1">
            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-500 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors text-sm">
                <i data-lucide="users" class="w-4 h-4"></i>
                Invite Team
            </a>
            <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-500 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors text-sm">
                <i data-lucide="life-buoy" class="w-4 h-4"></i>
                Help & Support
            </a>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 bg-gray-50 dark:bg-dark-bg relative">
        
        <header class="h-[70px] flex items-center justify-between px-6 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border z-10 sticky top-0">
            <div class="relative w-96 hidden md:block group">
                <span class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <i data-lucide="search" class="w-4 h-4 text-gray-400 group-focus-within:text-brand transition-colors"></i>
                </span>
                <input class="block w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-zinc-700 rounded-full leading-5  dark:bg-zinc-800/50 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:outline-none focus:bg-white dark:focus:bg-zinc-900 focus:ring-1 focus:ring-brand focus:border-brand sm:text-sm transition-all" placeholder="Search tasks, events, or files..." type="text"/>
                <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                    <span class="text-gray-400 text-xs border border-gray-200 dark:border-zinc-700 rounded px-1.5 py-0.5">âŒ˜K</span>
                </div>
            </div>

            <div class="flex items-center gap-3">
                <!-- <button class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-colors" onclick="document.documentElement.classList.toggle('dark')">
                    <i data-lucide="moon" class="w-5 h-5 hidden dark:block"></i>
                    <i data-lucide="sun" class="w-5 h-5 block dark:hidden"></i>
                </button> -->
                <a href="/design" title="Design Studio">
                    <button class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg text-gray-600 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-400 transition-all duration-300 ease-in-out">
                      <span class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium transition-all duration-300 ease-in-out group-hover:max-w-[120px]">
                        DesignStudio
                      </span>
                      <svg width="20" height="20" viewBox="0 -2 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7601.000000)" fill="currentColor"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M102.8695,7446.25504 C101.3625,7444.73916 98.9185,7444.73916 97.4115,7446.25504 L91.2705,7452.43224 C90.8935,7452.81045 90.8935,7453.42505 91.2705,7453.80428 C91.6475,7454.1835 92.2585,7454.1835 92.6355,7453.80428 L98.7755,7447.62809 C99.5285,7446.86964 100.7515,7446.86964 101.5045,7447.62809 C102.2585,7448.38552 102.2585,7449.61473 101.5045,7450.37317 L95.4825,7456.43066 C96.2355,7457.1881 97.4575,7457.1881 98.2115,7456.43066 L102.8695,7451.74521 C104.3765,7450.22933 104.3765,7447.77092 102.8695,7446.25504 M100.8225,7448.31411 C100.4455,7447.93488 99.8345,7447.93488 99.4575,7448.31411 L93.3175,7454.49029 C92.5635,7455.24874 91.3415,7455.24874 90.5885,7454.49029 C90.2115,7454.11107 89.6005,7454.11107 89.2235,7454.49029 C88.8465,7454.86952 88.8465,7455.48412 89.2235,7455.86233 C90.7305,7457.37922 93.1745,7457.37922 94.6825,7455.86233 L100.8225,7449.68615 C101.1995,7449.30793 101.1995,7448.69232 100.8225,7448.31411 M98.7755,7442.13691 C97.2685,7440.62103 94.8245,7440.62103 93.3175,7442.13691 L87.1765,7448.31411 C86.8005,7448.69232 86.8005,7449.30793 87.1765,7449.68615 C87.5535,7450.06537 88.1645,7450.06537 88.5415,7449.68615 L94.6825,7443.50996 C95.4355,7442.75151 96.6575,7442.75151 97.4105,7443.50996 C97.7875,7443.88918 98.3985,7443.88918 98.7755,7443.50996 C99.1525,7443.13073 99.1525,7442.51613 98.7755,7442.13691 M96.7285,7444.19598 C96.3515,7443.81675 95.7405,7443.81675 95.3645,7444.19598 L89.2235,7450.37317 C88.4695,7451.13061 87.2485,7451.13061 86.4945,7450.37317 C85.7405,7449.61473 85.7405,7448.38552 86.4945,7447.62708 L92.5175,7441.56959 C91.7635,7440.81114 90.5415,7440.81114 89.7875,7441.56959 L85.1295,7446.25504 C83.6235,7447.77092 83.6235,7450.22933 85.1295,7451.74521 C86.6375,7453.2621 89.0805,7453.2621 90.5885,7451.74521 L96.7285,7445.56902 C97.1055,7445.1898 97.1055,7444.5752 96.7285,7444.19598" id="squarespace-[#132]"></path></g></g></g></svg>
                    </button>
                  </a>
                <a href="/setting" title="Settings">
                  <button class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg text-gray-600 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-400 transition-all duration-300 ease-in-out">
                    <span class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium transition-all duration-300 ease-in-out group-hover:max-w-[80px]">
                      Settings
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                  </button>
                </a>
                <form action="/logout" method="POST" class="m-0">
                  <button class="group flex items-center gap-0 hover:gap-2 p-2 rounded-lg text-gray-600 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400 transition-all duration-300 ease-in-out">
                    <span class="max-w-0 overflow-hidden whitespace-nowrap text-sm font-medium transition-all duration-300 ease-in-out group-hover:max-w-[80px]">
                      Logout
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                  </button>
                </form>
            </div>
        </header>

        <section id="calendar" class="view-section active overflow-hidden">
            <div class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border">
                <div class="flex items-center gap-4">
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight">January 2026</h1>
                    <div class="flex items-center bg-gray-100 dark:bg-zinc-800 rounded-lg p-1">
                        <button class="p-1 hover:bg-white dark:hover:bg-zinc-700 rounded-md transition-all shadow-sm text-gray-500">
                            <i data-lucide="chevron-left" class="w-4 h-4"></i>
                        </button>
                        <button class="px-3 text-sm font-medium text-gray-700 dark:text-gray-300">Today</button>
                        <button class="p-1 hover:bg-white dark:hover:bg-zinc-700 rounded-md transition-all shadow-sm text-gray-500">
                            <i data-lucide="chevron-right" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
            </div>
            <main class="flex-1 flex flex-col">
                <div class="p-6 border-b border-slate-200">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0">
                        <div class="flex flex-wrap items-center gap-3 w-full sm:w-auto">
                            <div class="bg-white border border-slate-200 rounded-lg flex p-1 shadow-sm">
                                <button onclick="switchViewBlz('list')" id="btn-listBlz" class="p-2 rounded-md transition-all text-slate-500 hover:text-gray-700">
                                    <i data-lucide="list" class="w-4 h-4"></i>
                                </button>
                                <button onclick="switchViewBlz('grid')" id="btn-gridBlz" class="p-2 rounded-md transition-all text-slate-500 hover:text-gray-700">
                                    <i data-lucide="layout-grid" class="w-4 h-4"></i>
                                </button>
                            </div>
                            <div class="relative group">
                                <button id="filter-btnBlz" class="flex items-center space-x-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 shadow-sm transition-all">
                                    <i data-lucide="filter" class="w-4 h-4 text-slate-500"></i>
                                    <span>Filters</span>
                                    <i data-lucide="chevron-down" class="w-3 h-3 text-slate-400"></i>
                                </button>
                                
                                <!-- Dropdown Content -->
                                <div id="filter-dropdownBlz" class="hidden absolute left-0 mt-2 w-80 bg-white border border-slate-100 rounded-xl shadow-xl p-5 z-30">
                                    <div class="space-y-5">
                                        
                                        <div>
                                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 block">Platform</label>
                                            <div class="grid grid-cols-1 gap-2" id="platform-checksBlz">
                                                <!-- Will be populated by JS for cleaner code -->
                                            </div>
                                        </div>
                                        <div class="pt-3 border-t border-slate-100 flex justify-between items-center">
                                            <button onclick="resetFiltersBlz()" class="text-xs text-slate-500 hover:text-slate-800 font-medium">Reset All</button>
                                            <button onclick="applyFiltersBlz()" class="bg-gray-700 text-white px-4 py-2 rounded-lg text-xs font-medium hover:bg-gray-800">Apply Filters</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
        
                            <div class="border-l border-slate-300 h-6 mx-2 hidden sm:block"></div>
        
                            <!-- Quick Status Tabs -->
                            <div class="flex space-x-1 bg-slate-200/50 p-1 rounded-lg" id="quick-tabsBlz">
                                <button onclick="quickFilterBlz('all')" id="tab-allBlz" class="px-3 py-1.5 text-xs font-medium rounded-md bg-white text-gray-700 shadow-sm transition-all">All</button>
                                <button onclick="quickFilterBlz('scheduled')" id="tab-scheduledBlz" class="px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all">Scheduled</button>
                                <button onclick="quickFilterBlz('draft_approved')" id="tab-draft_aprvBlz" class="px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all">Approved</button>
                                <button onclick="quickFilterBlz('posted')" id="tab-postedBlz" class="px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all">Published</button>
                            </div>
                        </div>
                    </div>
                </div>
        
                <!-- Content Area -->
                <div id="posts-containerBlz" class="flex-1 p-6 overflow-y-auto">
                    <!-- Dynamic Content -->
                    <div class="flex justify-center items-center h-64">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-700"></div>
                    </div>
                </div>
        
                <!-- Pagination -->
                <footer class="bg-white border-t border-slate-200 p-4 flex justify-between items-center sticky bottom-0">
                    <span id="page-infoBlz" class="text-sm text-slate-500 font-medium">Page 1 of 1</span>
                    <div class="flex space-x-2">
                        <button id="prev-pageBlz" class="px-3 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center">
                            <i data-lucide="chevron-left" class="w-4 h-4 mr-1"></i> Prev
                        </button>
                        <button id="next-pageBlz" class="px-3 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center">
                            Next <i data-lucide="chevron-right" class="w-4 h-4 ml-1"></i>
                        </button>
                    </div>
                </footer>
            </main>

            
        </section>

        <section id="home" class="view-section items-center justify-center h-full">
            <div class="w-full h-full">
                <div class="px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white dark:bg-dark-surface border-b border-gray-200 dark:border-dark-border">
                    <div class="flex items-center gap-4">
                        <h1 class="text-2xl font-bold text-gray-900 dark:text-white tracking-tight">Connect</h1>
                        <div class="flex items-center bg-gray-100 dark:bg-zinc-800 rounded-lg p-1">
                            <!-- <button class="p-1 hover:bg-white dark:hover:bg-zinc-700 rounded-md transition-all shadow-sm text-gray-500">
                                <i data-lucide="chevron-left" class="w-4 h-4"></i>
                            </button>
                            <button class="px-3 text-sm font-medium text-gray-700 dark:text-gray-300">Today</button>
                            <button class="p-1 hover:bg-white dark:hover:bg-zinc-700 rounded-md transition-all shadow-sm text-gray-500">
                                <i data-lucide="chevron-right" class="w-4 h-4"></i>
                            </button> -->
                        </div>
                    </div>
                    <div class="flex items-center gap-6">
                        <div class="flex items-center gap-2">
                            <span class="text-[13px] font-medium text-slate-400">Scheduled:</span>
                            <span class="text-[13px] font-semibold text-slate-900" id="statScheduled">0</span>
                        </div>
                        <div class="w-px h-3 bg-slate-200"></div> <div class="flex items-center gap-2">
                            <span class="text-[13px] font-medium text-slate-400">Total Posted:</span>
                            <span class="text-[13px] font-semibold text-slate-900" id="statPosted">0</span>
                        </div>
                    </div>
                </div>

                <div class="relative group p-4">
                   
                    <div class="flex items-center justify-center gap-3 overflow-x-auto no-scrollbar p-1 pb-4 mb-2 snap-x">
                       
                        {% for item in nav_items %}
                            {% if item.is_connected %}
                                <button id="pill-{{ item.id }}"
                                        onclick="loadPlatform('{{ item.db_id }}', this)"
                                        data-svg="{{ item.svg }}"
                                        class="nav-pill snap-start flex items-center gap-3 pl-3 pr-5 py-2.5 rounded-full border border-slate-200 bg-white text-sm font-medium text-slate-700 whitespace-nowrap cursor-pointer select-none">
                                   
                                    <div class="relative">
                                        <img src="{{ item.profile_url or 'https://ui-avatars.com/api/?background=random&color=fff&name=' + item.name }}"
                                             alt="{{ item.name }}"
                                             class="w-8 h-8 rounded-full object-cover ring-2 ring-white shadow-sm">
                                        <div class="status-indicator absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full"></div>
                                    </div>
                                   
                                    <div class="flex flex-col items-start leading-none">
                                        <span class="block text-xs opacity-60 font-normal mb-0.5">{{ item.name }}</span>
                                        <span>Connected</span>
                                    </div>
                                </button>
                            {% else %}
                                <!-- Disconnected Platform -->
                                <a href="{{ item.action_url }}"
                                   class="nav-pill snap-start flex items-center gap-3 px-5 py-2.5 rounded-full border border-dashed border-slate-300 bg-slate-50/50 text-slate-400 text-sm font-medium whitespace-nowrap hover:text-slate-600 hover:border-slate-400 hover:bg-white transition-colors">
                                    <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center overflow-hidden">
                                        <!-- Render SVG Path from Backend -->
                                        <svg class="w-4 h-4 fill-current opacity-70" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path d="{{ item.svg }}"/>
                                        </svg>
                                    </div>
                                    <span>Connect {{ item.name }}</span>
                                </a>
                            {% endif %}
                        {% endfor %}
                       
                    </div>
                </div>
                <div id="mainContent" class="min-h-[400px] p-6">
                    <div id="loadingState" class="hidden h-96 flex flex-col items-center justify-center text-slate-400">
                        <div class="relative">
                            <div class="w-12 h-12 border-4 border-slate-100 border-t-slate-900 rounded-full animate-spin"></div>
                        </div>
                        <p class="text-sm font-medium mt-4 animate-pulse">Syncing platform data...</p>
                    </div>
                    <div id="zeroState" class="hidden flex flex-col items-center justify-center py-24 bg-white rounded-2xl border border-slate-200 border-dashed shadow-sm text-center px-4">
                        <div class="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mb-6 rotate-3">
                            <i class="fa-solid fa-rocket text-2xl text-blue-600"></i>
                        </div>
                        <h2 class="text-xl font-bold text-slate-900 mb-2">Start Your Social Journey</h2>
                        <p class="text-slate-500 max-w-sm mb-8 leading-relaxed">Select an account above or connect a new platform to start scheduling posts and tracking analytics.</p>
                       
                        <div class="flex gap-6 mt-2 opacity-40">
                            <i class="fa-brands fa-instagram text-2xl"></i>
                            <i class="fa-brands fa-facebook text-2xl"></i>
                            <i class="fa-brands fa-linkedin text-2xl"></i>
                            <i class="fa-brands fa-x-twitter text-2xl"></i>
                            <i class="fa-brands fa-threads text-2xl"></i>
                        </div>
                    </div>
                    <div id="dataState" class="hidden fade-in">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center gap-2">
                                <h3 class="text-lg font-bold text-slate-900">Recent Tasks</h3>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="relative group">
                                    <select id="filterSelect" class="appearance-none bg-white border border-slate-200 px-5 py-2.5 rounded-2xl text-sm font-medium text-slate-600 hover:border-slate-300 hover:text-slate-900 focus:outline-none focus:ring-4 focus:ring-slate-100 focus:border-slate-400 transition-all cursor-pointer">
                                        <option value="all">All Tasks</option>
                                        <option value="scheduled">Scheduled</option>
                                        <option value="posted">Posted</option>
                                        <option value="failed">Failed</option>
                                    </select>
                                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-slate-400 group-hover:text-slate-600 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                                        </svg>
                                    </div>
                                </div>
                                <a href="/create-task" class="flex items-center gap-2 text-sm text-slate-600 font-medium hover:text-slate-900 bg-white border border-slate-200 px-4 py-2.5 rounded-2xl  hover:border-slate-300 transition-all">
                                    <i class="fa-solid fa-plus text-xs"></i>
                                    New Task
                                </a>
                            </div>
                        </div>
                        <div id="taskList" class="grid gap-4">
                        </div>
                    </div>
                </div>
            </div>            
        </section>

        <section id="ads" class="view-section items-center justify-center h-full text-center p-10">
             <div class="max-w-md">
                <div class="bg-white dark:bg-zinc-800 p-4 rounded-2xl inline-block mb-4 shadow-sm">
                    <i data-lucide="megaphone" class="w-12 h-12 text-blue-500"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Paid Ads Manager</h2>
                <p class="text-gray-500 dark:text-gray-400">Manage Facebook, Google, and LinkedIn ad campaigns here.</p>
            </div>
        </section>

        <section id="content" class="view-section items-center justify-center h-full text-center p-10">
             <div class="max-w-md">
                <div class="bg-white dark:bg-zinc-800 p-4 rounded-2xl inline-block mb-4 shadow-sm">
                    <i data-lucide="kanban" class="w-12 h-12 text-purple-500"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Content Pipeline</h2>
                <p class="text-gray-500 dark:text-gray-400">Drag and drop Kanban board for content production.</p>
            </div>
        </section>
        
        <section id="brand" class="view-section items-center justify-center h-full text-center p-10">
             <div class="max-w-md">
                <div class="bg-white dark:bg-zinc-800 p-4 rounded-2xl inline-block mb-4 shadow-sm">
                    <i data-lucide="palette" class="w-12 h-12 text-pink-500"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Brand Assets</h2>
                <p class="text-gray-500 dark:text-gray-400">Logos, colors, fonts and media library.</p>
            </div>
        </section>

        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-white/90 dark:bg-zinc-800/90 backdrop-blur-md border border-gray-200 dark:border-zinc-700 rounded-full shadow-card p-1.5 flex items-center gap-1 z-30 ring-1 ring-black/5">
            <button class="flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-200 text-sm font-medium transition-colors">
                <i data-lucide="sparkles" class="w-4 h-4 text-brand"></i>
                Ask AI
            </button>
            <div class="w-px h-5 bg-gray-200 dark:bg-zinc-600 mx-1"></div>
            <button class="flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-200 text-sm font-medium transition-colors">
                <i data-lucide="wand-2" class="w-4 h-4 text-purple-500"></i>
                Auto-Schedule
            </button>
        </div>

    </main>

    <script>
        lucide.createIcons();
        function switchView(viewId, element) {
            document.querySelectorAll('.view-section').forEach(el => {
                el.classList.remove('active');
            });

            const target = document.getElementById(viewId);
            if(target) target.classList.add('active');
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active', 'bg-brand-light/50', 'dark:bg-brand/10', 'text-brand', 'dark:text-brand');
                el.classList.add('text-gray-600', 'dark:text-gray-400', 'hover:bg-gray-50', 'dark:hover:bg-zinc-800/50');
                
                // Reset icon color in inactive state
                const icon = el.querySelector('svg');
                if(icon) icon.classList.remove('text-brand');
            });

            element.classList.remove('text-gray-600', 'dark:text-gray-400', 'hover:bg-gray-50', 'dark:hover:bg-zinc-800/50');
            element.classList.add('active', 'bg-brand-light/50', 'dark:bg-brand/10', 'text-brand', 'dark:text-brand');
        }
    </script>
    <!-- Connection -->

    <script>
        const defaultPillId = {{ default_platform_pill_id | tojson }};
        const defaultDbId = {{ default_platform_db_id | tojson }};
        const zeroState = document.getElementById('zeroState');
        const dataState = document.getElementById('dataState');
        const loadingState = document.getElementById('loadingState');
        const taskList = document.getElementById('taskList');
        const statScheduled = document.getElementById('statScheduled');
        const statPosted = document.getElementById('statPosted');
        document.addEventListener('DOMContentLoaded', () => {
            if (defaultPillId && defaultDbId) {
                const pillBtn = document.getElementById(`pill-${defaultPillId}`);
                if (pillBtn) {
                    loadPlatform(defaultDbId, pillBtn);
                }
            } else {
                zeroState.classList.remove('hidden');
            }
        });
        async function loadPlatform(platformId, btnElement) {
            document.querySelectorAll('.nav-pill').forEach(el => el.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
            // 2. State: Switch to Loading
            zeroState.classList.add('hidden');
            dataState.classList.add('hidden');
            loadingState.classList.remove('hidden');
            try {
                const svgPath = btnElement.dataset.svg;
                const profileImg = btnElement.querySelector('img').src;
                // 3. API Call to your Backend
                const res = await fetch(`/api/platform/${platformId}/tasks`);
                if (!res.ok) throw new Error('Failed to fetch platform tasks');
               
                const data = await res.json();
                const accountName = data.account_name;
                // 4. Update Stats with Animation
                // Backend returns: stats: { scheduled_count: int, total_posted: int }
                animateValue(statScheduled, 0, data.stats.scheduled_count, 800);
                animateValue(statPosted, 0, data.stats.total_posted, 800);
                // 5. Store tasks and render
                let allTasks = data.tasks;
                function renderTasks(filter = 'all') {
                    taskList.innerHTML = ''; // Clean slate
                    let filteredTasks = filter === 'all' ? allTasks : allTasks.filter(task => task.status.toLowerCase() === filter);
                    if (filteredTasks.length === 0) {
                        if (allTasks.length === 0) {
                            taskList.innerHTML = `
                                <div class="flex flex-col items-center justify-center py-24 px-6 border border-slate-200 rounded-2xl shadow-[0_1px_3px_rgba(0,0,0,0.02)]">
                                    <div class="mb-5">
                                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-slate-300">
                                            <path d="M8 2V5M16 2V5M3.5 9.09H20.5M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M11.9955 13.7h.009m-.009 3.7h.009m-4.01-3.7h.01m-.01 3.7h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                        
                                    <div class="text-center max-w-sm">
                                        <h4 class="text-[16px] font-semibold text-slate-900 tracking-tight">No scheduled content</h4>
                                        <p class="text-slate-500 text-sm mt-1.5 leading-relaxed">
                                            Posts scheduled for your connected social accounts will appear here. Start by creating a new task.
                                        </p>
                                    </div>
                        
                                    <div class="mt-8">
                                        <a href="/create-task" class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-slate-900 rounded-md hover:bg-slate-800 transition-colors shadow-sm">
                                            Create your first post
                                        </a>
                                    </div>
                                </div>
                            `;
                        } else {
                            taskList.innerHTML = `
                                <div class="flex flex-col items-center justify-center py-20 border border-slate-200 rounded-2xl">
                                    <p class="text-sm font-medium text-slate-900">No results found</p>
                                    <p class="text-sm text-slate-500 mt-1">Try adjusting your filters to find what you're looking for.</p>
                                    <button onclick="resetFilters()" class="mt-4 text-sm font-semibold text-slate-900 underline underline-offset-4 hover:text-slate-600 transition-colors">
                                        Clear all filters
                                    </button>
                                </div>
                            `;
                        }
                    } else {
                        // --- Render Filtered Tasks ---
                        filteredTasks.forEach((task, index) => {
                            // Status badge logic
                            let statusColor = "bg-slate-100 text-slate-600 border-slate-200";
                            let statusIcon = '<i class="fa-solid fa-circle text-[6px] mr-1.5 opacity-50"></i>';
                           
                            // Handle casing from backend (e.g. 'posted' vs 'Posted')
                            const status = task.status ? task.status.toLowerCase() : 'unknown';
                            const statusDisplay = status.charAt(0).toUpperCase() + status.slice(1);
                            if(status === "posted") {
                                statusColor = "bg-emerald-50 text-emerald-700 border-emerald-200/60";
                                statusIcon = '<i class="fa-solid fa-check text-[10px] mr-1.5"></i>';
                            }
                            else if(status === "scheduled") {
                                statusColor = "bg-blue-50 text-blue-700 border-blue-200/60";
                                statusIcon = '<i class="fa-regular fa-clock text-[10px] mr-1.5"></i>';
                            }
                            else if(status === "failed") {
                                statusColor = "bg-red-50 text-red-700 border-red-200/60";
                                statusIcon = '<i class="fa-solid fa-triangle-exclamation text-[10px] mr-1.5"></i>';
                            }
                            // Staggered animation delay
                            const delay = Math.min(index * 100, 1000); // Cap delay at 1s
                            const html = `
        <div class="task-card group bg-white border border-slate-200 rounded-3xl overflow-hidden transition-all duration-300 animate-in fade-in slide-in-from-bottom-2 mb-6" style="animation-delay: ${delay}ms; animation-fill-mode: backwards;">
        
        <div class="p-6 flex justify-between gap-6">
            
            <div class="flex flex-col justify-between flex-1">
                <div>
                    <div class="flex items-center gap-2 mb-6">
                        <div class="relative">
                            <img src="${profileImg}" class="w-10 h-10 rounded-full object-cover">
                            <div class="absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 border-2 border-white flex items-center justify-center w-5 h-5 text-white">
                                <svg class="w-3 h-3 text-gray-800" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="${svgPath}" fill="currentColor"/>
                                </svg>
                            </div>
                        </div>
                        <span class="font-bold text-slate-800 text-base">${accountName}</span>
                    </div>
        
                    <div class="text-slate-800 text-[15px] font-normal leading-relaxed">
                        ${task.caption || "No caption provided."}
                    </div>
                </div>
            </div>
        
            <div class="shrink-0">
                ${task.image_url 
                    ? `<div class="w-48 h-48 rounded-lg overflow-hidden border border-slate-200 shadow-sm">
                         <img src="${task.image_url}" class="w-full h-full object-cover">
                       </div>`
                    : `<div class="w-48 h-48 rounded-lg border-2 border-dashed border-slate-200 bg-slate-50 flex items-center justify-center text-slate-300">
                         <i class="fa-regular fa-image text-4xl opacity-50"></i>
                       </div>`
                }
            </div>
        </div>
        
        <div class="px-6 py-3 border-t border-slate-200 flex items-center justify-between">
            <div class="text-sm text-slate-900 font-medium">
                You created this <span class="font-normal text-slate-600">${task.created_at}</span>
            </div>
        
            <div class="flex items-center gap-2">
                <button class="flex items-center gap-2 px-4 py-1.5 border border-slate-300 rounded-md text-slate-700 text-sm font-semibold hover:bg-slate-50 transition-all">
                ${statusIcon}${statusDisplay}
                </button>
            </div>
        </div>
        
        </div>
        `;
                            taskList.insertAdjacentHTML('beforeend', html);
                        });
                    }
                }
                // Initial render
                renderTasks('all');
                // Add filter listener
                const filterSelect = document.getElementById('filterSelect');
                filterSelect.addEventListener('change', () => renderTasks(filterSelect.value));
                // 6. Reveal
                loadingState.classList.add('hidden');
                dataState.classList.remove('hidden');
            } catch (err) {
                console.error(err);
                loadingState.innerHTML = `
                    <div class="text-center">
                        <div class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fa-solid fa-xmark text-red-500"></i>
                        </div>
                        <p class="text-slate-800 font-medium">Unable to load data</p>
                        <button onclick="location.reload()" class="text-sm text-blue-600 hover:underline mt-2">Try refreshing</button>
                    </div>
                `;
            }
        }
        function animateValue(obj, start, end, duration) {
            if (start === end) {
                obj.innerHTML = end;
                return;
            }
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
    </script>


    <script>
        lucide.createIcons();
        const SUPPORTED_PLATFORMSBlz = [
            { 
                id: "instagram", 
                name: "Instagram",
                svg: '<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>', 
                color: "#E4405F" 
            },
            { 
                id: "facebook", 
                name: "Facebook",
                svg: '<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>', 
                color: "#1877F2" 
            },
            { 
                id: "linkedin", 
                name: "LinkedIn",
                svg: '<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.202 24 24 23.227 24 22.271V1.729C24 .774 23.202 0 22.222 0h.003z"/>', 
                color: "#0A66C2" 
            },
            { 
                id: "twitter", 
                name: "Twitter (X)",
                svg: '<path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/>', 
                color: "#000000" 
            },
            { 
                id: "threads", 
                name: "Threads",
                svg: '<path d="M12.066 0C6.723 0 1.5 3.051 1.5 11.991c0 8.989 5.391 12.009 11.181 12.009 6.045 0 9.384-3.538 9.384-7.612 0-1.916-.915-3.588-2.578-4.706-.62-.415-1.358-.726-1.358-.726-.115-1.703-.621-3.035-1.508-3.966-.887-.932-2.128-1.422-3.591-1.422-2.069 0-3.564.632-4.698 2.253 0 0 1.344.933 1.749 1.203.602-.695 1.076-1.302 2.951-1.302 2.04 0 2.85 1.637 2.85 2.592-.553-.111-1.615-.171-2.495-.171-2.348 0-5.325 1.135-5.325 4.27 0 2.196 2.093 3.873 4.52 3.873 4.164 0 5.112-3.114 5.466-4.965.093 0 1.905 1.034 1.905 3.191 0 3.169-3.105 5.334-7.271 5.334-5.064 0-8.445-3.3-8.445-9.515 0-6.929 3.026-10.185 8.373-10.185 3.235 0 6.765.816 8.425 2.659l2.04-.53C20.325.365 14.535 0 12.066 0z m1.008 16.161c-.836 0-2.4-.435-2.4-1.752 0-.819.396-2.124 3.456-2.124 1.214 0 1.933.098 2.292.242-.247 3.211-1.818 3.634-3.348 3.634z"/>', 
                color: "#000000" 
            }
        ];

        let currentViewBlz = 'list';
        let currentPageBlz = 1;
        let currentStatusesBlz = [];
        let currentChannelsBlz = [];
        let totalPagesBlz = 1;

        // Populate Platform Checkboxes
        const platformChecksContainerBlz = document.getElementById('platform-checksBlz');
        SUPPORTED_PLATFORMSBlz.forEach(plat => {
            const label = document.createElement('label');
            label.className = "flex items-center space-x-3 p-2 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors";
            label.innerHTML = `
                <input type="checkbox" name="platform-checkBlz" value="${plat.id}" class="form-checkbox rounded text-gray-700 border-slate-300 focus:ring-gray-700 w-4 h-4">
                <div class="w-6 h-6 flex items-center justify-center rounded bg-gray-50 border border-gray-100">
                     <svg class="w-4 h-4" fill="${plat.color}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">${plat.svg}</svg>
                </div>
                <span class="text-sm text-slate-700 font-medium">${plat.name}</span>
            `;
            platformChecksContainerBlz.appendChild(label);
        });
        document.getElementById('filter-btnBlz').addEventListener('click', (e) => {
            e.stopPropagation();
            document.getElementById('filter-dropdownBlz').classList.toggle('hidden');
        });
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('filter-dropdownBlz');
            const btn = document.getElementById('filter-btnBlz');
            if (!dropdown.classList.contains('hidden') && !dropdown.contains(e.target) && !btn.contains(e.target)) {
                dropdown.classList.add('hidden');
            }
        });

        document.getElementById('prev-pageBlz').addEventListener('click', () => { if (currentPageBlz > 1) { currentPageBlz--; fetchPostsBlz(); } });
        document.getElementById('next-pageBlz').addEventListener('click', () => { if (currentPageBlz < totalPagesBlz) { currentPageBlz++; fetchPostsBlz(); } });

        function switchViewBlz(view) {
            currentViewBlz = view;
            const btnList = document.getElementById('btn-listBlz');
            const btnGrid = document.getElementById('btn-gridBlz');
            
            if (view === 'list') {
                btnList.classList.add('bg-slate-100', 'text-gray-700');
                btnList.classList.remove('text-slate-500');
                btnGrid.classList.remove('bg-slate-100', 'text-gray-700');
                btnGrid.classList.add('text-slate-500');
            } else {
                btnGrid.classList.add('bg-slate-100', 'text-gray-700');
                btnGrid.classList.remove('text-slate-500');
                btnList.classList.remove('bg-slate-100', 'text-gray-700');
                btnList.classList.add('text-slate-500');
            }

            if (window.postsDataBlz && window.postsDataBlz.posts) {
                renderPostsBlz(window.postsDataBlz.posts);
            }
        }
        function quickFilterBlz(status) {
            const tabs = ['all', 'scheduled', 'posted'];
            tabs.forEach(t => {
                const btn = document.getElementById(`tab-${t}Blz`);
                if (status === t) {
                    btn.className = "px-3 py-1.5 text-xs font-medium rounded-md bg-white text-gray-700 shadow-sm transition-all";
                } else {
                    btn.className = "px-3 py-1.5 text-xs font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all";
                }
            });
            if (status === 'all') {
                currentStatusesBlz = [];
            } else {
                currentStatusesBlz = [status];
            }

            currentPageBlz = 1;
            fetchPostsBlz();
        }

        function resetFiltersBlz() {
            document.querySelectorAll('input[name="platform-checkBlz"]').forEach(cb => cb.checked = false);
            quickFilterBlz('all');
            document.getElementById('filter-dropdownBlz').classList.add('hidden');
        }

        function applyFiltersBlz() {
            const platformChecks = document.querySelectorAll('input[name="platform-checkBlz"]:checked');
            currentChannelsBlz = Array.from(platformChecks).map(cb => cb.value);
            currentPageBlz = 1;
            fetchPostsBlz();
            document.getElementById('filter-dropdownBlz').classList.add('hidden');
        }
        function generateMockDataBlz(page, limit) {
            const statuses = ['draft_approved', 'scheduled', 'posted'];
            const platforms = ['instagram', 'facebook', 'linkedin', 'twitter', 'threads'];
            const posts = [];
            
            for (let i = 0; i < limit; i++) {
                let status = statuses[Math.floor(Math.random() * statuses.length)];
                if (currentStatusesBlz.length > 0) {
                    status = currentStatusesBlz[Math.floor(Math.random() * currentStatusesBlz.length)];
                }
                let postPlatforms = platforms.sort(() => .5 - Math.random()).slice(0, Math.floor(Math.random() * 3) + 1);
                if (currentChannelsBlz.length > 0) {
                     const forced = currentChannelsBlz[Math.floor(Math.random() * currentChannelsBlz.length)];
                     if (!postPlatforms.includes(forced)) postPlatforms.push(forced);
                }

                posts.push({
                    id: `post-${page}-${i}`,
                    name: `Campaign Update ${page}-${i+1}: Summer Launch`,
                    post_date: new Date(Date.now() + Math.random() * 1000000000).toISOString(),
                    status: status,
                    platforms: postPlatforms,
                    preview: Math.random() > 0.2 ? `https://picsum.photos/seed/${page}-${i}/400/300` : null
                });
            }

            return {
                posts: posts,
                total: 50, 
                limit: limit,
                page: page
            };
        }

        async function fetchPostsBlz() {
            const container = document.getElementById('posts-containerBlz');
            container.innerHTML = `<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-700"></div></div>`;

            const params = new URLSearchParams({
                page: currentPageBlz,
                limit: 10
            });
            if (currentStatusesBlz.length) params.append('statuses', currentStatusesBlz.join(','));
            if (currentChannelsBlz.length) params.append('channels', currentChannelsBlz.join(','));

            try {
                const response = await fetch(`/api/scheduled_posts?${params.toString()}`);
                if (!response.ok) throw new Error("API not found");
                window.postsDataBlz = await response.json();
            } catch (error) {
                await new Promise(r => setTimeout(r, 400)); 
                window.postsDataBlz = generateMockDataBlz(currentPageBlz, 10);
            }

            // Update Pagination Info
            totalPagesBlz = Math.ceil(window.postsDataBlz.total / window.postsDataBlz.limit);
            document.getElementById('page-infoBlz').textContent = `Page ${currentPageBlz} of ${totalPagesBlz}`;
            document.getElementById('prev-pageBlz').disabled = currentPageBlz === 1;
            document.getElementById('next-pageBlz').disabled = currentPageBlz === totalPagesBlz;

            // Render
            renderPostsBlz(window.postsDataBlz.posts);
        }

        function getStatusBadgeBlz(status) {
            const map = {
                'posted': 'bg-emerald-100 text-emerald-700 border-emerald-200',
                'scheduled': 'bg-blue-100 text-blue-700 border-blue-200',
                'draft_approved': 'bg-amber-100 text-amber-700 border-amber-200',
            };
            const labelMap = {
                'posted': 'Published',
                'scheduled': 'Scheduled',
                'draft_approved': 'Draft',
            }
            const classes = map[status] || 'bg-gray-100 text-gray-700 border-gray-200';
            const label = labelMap[status] || status;
            
            return `<span class="px-2.5 py-0.5 rounded-full text-xs font-semibold border ${classes}">${label}</span>`;
        }
        
        function getActionButtonsBlz(status) {
            if (status === 'scheduled') {
                return `<button class="bg-blue-600 hover:bg-blue-700 gap-2 text-white px-3 py-2.5 rounded-full text-xs font-medium transition-colors inline-flex items-center ">
                            <i data-lucide="send" class="w-4 h-4"></i>
                            <span>Post Now</span>
                </button>`;
            } else if (status === 'draft_approved') {
                return `<button class="border border-gray-200 gap-2 text-gray-600 px-3 py-2.5 rounded-full text-xs font-medium transition-colors inline-flex items-center ">
                            <i data-lucide="calendar-clock" class="w-4 h-4"></i>
                            <span>Schedule Now</span>
                </button>`;
            }
            return '';
        }

        function renderPostsBlz(posts) {
            const container = document.getElementById('posts-containerBlz');
            container.innerHTML = '';
            
            if (currentViewBlz === 'list') {
                const tableContainer = document.createElement('div');
                tableContainer.className = 'bg-white rounded-xl overflow-hidden';
                
                const table = document.createElement('table');
                table.className = 'w-full text-left border-collapse';
                table.innerHTML = `
                    <thead class="border-b border-slate-200 text-slate-500 text-xs ">
                        <tr>
                            <th class="p-4 w-24 text-center">Preview</th>
                            <th class="p-4">Campaign Name</th>
                            <th class="p-4">Date & Time</th>
                            <th class="p-4 text-center">Status</th>
                            <th class="p-4 text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100"></tbody>
                `;

                const tbody = table.querySelector('tbody');
                
                posts.forEach(post => {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-slate-50 transition-colors group';
                    const platformsHtml = post.platforms.map(p => {
                        const plat = SUPPORTED_PLATFORMSBlz.find(pl => pl.id === p);
                        return plat ? `<div class="w-6 h-6 p-1 bg-gray-50 rounded-full border border-gray-100 flex items-center justify-center mr-1" title="${plat.name}">
                            <svg class="w-full h-full" fill="${plat.color}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">${plat.svg}</svg>
                        </div>` : '';
                    }).join('');

                    // Date Formatting
                    const dateObj = new Date(post.post_date);
                    const dateStr = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                    const timeStr = dateObj.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                    row.innerHTML = `
                        <td class="p-4 text-center">
                            ${post.preview 
                                ? `<img src="/media/${post.preview}" alt="Preview" class="w-20 h-20 object-cover rounded-lg border border-slate-200 shadow-sm mx-auto">` 
                                : `<div class="w-20 h-20 bg-slate-100 rounded-lg flex items-center justify-center mx-auto text-slate-400"><i data-lucide="image" class="w-5 h-5"></i></div>`}
                        </td>
                        <td class="p-4">
                            <div class="flex items-center -space-x-1">
                                ${platformsHtml}
                            </div>
                            <div class="hidden text-xs text-slate-400 mt-1">ID: #${post.id || 'N/A'}</div>
                            <div class="font-semibold text-slate-800 text-sm group-hover:text-gray-700 transition-colors">${post.heading}</div>
                            <div class="text-xs text-slate-400 mt-1 w-[600px] text-ellipsis whitespace-nowrap overflow-hidden">${post.content}</div>
                        </td>
                        <td class="p-4">
                            <div class="text-sm text-slate-700 font-medium">${dateStr}</div>
                            <div class="text-xs text-slate-400">${timeStr}</div>
                        </td>
                        <td class="p-4 text-center">
                            ${getStatusBadgeBlz(post.status)}
                        </td>
                        <td class="p-4 text-center">
                             ${getActionButtonsBlz(post.status)}
                        </td>
                    `;
                    tbody.appendChild(row);
                });

                tableContainer.appendChild(table);
                container.appendChild(tableContainer);
            } else { 
                // Grid View
                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6';
                
                posts.forEach(post => {
                    const card = document.createElement('div');
                    card.className = 'bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition-shadow flex flex-col overflow-hidden group';
                    
                    const platformsHtml = post.platforms.map(p => {
                        const plat = SUPPORTED_PLATFORMSBlz.find(pl => pl.id === p);
                        return plat ? `<svg class="w-4 h-4" fill="${plat.color}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">${plat.svg}</svg>` : '';
                    }).join('');

                    const dateObj = new Date(post.post_date);
                    const dateStr = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                    const timeStr = dateObj.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

                    card.innerHTML = `
                        <div class="relative h-40 bg-slate-100 border-b border-slate-100">
                             ${post.preview 
                                ? `<img src="/media/${post.preview}" alt="Preview" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">` 
                                : `<div class="w-full h-full flex flex-col justify-center items-center text-slate-400"><i data-lucide="image" class="w-10 h-10 mb-2"></i><span class="text-xs">No Preview</span></div>`}
                            <div class="absolute top-3 right-3">
                                ${getStatusBadgeBlz(post.status)}
                            </div>
                        </div>
                        <div class="p-5 flex-1 flex flex-col">
                            <div class="flex items-center space-x-2 mb-3 bg-slate-50 w-fit px-2 py-1 rounded-full border border-slate-100">
                                ${platformsHtml}
                            </div>
                            <h3 class="font-semibold text-slate-800 mb-2 line-clamp-2 leading-tight group-hover:text-gray-700 transition-colors">${post.content}</h3>
                            
                            <div class="mt-auto pt-4 border-t border-slate-50 flex justify-between items-center text-xs text-slate-500">
                                <div class="flex items-center">
                                    <i data-lucide="calendar" class="w-3 h-3 mr-1.5"></i>
                                    ${dateStr} at ${timeStr}
                                </div>
                                <button class="hover:bg-slate-100 p-1.5 rounded text-slate-600">
                                    <i data-lucide="edit-2" class="w-3 h-3"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    grid.appendChild(card);
                });
                container.appendChild(grid);
            }
            lucide.createIcons();
        }
        switchViewBlz('list');
        fetchPostsBlz(); 
    </script>

</body>
</html>


